(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58965298","chunk-686d33e5"],{"0bd0":function(e,r,l){"use strict";l("46a5")},"3d49":function(e,r,l){},4481:function(e,r,l){"use strict";l.r(r);var t=function(){var e=this,r=e.$createElement,l=e._self._c||r;return l("div",{staticClass:"app-container"},[l("el-dialog",{attrs:{title:"车辆信息",visible:e.isShow,isShow:e.show,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(r){e.isShow=r},close:function(r){e.$emit("update:show",!1)}}},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆分类：",prop:"vehicleClass"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.vehicleClassChange},model:{value:e.ruleForm.vehicleClass,callback:function(r){e.$set(e.ruleForm,"vehicleClass",r)},expression:"ruleForm.vehicleClass"}},e._l(e.CLFLList,(function(e){return l("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车牌号码：",prop:"vehicleNo"}},[l("el-input",{model:{value:e.ruleForm.vehicleNo,callback:function(r){e.$set(e.ruleForm,"vehicleNo",r)},expression:"ruleForm.vehicleNo"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"所属部门：",prop:"orgId"}},[l("el-cascader",{ref:"cascader",staticStyle:{color:"#000"},attrs:{"popper-class":"cascader",options:e.DWList,props:{value:"id",checkStrictly:!0},placeholder:e.pleasett,"show-all-levels":!1,"expand-trigger":"hover"},on:{change:e.handleChange}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"购置/调拨日期：",prop:"purchaseDate"}},[l("el-date-picker",{staticClass:"width100",attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.ruleForm.purchaseDate,callback:function(r){e.$set(e.ruleForm,"purchaseDate",r)},expression:"ruleForm.purchaseDate"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"使用状态：",prop:"useType"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.useType,callback:function(r){e.$set(e.ruleForm,"useType",r)},expression:"ruleForm.useType"}},e._l(e.SYZTList,(function(e){return l("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"保险配置：",prop:"insuranceInfo"}},[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.insuranceInfo,callback:function(r){e.$set(e.ruleForm,"insuranceInfo",r)},expression:"ruleForm.insuranceInfo"}})],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"到险日期：",prop:"endLineDate"}},[l("el-date-picker",{attrs:{placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.endLineDate,callback:function(r){e.$set(e.ruleForm,"endLineDate",r)},expression:"ruleForm.endLineDate"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆类型：",prop:"vehicleType"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.vehicleTypeFocus},model:{value:e.ruleForm.vehicleType,callback:function(r){e.$set(e.ruleForm,"vehicleType",r)},expression:"ruleForm.vehicleType"}},e._l(e.cllxList,(function(r){return l("el-option",{directives:[{name:"show",rawName:"v-show",value:r.remark==e.remark||!r.remark,expression:"item.remark == remark || !item.remark"}],key:r.dictValue,attrs:{label:r.dictLabel,value:r.dictValue}})})),1)],1)],1)],1),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆品牌：",prop:"vehicleBrand"}},[l("el-input",{model:{value:e.ruleForm.vehicleBrand,callback:function(r){e.$set(e.ruleForm,"vehicleBrand",r)},expression:"ruleForm.vehicleBrand"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"核定载人：",prop:"approvedManned"}},[l("el-input",{model:{value:e.ruleForm.approvedManned,callback:function(r){e.$set(e.ruleForm,"approvedManned",r)},expression:"ruleForm.approvedManned"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"大架号码：",prop:"frameNumber"}},[l("el-input",{model:{value:e.ruleForm.frameNumber,callback:function(r){e.$set(e.ruleForm,"frameNumber",r)},expression:"ruleForm.frameNumber"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"总质量：",prop:"totalMass"}},[l("el-input",{model:{value:e.ruleForm.totalMass,callback:function(r){e.$set(e.ruleForm,"totalMass",r)},expression:"ruleForm.totalMass"}},[l("template",{slot:"append"},[e._v("KG")])],2)],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"发动机号码：",prop:"engineNo"}},[l("el-input",{model:{value:e.ruleForm.engineNo,callback:function(r){e.$set(e.ruleForm,"engineNo",r)},expression:"ruleForm.engineNo"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车身长：",prop:"vehicleLength"}},[l("el-input",{model:{value:e.ruleForm.vehicleLength,callback:function(r){e.$set(e.ruleForm,"vehicleLength",r)},expression:"ruleForm.vehicleLength"}},[l("template",{slot:"append"},[e._v("mm")])],2)],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车身宽：",prop:"vehicleWidth"}},[l("el-input",{model:{value:e.ruleForm.vehicleWidth,callback:function(r){e.$set(e.ruleForm,"vehicleWidth",r)},expression:"ruleForm.vehicleWidth"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车身高：",prop:"vehicleHeight"}},[l("el-input",{model:{value:e.ruleForm.vehicleHeight,callback:function(r){e.$set(e.ruleForm,"vehicleHeight",r)},expression:"ruleForm.vehicleHeight"}},[l("template",{slot:"append"},[e._v("mm")])],2)],1)],1)],1):e._e(),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"能源类型：",prop:"energy_type"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.energyType,callback:function(r){e.$set(e.ruleForm,"energyType",r)},expression:"ruleForm.energyType"}},e._l(e.nylxList,(function(e){return l("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆编号：",prop:"vehicleNumber"}},[l("el-input",{model:{value:e.ruleForm.vehicleNumber,callback:function(r){e.$set(e.ruleForm,"vehicleNumber",r)},expression:"ruleForm.vehicleNumber"}})],1)],1)],1),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆电瓶电压：",prop:"vehicleBatteryVoltage"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.vehicleBatteryVoltage,callback:function(r){e.$set(e.ruleForm,"vehicleBatteryVoltage",r)},expression:"ruleForm.vehicleBatteryVoltage"}},e._l(e.vehicleBatteryVoltageList,(function(e){return l("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"原值（元）：",prop:"vehiclePrice"}},[l("el-input",{model:{value:e.ruleForm.vehiclePrice,callback:function(r){e.$set(e.ruleForm,"vehiclePrice",r)},expression:"ruleForm.vehiclePrice"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"所属清障部门驻地：",prop:"deptLocation"}},[l("el-input",{model:{value:e.ruleForm.deptLocation,callback:function(r){e.$set(e.ruleForm,"deptLocation",r)},expression:"ruleForm.deptLocation"}})],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"车辆停放地：",prop:"vehicleParkingArea"}},[l("el-input",{model:{value:e.ruleForm.vehicleParkingArea,callback:function(r){e.$set(e.ruleForm,"vehicleParkingArea",r)},expression:"ruleForm.vehicleParkingArea"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"轴数：",prop:"axesNumber"}},[l("el-input",{model:{value:e.ruleForm.axesNumber,callback:function(r){e.$set(e.ruleForm,"axesNumber",r)},expression:"ruleForm.axesNumber"}})],1)],1)],1):e._e(),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"是否安装定位：",prop:"isInstallDevice"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.isInstallDevice,callback:function(r){e.$set(e.ruleForm,"isInstallDevice",r)},expression:"ruleForm.isInstallDevice"}},e._l(e.DeviceSelect,(function(e){return l("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1),l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"是否安装云台：",prop:"isInstallCamera"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.isInstallCamera,callback:function(r){e.$set(e.ruleForm,"isInstallCamera",r)},expression:"ruleForm.isInstallCamera"}},e._l(e.DeviceSelect,(function(e){return l("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1)],1),l("el-row",[l("el-col",{attrs:{span:9}},[l("el-form-item",{attrs:{label:"现有里程：",prop:"publishedMileage"}},[l("el-input",{model:{value:e.ruleForm.publishedMileage,callback:function(r){e.$set(e.ruleForm,"publishedMileage",r)},expression:"ruleForm.publishedMileage"}},[l("template",{slot:"append"},[e._v("KM")])],2)],1)],1)],1),l("el-row",[l("el-form-item",{attrs:{label:"照片：",prop:"vehiclePic"}},[l("upload",{attrs:{filesList:e.filesList,objParams:{atmLimit:1}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel},model:{value:e.ruleForm.vehiclePic,callback:function(r){e.$set(e.ruleForm,"vehiclePic",r)},expression:"ruleForm.vehiclePic"}})],1)],1),l("el-row",[l("el-col",{attrs:{span:20}},[l("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[l("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(r){e.$set(e.ruleForm,"remark",r)},expression:"ruleForm.remark"}})],1)],1)],1),l("el-form-item",{staticStyle:{"margin-top":"40px"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("确定")]),l("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},a=[],s=l("c7eb"),i=l("1da1"),o=(l("14d9"),l("b0c0"),l("c5da")),c=l("2934"),n=l("36fa"),u=l("fcb7"),m={components:{upload:n["a"]},props:{show:{type:Boolean,default:!1},search:{type:Object,default:function(){return{}}}},watch:{show:function(){this.isShow=this.show},search:{handler:function(e,r){this.crow=e,this.ruleForm.companyId=e.deptId,this.initData(e)},immediate:!0}},data:function(){return{pleasett:"请选择",remark:"",isShowLoading:!1,isShow:this.show,reqUrl:"add",DWList:[],CLFLList:[],SYZTList:[],cllxList:[],depList:[],nylxList:[],crow:{},ruleForm:{isInstallDevice:"2",isInstallCamera:"2",companyId:"",orgId:"",orgDesc:"",companyDesc:"",engineNo:"",useType:"",vehicleNo:"",vehicleClass:"",insuranceInfo:"",purchaseDate:"",frameNumber:"",endLineDate:"",vehicleBrand:"",vehicleType:"",energyType:"",approvedManned:"",technicalLevel:"",vehicleWidth:"",totalMass:"",vehicleHeight:"",vehicleLength:"",publishedMileage:"",vehicleNumber:"",remark:"",axesNumber:"",vehicleBatteryVoltage:"",vehiclePrice:"",deptLocation:"",vehicleParkingArea:""},DeviceSelect:[{label:"否",id:"2"},{label:"是",id:"1"}],filesList:[],imgsList:[],rules:{vehicleClass:[{required:!0,message:"请选择",trigger:"change"}],orgId:[{required:!0,message:"请选择",trigger:"change"}],endLineDate:[{required:!0,message:"请选择",trigger:"change"}],isInstallDevice:[{required:!0,message:"请选择",trigger:"change"}],isInstallCamera:[{required:!0,message:"请选择",trigger:"change"}],useType:[{required:!0,message:"请选择",trigger:"change"}],purchaseDate:[{required:!0,message:"请选择",trigger:"change"}],insuranceInfo:[{required:!0,message:"请输入",trigger:"blur"}],vehicleNo:[{required:!0,message:"请输入",trigger:"blur"}]},vehicleBatteryVoltageList:[{label:"12V",id:"12V"},{label:"24V",id:"24V"}]}},created:function(){},methods:{handleChange:function(e){var r;this.ruleForm.orgId=e[e.length-1],null!==(r=this.$refs.cascader.getCheckedNodes()[0])&&void 0!==r&&r.data.label&&(this.ruleForm.orgDesc=this.$refs.cascader.getCheckedNodes()[0].data.label),this.$refs.cascader&&(this.$refs.cascader.dropDownVisible=!1)},vehicleTypeFocus:function(){this.ruleForm.vehicleClass||this.$message({message:"请先选择车辆分类",type:"warning"})},vehicleClassChange:function(e){this.remark=1==e?"巡查车辆":"清障车辆"},initData:function(e){var r=this;return Object(i["a"])(Object(s["a"])().mark((function l(){var t,a,i,o,n,m;return Object(s["a"])().wrap((function(l){while(1)switch(l.prev=l.next){case 0:return l.next=2,Object(c["k"])({dictType:"vehicle_class"});case 2:return t=l.sent,r.CLFLList=t.rows,l.next=6,Object(c["k"])({dictType:"vehicle_use_type"});case 6:return a=l.sent,r.SYZTList=a.rows,l.next=10,Object(c["k"])({dictType:"vehicle_type_v1"});case 10:return i=l.sent,r.cllxList=i.rows,l.next=14,Object(c["k"])({dictType:"energy_type"});case 14:return o=l.sent,r.nylxList=o.rows,l.next=18,Object(u["b"])(e.deptId||r.crow.deptId);case 18:return n=l.sent,r.DWList=n.data,l.next=22,Object(c["h"])({parentId:100,status:0});case 22:m=l.sent,r.depList=m.data;case 24:case"end":return l.stop()}}),l)})))()},_returnRes:function(e){var r={name:e.fileName,attachId:e.id,fileUrl:e.fileUrl};this.imgsList.push(r),0!=this.imgsList.length&&(this.ruleForm.vehiclePic=this.imgsList[0].fileUrl)},_returnResDel:function(e){this.imgsList=[],this.ruleForm.vehiclePic=""},submitForm:function(e){var r,l=this,t="add"==this.reqUrl?"post":"put";this.ruleForm.orgId&&(null!==(r=this.$refs.cascader.getCheckedNodes()[0])&&void 0!==r&&r.data.label&&(this.ruleForm.orgDesc=this.$refs.cascader.getCheckedNodes()[0].data.label));for(var a=0;a<this.depList.length;a++)if(this.depList[a].deptId==this.ruleForm.companyId){this.ruleForm.companyDesc=this.depList[a].deptName;break}this.$refs[e].validate((function(e){if(!e)return!1;l.isShowLoading||(l.isShowLoading=!0,Object(o["q"])(l.ruleForm,l.reqUrl,t).then((function(e){200==e.code&&(l.$message({message:"成功!",type:"success"}),l.$emit("notice"),l.isShowLoading=!1,l.resetForm("ruleForm"),l.isShow=!1)})).catch((function(e){l.isShowLoading=!1})))}))},resetForm:function(e){this.ruleForm.orgId=void 0,this.ruleForm.energyType=void 0,this.pleasett="请选择",this.filesList=[],this.imgsList=[],this.$refs[e].resetFields(),this.$refs.cascader.$refs.panel.checkedValue=[],this.$refs.cascader.$refs.panel.clearCheckedNodes(),this.$refs.cascader.$refs.panel.activePath=[]},setUrl:function(e){this.reqUrl=e},getInfo:function(e){var r=this;return Object(i["a"])(Object(s["a"])().mark((function l(){var t,a,i,n,u,m;return Object(s["a"])().wrap((function(l){while(1)switch(l.prev=l.next){case 0:return r.isShow=!0,l.next=3,Object(o["s"])(e);case 3:return t=l.sent,t.data.vehicleType&&(t.data.vehicleType=t.data.vehicleType+""),t.data.energyType&&(t.data.energyType=t.data.energyType+""),r.ruleForm=t.data,r.ruleForm.useType=r.ruleForm.useType+"",r.ruleForm.vehicleClass=r.ruleForm.vehicleClass+"",r.pleasett=r.ruleForm.orgDesc,r.$refs.cascader.checkedValue=[r.ruleForm.orgId],r.vehicleClassChange(r.ruleForm.vehicleClass),l.next=14,Object(c["k"])({dictType:"vehicle_type_v1"});case 14:if(a=l.sent,r.cllxList=a.rows,i=t.data,n=[],[],i.vehiclePic){l.next=22;break}return r.imgsList=[],r.filesList=[],r.ruleForm.vehiclePic="",l.abrupt("return");case 22:u={response:{data:{}}},{response:{data:{}}},m={},{},u.name=i.vehiclePic,u.url="/prod-api"+i.vehiclePic,u.response.data.name=i.vehiclePic,u.response.data.url="/prod-api"+i.vehiclePic,m.fileUrl=i.vehiclePic,n.push(u),r.imgsList.push(m),r.filesList=n;case 31:case"end":return l.stop()}}),l)})))()}}},p=m,d=(l("61d1"),l("0bd0"),l("2877")),h=Object(d["a"])(p,t,a,!1,null,"324aa5a4",null);r["default"]=h.exports},"46a5":function(e,r,l){},"61d1":function(e,r,l){"use strict";l("3d49")},fcb7:function(e,r,l){"use strict";l.d(r,"g",(function(){return a})),l.d(r,"f",(function(){return s})),l.d(r,"e",(function(){return i})),l.d(r,"c",(function(){return o})),l.d(r,"h",(function(){return c})),l.d(r,"d",(function(){return n})),l.d(r,"a",(function(){return u})),l.d(r,"b",(function(){return m}));var t=l("b775");function a(e){return Object(t["a"])({url:"/system/dept/list",method:"get",params:e})}function s(e){return Object(t["a"])({url:"/roadProducts/dept/deptList",method:"post",data:e})}function i(e){return Object(t["a"])({url:"/system/dept/"+e,method:"get"})}function o(e){return Object(t["a"])({url:"/system/dept",method:"post",data:e})}function c(e){return Object(t["a"])({url:"/system/dept",method:"put",data:e})}function n(e){return Object(t["a"])({url:"/system/dept/"+e,method:"delete"})}function u(e){return Object(t["a"])({url:"/system/user/deptTree?ancestors=".concat(e),method:"get"})}function m(e){return Object(t["a"])({url:"/system/user/deptTree?deptIdAndBelow=".concat(e||""),method:"get"})}}}]);