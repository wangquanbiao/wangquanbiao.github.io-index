(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33f7089d"],{2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},6:function(t,e){},7:function(t,e){},7401:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"com_details"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"160px"}},[a("div",{staticClass:"header"},[a("div",{staticStyle:{color:"#ffae00"}},[a("p",[t._v("!")]),t._v(" 注意：全部材料必须上传，费用全部必填，否则审核可能不通过。 ")])]),a("div",{staticClass:"money"},[a("div",{staticClass:"title"},[t._v("费用明细(万元)")]),a("div",{staticClass:"money-container"},[a("el-col",{staticStyle:{"margin-right":"25px"},attrs:{span:5}},[a("el-form-item",{attrs:{label:"涉路施工协调服务费",prop:"servicesAmount"}},[a("el-input",{staticClass:"el_input_text",attrs:{placeholder:"请输入"},model:{value:t.ruleForm.servicesAmount,callback:function(e){t.$set(t.ruleForm,"servicesAmount",e)},expression:"ruleForm.servicesAmount"}})],1)],1),a("el-col",{staticStyle:{"margin-right":"25px"},attrs:{span:5}},[a("el-form-item",{attrs:{label:"路产补偿费",prop:"compAmount"}},[a("el-input",{staticClass:"el_input_text",attrs:{placeholder:"请输入"},model:{value:t.ruleForm.compAmount,callback:function(e){t.$set(t.ruleForm,"compAmount",e)},expression:"ruleForm.compAmount"}})],1)],1),a("el-col",{staticStyle:{"margin-right":"25px"},attrs:{span:5}},[a("el-form-item",{attrs:{label:"公路资源占用补偿费",prop:"occupyCompAmount"}},[a("el-input",{staticClass:"el_input_text",attrs:{placeholder:"请输入"},model:{value:t.ruleForm.occupyCompAmount,callback:function(e){t.$set(t.ruleForm,"occupyCompAmount",e)},expression:"ruleForm.occupyCompAmount"}})],1)],1),a("el-col",{staticStyle:{"margin-right":"25px"},attrs:{span:5}},[a("el-form-item",{attrs:{label:"通行费损失补偿",prop:"lossCompAmount"}},[a("el-input",{staticClass:"el_input_text",attrs:{placeholder:"请输入"},model:{value:t.ruleForm.lossCompAmount,callback:function(e){t.$set(t.ruleForm,"lossCompAmount",e)},expression:"ruleForm.lossCompAmount"}})],1)],1)],1)]),a("div",{staticClass:"base"},[a("div",{staticClass:"title"},[t._v("材料上传")]),a("el-row",{staticStyle:{padding:"15px 25px"}},[a("vxe-grid",{attrs:{stripe:"",border:"",resizable:"","auto-resize":"","max-height":"730",columns:t.columns,data:t.table.datas},scopedSlots:t._u([{key:"operation",fn:function(e){var r=e.row;return[a("div",{staticStyle:{"text-align":"center",height:"30px",display:"flex","justify-content":"center","align-items":"center"}},[a("upload",{ref:r.key+"_ref",attrs:{keyId:r.key,objParams:{replaceBtn:!0,hideList:!0},atmLimit:999,filesList:t.fileKey.doc[r.key]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}},[a("el-button",{attrs:{type:"text"}},[t._v("上传")])],1)],1)]}},{key:"materialName",fn:function(e){var r=e.row;return t._l(t.ruleForm.doc[r.key],(function(e,o){return a("p",{key:e.attachId,staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[t.ruleForm.doc[r.key].length>1?a("span",{staticStyle:{color:"#2F7EF5"}},[t._v(t._s(o+1)+".")]):t._e(),a("span",{staticStyle:{color:"#2F7EF5",cursor:"pointer"},on:{click:function(a){return t.documentPreview(e)}}},[t._v(" "+t._s(e.name))]),a("svg",{staticClass:"icon",staticStyle:{margin:"0 3px 0 20px",cursor:"pointer"},attrs:{t:"1712814249787",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1857",width:"20",height:"20"},on:{click:function(a){return t.downloadFn(e)}}},[a("path",{attrs:{d:"M800.287827 554.675195l0 182.162702L231.285229 736.837897 231.285229 554.675195l-45.028983 0 0 197.513492c0 15.760144 13.713372 29.678193 29.268839 29.678193l602.569658 0c15.555467 0 27.222067-13.918049 27.222067-29.678193L845.31681 554.675195 800.287827 554.675195z","p-id":"1858",fill:"#888"}}),a("path",{attrs:{d:"M498.593644 692.11593c4.40056 4.40056 10.131521 6.54967 15.964821 6.54967 5.321607 0 10.643214-1.944433 14.941435-5.730961 1.330402-0.818709 2.456126-1.842095 3.581851-2.967819l144.706776-144.706776c8.801119-8.801119 8.801119-23.026184 0-31.827304-8.801119-8.801119-23.537877-8.801119-32.338997 0L536.254247 622.11633 536.254247 283.477913c0-12.485309-10.029182-22.514491-22.514491-22.514491s-22.514491 10.029182-22.514491 22.514491l0 338.638417L385.10014 515.479512c-8.801119-8.801119-22.821507-8.801119-31.622626 0-8.801119 8.801119-8.698781 23.026184 0.102339 31.827304L498.593644 692.11593z","p-id":"1859",fill:"#888"}})]),a("svg",{staticClass:"icon",staticStyle:{cursor:"pointer"},attrs:{t:"1712814361650",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2976",width:"20",height:"20"},on:{click:function(a){return t._returnResDel(e,r.key)}}},[a("path",{attrs:{d:"M803.4 262.1H657.7v-62.4c0-11.6-9.3-20.9-20.9-20.9H387.1c-11.5 0-20.8 9.3-20.8 20.8V262H220.5c-11.5 0-20.8 9.3-20.8 20.8s9.3 20.8 20.8 20.8h20.8v499.7c0 23 18.6 41.6 41.6 41.6h455.4c23 0 41.6-18.6 41.7-41.6V303.8h23.4v0.1c11.5 0 20.9-9.3 20.9-20.9 0-11.5-9.3-20.9-20.9-20.9z m-395.5-41.6h208.2v41.6H407.9v-41.6zM741 345.4v437.2c0 11.5-9.3 20.8-20.8 20.9H303.8c-11.5 0-20.8-9.3-20.9-20.8V303.8H741v41.6z",fill:"#888","p-id":"2977"}}),a("path",{attrs:{d:"M636.9 439.1c11.5 0 20.8 9.3 20.8 20.8v223.8c0 11.5-9.3 20.8-20.8 20.8s-20.8-9.3-20.8-20.8V460c0-11.5 9.3-20.9 20.8-20.9zM512 397.5c11.5 0 20.8 9.3 20.8 20.8v265.4c0 11.5-9.3 20.8-20.8 20.8s-20.8-9.3-20.8-20.8V418.3c-0.1-11.5 9.3-20.8 20.8-20.8zM387.1 439.1c11.5 0 20.8 9.3 20.8 20.8v223.8c0 11.5-9.3 20.8-20.8 20.8s-20.8-9.3-20.8-20.8V460c0-11.5 9.3-20.9 20.8-20.9z",fill:"#888","p-id":"2978"}})])])}))}}])}),a("el-dialog",{attrs:{title:t.fileName,visible:t.documentManageDialog,width:"50vw"},on:{"update:visible":function(e){t.documentManageDialog=e}}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.downloadFn({id:t.relationId,fileName:t.fileName})}}},[t._v(" 下载 ")]),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{attrs:{type:"primary"},on:{click:t.pdfPrintAll}},[t._v(" 打印 ")]):a("el-button",{directives:[{name:"print",rawName:"v-print",value:t.print,expression:"print"}],attrs:{type:"primary"}},[t._v(" 打印 ")]),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",size:"mini"},on:{click:t.prePage}},[t._v("上一页")]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.nextPage}},[t._v("下一页"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.clock(e)}}},[t._v(" 顺时针")]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.counterClock(e)}}},[t._v(" 逆时针")]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{attrs:{type:"primary"},on:{click:t.zoomIn}},[t._v("放大")]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("el-button",{attrs:{type:"primary"},on:{click:t.zoomOut}},[t._v("缩小")]):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("div",{staticStyle:{"margin-top":"10px",color:"#409EFF"}},[t._v(t._s(t.pageNum)+" / "+t._s(t.pageTotalNum)+" ")]):t._e()],1),a("div",{ref:"scrollBootmContainer",style:{height:"70vh",overflow:"auto"},on:{scroll:t.handleBottomScroll}},[["docx","doc"].includes(t.documentFileUrl.split(".")[1])?a("vue-office-docx",{ref:"wordContent",staticStyle:{height:"auto"},attrs:{id:"print-hz",src:t.documentFileUrl}}):t._e(),"xlsx"==t.documentFileUrl.split(".")[1]?a("vue-office-excel",{staticStyle:{height:"100%"},attrs:{id:"print-hz",src:t.documentFileUrl}}):t._e(),"pdf"==t.documentFileUrl.split(".")[1]?a("pdf",{ref:"pdf",style:{transform:"scale("+t.pdfscale+")"},attrs:{id:"print-hz",page:t.pageNum,rotate:t.pageRotate,src:t.documentFileUrl},on:{"num-pages":function(e){t.pageTotalNum=e}}}):t._e(),["jpg","jpeg","png"].includes(t.documentFileUrl.split(".")[1])?a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("el-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.documentFileUrl,"preview-src-list":[t.documentFileUrl]}})],1):t._e()],1)])],1)],1),a("div",{staticClass:"doc"},[a("div",{staticClass:"title"},[t._v("其他附属文件上传")]),a("div",{staticClass:"doc-container"},[a("el-form-item",{attrs:{label:"附属文件上传",prop:"name"}},[a("upload",{attrs:{objParams:{replaceBtn:!0,newStyleClass:!0},atmLimit:999,filesList:t.ruleForm.attachList},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}},[a("div",{staticClass:"attach_btn"},[t._v(" 上传附件 ")])])],1)],1)]),a("div",{staticClass:"btn"},[a("el-button",{on:{click:function(e){return t.goBack("ruleForm")}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",0)}}},[t._v("保存")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",3)}}},[t._v("提交审核")])],1)])],1)])},o=[],i=a("c7eb"),n=a("1da1"),s=(a("99af"),a("4de4"),a("caad"),a("d81d"),a("14d9"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("ba77")),l=a("2d46"),c=a.n(l),u=(a("d457"),a("b690")),d=a.n(u),p=(a("2c3a"),a("a147")),m=a.n(p),f=a("858e"),h=function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-738bf79d")]).then(a.bind(null,"4a77"))},g={components:{upload:h,VueOfficeDocx:c.a,VueOfficeExcel:d.a,VueOfficePdf:m.a,pdf:f["a"]},data:function(){return{fileKey:{0:"yjh",1:"yj",2:"sfz",3:"cls",4:"shb",5:"pbcxy",6:"zxyj",7:"sgtsj",8:"sgfa",9:"sjfa",10:"yjya",11:"apbg",12:"xksx",doc:{yjh:[],yj:[],sfz:[],cls:[],shb:[],pbcxy:[],zxyj:[],sgtsj:[],sgfa:[],sjfa:[],yjya:[],apbg:[],xksx:[]}},ruleForm:{servicesAmount:"",compAmount:"",occupyCompAmount:"",lossCompAmount:"",businessId:this.$route.query.id,status:"",doc:{yjh:[],yj:[],sfz:[],cls:[],shb:[],pbcxy:[],zxyj:[],sgtsj:[],sgfa:[],sjfa:[],yjya:[],apbg:[],xksx:[]},attachList:[]},rules:{servicesAmount:[{required:!0,message:"请输入",trigger:"blur"}],compAmount:[{required:!0,message:"请输入",trigger:"blur"}],occupyCompAmount:[{required:!0,message:"请输入",trigger:"blur"}],lossCompAmount:[{required:!0,message:"请输入",trigger:"blur"}]},table:{loading:!1,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[{label:"征求意见函",key:"yjh"},{label:"立项依据",key:"yj"},{label:"申请人身份证明",key:"sfz"},{label:"安全承诺书",key:"cls"},{label:"初步审核表",key:"shb"},{label:"涉路施工路产赔（补）偿协议",key:"pbcxy"},{label:"专家意见",key:"zxyj"},{label:"施工图设计",key:"sgtsj"},{label:"施工方案",key:"sgfa"},{label:"设计方案",key:"sjfa"},{label:"应急预案",key:"yjya"},{label:"安全技术评价报告",key:"apbg"},{label:"涉路施工许可事项申请表",key:"xksx"}]},columns:[{type:"seq",width:150,title:"材料编号",align:"center"},{title:"材料类型",field:"label",align:"center",width:300},{title:"材料名称",slots:{default:"materialName"},align:"center"},{title:"操作",slots:{default:"operation"},align:"center",width:160}],documentManageDialog:!1,documentFileUrl:"",print:{id:"print-hz"},pdfscale:1,pageNum:1,pageTotalNum:1,pageRotate:0,relationId:"",fileName:""}},mounted:function(){this.$route.query.id&&this.getEditData()},methods:{handleBottomScroll:function(t){if("pdf"==this.documentFileUrl.split(".")[1]){var e=this.$refs.scrollBootmContainer;if(0===t.target.scrollTop&&this.pageNum>1&&(this.pageNum=this.pageNum-1,e.scrollTo(0,50)),!(this.pageNum>=this.pageTotalNum)){var a=Math.abs(t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight)<=1;a&&(this.pageNum=this.pageNum+1,e.scrollTo(0,50))}}},pdfPrintAll:function(){var t=this;"pdf"==this.documentFileUrl.split(".")[1]&&this.$nextTick((function(){t.$refs.pdf.print()}))},zoomIn:function(){this.pdfscale>1.7||(this.pdfscale+=.1)},zoomOut:function(){this.pdfscale<.7||(this.pdfscale-=.1)},clock:function(){this.pageRotate+=90},counterClock:function(){this.pageRotate-=90},prePage:function(){var t=this.pageNum;t=t>1?t-1:this.pageTotalNum,this.pageNum=t},nextPage:function(){var t=this.pageNum;t=t<this.pageTotalNum?t+1:1,this.pageNum=t},documentPreview:function(t){var e=["jpg","jpeg","png","pdf","xlsx","xls","doc","docx"].includes(t.fileUrl.split(".")[1].toLowerCase());this.pageNum=1,e?(this.fileName=t.fileName||t.name,this.relationId=t.id||t.attachId,this.pdfscale=1,this.documentFileUrl="/prod-api"+t.fileUrl,this.documentManageDialog=!0):this.downloadGet("/roadProducts/attach/download/".concat(t.id||t.attachId),(t.fileName||t.name).split(".")[0]+"."+(t.fileName||t.name).split(".")[1])},downloadFn:function(t){this.downloadGet("/roadProducts/attach/download/".concat(t.id||t.attachId),t.fileName||t.name)},getEditData:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var a,r,o,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["c"])(t.$route.query.id);case 2:for(n in r=e.sent,t.ruleForm.compAmount=r.data.compAmount,t.ruleForm.lossCompAmount=r.data.lossCompAmount,t.ruleForm.occupyCompAmount=r.data.occupyCompAmount,t.ruleForm.servicesAmount=r.data.servicesAmount,(null===(a=r.data)||void 0===a||null===(a=a.attachList)||void 0===a?void 0:a.length)>0&&r.data.attachList.map((function(e){var a={attachId:e.id,name:e.fileName,fileUrl:e.fileUrl};t.ruleForm.attachList.push(a)})),o=r.data.doc,o)o[n].length>=1&&t.setFiles(o[n],n);case 10:case"end":return e.stop()}}),e)})))()},setFiles:function(t,e){for(var a=[],r=0;r<t.length;r++){var o={response:{data:{}}},i={};o.name=t[r].fileName,o.fileName=t[r].fileName,o.id=t[r].id,o.fileUrl=t[r].fileUrl,o.url="/prod-api"+t[r].fileUrl,o.response.data.fileUrl=t[r].fileUrl,o.response.data.url="/prod-api"+t[r].fileUrl,o.response.data.name=t[r].fileName,o.response.data.fileName=t[r].fileName,o.response.data.id=t[r].id,i.name=t[r].fileName,i.attachId=t[r].id,i.fileUrl=t[r].fileUrl,this.ruleForm.doc[e].push(i),a.push(o)}this.fileKey.doc[e]=a},submitForm:function(t,e){var a=this;this.$refs[t].validate(function(){var t=Object(n["a"])(Object(i["a"])().mark((function t(r){var o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return a.ruleForm.status=e,t.next=4,Object(s["g"])(a.ruleForm);case 4:o=t.sent,200==o.code&&(a.$message.success("提交成功！"),a.$router.go(-1)),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},goBack:function(t){this.$refs[t].resetFields(),this.$router.go(-1)},_returnRes:function(t,e){var a=this,r={name:t.fileName,attachId:t.id,fileUrl:t.fileUrl};if(e){var o=this.ruleForm.doc[e].concat([r]);this.$nextTick((function(){a.$set(a.ruleForm.doc,e,o)}))}else this.ruleForm.attachList.push(r)},_returnResDel:function(t,e){var a={name:t.fileName||t.name||t.response.data.fileName,attachId:t.id||t.attachId||t.response.data.id};if(e){this.ruleForm.doc[e];this.ruleForm.doc[e]=this.ruleForm.doc[e].filter((function(t){return t.attachId!=a.attachId}))}else this.ruleForm.attachList=this.ruleForm.attachList.filter((function(t){return t.attachId!=a.attachId}))}}},y=g,b=(a("b00e"),a("2877")),v=Object(b["a"])(y,r,o,!1,null,"7a4b14d8",null);e["default"]=v.exports},b00e:function(t,e,a){"use strict";a("b095")},b095:function(t,e,a){},ba77:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"k",(function(){return c})),a.d(e,"f",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"g",(function(){return p})),a.d(e,"q",(function(){return m})),a.d(e,"j",(function(){return f})),a.d(e,"p",(function(){return h})),a.d(e,"n",(function(){return g})),a.d(e,"o",(function(){return y})),a.d(e,"m",(function(){return b})),a.d(e,"l",(function(){return v})),a.d(e,"i",(function(){return x}));var r=a("b775");function o(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/stat",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/statistics/sl/statTotalList",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/statistics/sl/statCompanyByType",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/list",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/remove",method:"DELETE",data:t})}function c(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/save",method:"post",data:t})}function u(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/listHandle",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/".concat(t),method:"get"})}function p(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/materialSubmit",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/updateStatus",method:"post",data:t})}function f(t){return Object(r["a"])({url:"roadProducts/roadConstruct/reviewSubmit",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/statistics/sl/total",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/statistics/sl/companyStat",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/statistics/sl/companyRank",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/statistics/sl/statTypeRatio",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/statistics/sl/statTypeCount",method:"post",data:t})}function x(t){return Object(r["a"])({url:"/roadProducts/roadConstruct/withdraw/".concat(t),method:"patch"})}}}]);