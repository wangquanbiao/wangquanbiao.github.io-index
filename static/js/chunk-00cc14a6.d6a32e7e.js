(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00cc14a6","chunk-f019eeac","chunk-2c3e764b"],{"094f":function(e,t,a){},"6f43":function(e,t,a){"use strict";a("094f")},7568:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account_comp"},[a("el-row",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"90px",inline:!0,model:e.formInline}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formInline.nickName,callback:function(t){e.$set(e.formInline,"nickName",t)},expression:"formInline.nickName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话号码",prop:"phonenumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formInline.phonenumber,callback:function(t){e.$set(e.formInline,"phonenumber",t)},expression:"formInline.phonenumber"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.dict.type.sys_normal_disable,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"值班状态：",prop:"dutyStatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.dutyStatus,callback:function(t){e.$set(e.formInline,"dutyStatus",t)},expression:"formInline.dutyStatus"}},e._l(e.optionsJobStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","padding-right":"15px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleQuery(void 0)}}},[e._v("查询")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1),a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleExport}},[e._v("导出")]),a("vxe-grid",{attrs:{"pager-config":e.table.page,border:"",resizable:"","auto-resize":"",height:"700",loading:e.table.loading,columns:e.columns,data:e.table.datas},on:{"page-change":e.handlePageChange},scopedSlots:e._u([{key:"status",fn:function(t){var n=t.row;return[a("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(t){return e.handleStatusChange(n)}},model:{value:n.status,callback:function(t){e.$set(n,"status",t)},expression:"row.status"}})]}},{key:"dutyStatus",fn:function(t){var n=t.row;return[a("span",{style:{color:"1"==n.dutyStatus?"#41b883":"#c80000"}},[e._v(" "+e._s("1"==n.dutyStatus?"值班中":"休息中")+" ")])]}},{key:"operation",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleUpdate(n)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDel(n)}}},[e._v("删除")])]}}])}),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"1200px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户姓名",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"请输入用户姓名",maxlength:"30"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否为用户",prop:"status"}},[a("el-select",{staticClass:"width100",attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"是",value:"0"}}),a("el-option",{attrs:{label:"否",value:"1"}})],1)],1)],1)],1),a("el-row",{staticStyle:{"padding-bottom":"5px"}},[a("el-col",{attrs:{span:12}},[void 0==e.form.userId?a("el-form-item",{attrs:{label:"用户账号",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入用户账号",maxlength:"30"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e()],1),a("el-col",{attrs:{span:12}},[void 0==e.form.userId?a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入用户密码",type:"password",maxlength:"20","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归属部门",prop:"deptId"}},[a("treeselect",{attrs:{options:e.deptOptions,"show-count":!0,placeholder:"请选择归属部门"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"其他所属部门：",prop:"secondDeptId"}},[a("treeselect",{attrs:{flat:!0,multiple:!0,options:e.deptOptions2,"show-count":!0,placeholder:"请选择其他所属部门"},model:{value:e.form.secondDeptId,callback:function(t){e.$set(e.form,"secondDeptId",t)},expression:"form.secondDeptId"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.form.phonenumber,callback:function(t){e.$set(e.form,"phonenumber",t)},expression:"form.phonenumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId,disabled:1==e.status}})})),1)],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"照片",prop:"avatar"}},[a("upload",{attrs:{imgsList:e.imgsList,filesList:e.filesList,objParams:{atmLimit:1}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],o=a("5530"),l=(a("a15b"),a("d81d"),a("14d9"),a("a9e3"),a("c0c7")),i=a("2934"),s=a("7ded"),c=a("24e5"),d=a.n(c),u=a("36fa"),p=a("ca17"),m=a.n(p),f=(a("542c"),{dicts:["sys_normal_disable"],components:{upload:u["a"],Treeselect:m.a},props:["deptId"],watch:{deptId:{handler:function(e,t){this.handleQuery(e),this.crow.deptId=e},immediate:!0}},data:function(){return{table:{loading:!0,page:{currentPage:1,pageSize:10,pageSizes:[10,20,50],total:0},datas:[]},columns:[{title:"用户编号",field:"userId",align:"center",width:80},{title:"用户姓名",field:"nickName",align:"center"},{title:"用户账号",field:"userName",align:"center"},{title:"公司名称",field:"companyName",align:"center"},{title:"部门名称",field:"deptName",align:"center"},{title:"电话号码",field:"phonenumber",align:"center"},{title:"状态",slots:{default:"status"},align:"center",width:60},{title:"值班状态",slots:{default:"dutyStatus"},align:"center",width:80},{title:"创建时间",field:"createTime",align:"center"},{title:"操作",slots:{default:"operation"},align:"center"}],isShowAdd:!1,crow:{},formInline:{nickName:void 0,phonenumber:void 0,status:void 0,dutyStatus:void 0},optionsJobStatus:[{label:"值班中",value:"1"},{label:"未值班",value:"0"}],open:!1,form:{},title:"",deptOptions:void 0,deptOptions2:void 0,roleOptions:[],imgsList:[],filesList:[],initPassword:void 0,rules:{userName:[{required:!0,message:"用户账号不能为空",trigger:"blur"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],deptId:[{required:!0,message:"请选择归属部门",trigger:"change"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\w\s]).{8,}$/,min:5,max:20,message:"密码包括字母大小写（区分大小写）、数字、符号，最少8位数！",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}],idCard:[{pattern:/^\d{6}((((((19|20)\d{2})(0[13-9]|1[012])(0[1-9]|[12]\d|30))|(((19|20)\d{2})(0[13578]|1[02])31)|((19|20)\d{2})02(0[1-9]|1\d|2[0-8])|((((19|20)([13579][26]|[2468][048]|0[48]))|(2000))0229))\d{3})|((((\d{2})(0[13-9]|1[012])(0[1-9]|[12]\d|30))|((\d{2})(0[13578]|1[02])31)|((\d{2})02(0[1-9]|1\d|2[0-8]))|(([13579][26]|[2468][048]|0[048])0229))\d{2}))(\d|X|x)$/,message:"请输入正确的身份证号码",trigger:"blur"}]}}},mounted:function(){this.getDeptTree()},methods:{handleExport:function(){var e=Object(o["a"])(Object(o["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,deptId:this.deptId});this.download("system/user/export",Object(o["a"])({},e),"账号管理_".concat((new Date).getTime(),".xlsx"))},cancel:function(){this.open=!1,this.reset()},_returnRes:function(e){var t={name:e.fileName,attachId:e.id,fileUrl:e.fileUrl};this.imgsList.push(t)},_returnResDel:function(e){this.imgsList=[]},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(0!=e.imgsList.length&&(e.form.avatar=e.imgsList[0].fileUrl),e.form.avatar||(e.form.avatar="/profile/20240201/8d12fe9a631f46f79d6027c2706a60f8.png"),e.form.secondDeptId=e.form.secondDeptId&&e.form.secondDeptId.length>0?e.form.secondDeptId.map((function(e){return e})).join(","):"",Object(s["c"])().then((function(t){var a=new d.a;a.setPublicKey(t.data),e.form.password=a.encrypt(e.form.password),void 0!=e.form.userId?Object(l["m"])(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.handleQuery()})):Object(l["a"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.handleQuery()}))})))}))},getDeptTree:function(){var e=this;Object(l["e"])().then((function(t){e.deptOptions=t.data})),Object(i["u"])(this.$store.getters.userInfo.companyId).then((function(t){e.deptOptions2=t.data}))},resetForm:function(e){var t=this;this.$nextTick((function(){t.$refs[e].resetFields()}))},reset:function(){for(var e in this.filesList=[],this.imgsList=[],this.form={userId:void 0,deptId:void 0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:void 0,status:"0",remark:void 0,postIds:[],roleIds:[],idCard:void 0,joinUsTime:void 0,startWorkTime:void 0,politicalStatus:void 0,nativePlace:void 0,jobStatus:void 0,avatar:void 0},this.form)this.form[e]=void 0},handleStatusChange:function(e){var t=this,a="0"===e.status?"启用":"停用";this.$modal.confirm('确认要"'+a+'""'+e.userName+'"用户吗？').then((function(){return Object(l["b"])(e.userId,e.status)})).then((function(){t.$modal.msgSuccess(a+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},handleAdd:function(){var e=this;this.reset(),this.open=!0,this.title="添加用户",Object(l["h"])().then((function(t){e.roleOptions=t.roles,e.form.password=e.initPassword}))},handleDel:function(e){var t=this,a=e.userId;this.$modal.confirm('是否确认删除用户编号为"'+a+'"的数据项？').then((function(){return Object(l["d"])(a)})).then((function(){t.handleQuery(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleUpdate:function(e){var t=this,a=e.userId;Object(l["h"])(a).then((function(e){t.open=!0,t.reset(),t.form=e.data,t.imgsList.push({fileUrl:t.form.avatar}),t.form.secondDeptId=t.form.secondDeptId?t.form.secondDeptId.split(",").map((function(e){return Number(e)})):void 0,t.roleOptions=e.roles,t.$set(t.form,"postIds",e.postIds),t.$set(t.form,"roleIds",e.roleIds),t.title="修改用户",t.form.password=""}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.table.page.currentPage=t,this.table.page.pageSize=a,this.handleQuery()},handleQuery:function(e){var t=this;this.table.loading=!0;var a=Object(o["a"])(Object(o["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,deptId:e||this.deptId});Object(l["j"])(a).then((function(e){e.rows.map((function(e){e.deptName=e.dept.deptName,e.remark=e.remark||e.dept.remark})),t.table.datas=e.rows,t.table.page.total=e.total,t.table.loading=!1}))}}}),h=f,g=a("2877"),b=Object(g["a"])(h,n,r,!1,null,null,null);t["default"]=b.exports},7724:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vehicle_comp"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.setAdd}},[e._v("新增")]),a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleExport}},[e._v("导出")]),a("vxe-grid",{attrs:{"pager-config":e.table.page,border:"",resizable:"","auto-resize":"",height:"700",loading:e.table.loading,columns:e.columns,data:e.table.datas},on:{"page-change":e.handlePageChange},scopedSlots:e._u([{key:"useType",fn:function(t){var n=t.row;return[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{display:"inline-block",width:"10px",height:"10px","border-radius":"50%","margin-right":"4px"},style:{background:"1"==n.useType?"#1ab74a":"#d01d1d"}}),a("span",[e._v(" "+e._s(n.useTypeName)+" ")])])]}},{key:"optionImg",fn:function(t){var n=t.row;return[n.vehiclePic?a("img",{staticClass:"img_w",staticStyle:{width:"50px",height:"50px"},attrs:{src:e.setImgUrl(n),alt:""},on:{click:function(t){return e.setFD(n)}}}):e._e()]}},{key:"isInstallDevice",fn:function(t){var n=t.row;return[a("div",[e._v(" "+e._s("1"==n.isInstallDevice?"是":"否")+" ")])]}},{key:"isInstallCamera",fn:function(t){var n=t.row;return[a("div",[e._v(e._s("1"==n.isInstallCamera?"是":"否"))])]}},{key:"operation",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDel(n)}}},[e._v("删除")])]}}])}),a("details-dialog",{ref:"details",attrs:{search:e.crow,show:e.isShowAdd},on:{notice:e.handleQuery,"update:show":function(t){e.isShowAdd=t}}}),a("el-dialog",{attrs:{visible:e.imgDialogVisible,size:"full",modal:!1,title:"查看大图片"},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.imgUrl,alt:""}})])],1)},r=[],o=a("5530"),l=(a("d3b7"),a("3ca3"),a("ddb0"),a("2934")),i=a("c5da"),s=function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-58965298")]).then(a.bind(null,"4481"))},c={components:{detailsDialog:s},props:["deptId"],watch:{deptId:{handler:function(e,t){this.handleQuery(e),this.crow.deptId=e},immediate:!0}},data:function(){return{table:{loading:!0,page:{currentPage:1,pageSize:10,pageSizes:[10,20,50],total:0},datas:[]},columns:[{title:"公司名称",field:"companyDesc",align:"center"},{title:"部门名称",field:"orgDesc",align:"center"},{title:"车牌号码",field:"vehicleNo",align:"center"},{title:"车辆分类",field:"vehicleClassName",align:"center"},{title:"车辆类型",field:"vehicleTypeName",align:"center"},{title:"购置/调拨日期",field:"purchaseDate",align:"center"},{title:"使用状态",slots:{default:"useType"},align:"center"},{title:"车辆照片",slots:{default:"optionImg"},align:"center"},{title:"安装定位设备",slots:{default:"isInstallDevice"},align:"center"},{title:"安装云台",slots:{default:"isInstallCamera"},align:"center"},{title:"备注",field:"remark",align:"center"},{title:"操作",slots:{default:"operation"},align:"center"}],imgDialogVisible:!1,imgUrl:"",isShowAdd:!1,crow:{}}},mounted:function(){},methods:{handleExport:function(){var e=Object(o["a"])(Object(o["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:this.deptId});this.download("/roadProducts/tVehicleInfo/export",Object(o["a"])({},e),"车辆管理_".concat((new Date).getTime(),".xlsx"))},setAdd:function(){var e=this;this.isShowAdd=!0,this.crow.deptId=this.deptId,this.crow.deptId||(this.crow.deptId=99),this.$nextTick((function(){e.$refs.details.setUrl("add"),e.$refs.details.initData(e.crow),e.$refs.details.resetForm("ruleForm")}))},handleDel:function(e){var t=this;this.$confirm("确定删除该条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["r"])(e.id).then((function(e){200==e.code&&(t.$message({message:"成功!",type:"success"}),t.handleQuery())})).catch((function(e){}))})).catch((function(){}))},handleEdit:function(e){var t=this;this.crow.deptId=e.companyId,this.$nextTick((function(){t.$refs.details.initData(t.crow),t.$refs.details.getInfo(e.id),t.$refs.details.setUrl("edit")}))},setImgUrl:function(e){return e.vehiclePic?"/prod-api"+e.vehiclePic:""},setFD:function(e){this.imgUrl="/prod-api"+e.vehiclePic,this.imgDialogVisible=!0},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.table.page.currentPage=t,this.table.page.pageSize=a,this.handleQuery()},handleQuery:function(e){var t=this;this.table.loading=!0;var a={pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:e||this.deptId};Object(l["z"])(a).then((function(e){t.table.datas=e.rows,t.table.page.total=e.total,t.table.loading=!1}))}}},d=c,u=a("2877"),p=Object(u["a"])(d,n,r,!1,null,null,null);t["default"]=p.exports},"7da3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personnel_comp"},[a("el-row",[a("el-form",{ref:"ruleForm",attrs:{"label-width":"90px",inline:!0,model:e.formInline}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名",prop:"nickName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formInline.nickName,callback:function(t){e.$set(e.formInline,"nickName",t)},expression:"formInline.nickName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"电话号码",prop:"phonenumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.formInline.phonenumber,callback:function(t){e.$set(e.formInline,"phonenumber",t)},expression:"formInline.phonenumber"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同性质",prop:"personContract"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formInline.personContract,callback:function(t){e.$set(e.formInline,"personContract",t)},expression:"formInline.personContract"}},e._l(e.dict.type.person_contract,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"任职状态：",prop:"jobStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.jobStatus,callback:function(t){e.$set(e.formInline,"jobStatus",t)},expression:"formInline.jobStatus"}},e._l(e.optionsJobStatus,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","padding-right":"15px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleQuery(void 0)}}},[e._v("查询")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1),a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.setAdd}},[e._v("新增")]),a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleExport}},[e._v("导出")]),a("vxe-grid",{attrs:{"pager-config":e.table.page,border:"",resizable:"","auto-resize":"",height:"700",loading:e.table.loading,columns:e.columns,data:e.table.datas},on:{"page-change":e.handlePageChange},scopedSlots:e._u([{key:"sex",fn:function(t){var a=t.row;return[e._v(" "+e._s("0"==a.sex?"男":"女")+" ")]}},{key:"jobStatus",fn:function(t){var n=t.row;return[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[a("span",{staticStyle:{display:"inline-block",width:"10px",height:"10px","border-radius":"50%","margin-right":"4px"},style:{background:"1"==n.jobStatus?"#1ab74a":"#d01d1d"}}),a("span",[e._v(" "+e._s("1"==n.jobStatus?"在职":"离职")+" ")])])]}},{key:"operation",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDel(n)}}},[e._v("删除")])]}}])}),a("details-dialog",{ref:"details",attrs:{search:e.crow,show:e.isShowAdd},on:{notice:e.handleQuery,"update:show":function(t){e.isShowAdd=t}}})],1)},r=[],o=a("5530"),l=(a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("c5da")),i=function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-28e14964")]).then(a.bind(null,"2bf2"))},s={dicts:["person_contract"],components:{detailsDialog:i},props:["deptId"],watch:{deptId:{handler:function(e,t){this.handleQuery(e),this.crow.deptId=e},immediate:!0}},data:function(){return{table:{loading:!0,page:{currentPage:1,pageSize:10,pageSizes:[10,20,50],total:0},datas:[]},columns:[{title:"公司名称",field:"companyName",align:"center"},{title:"部门名称",field:"deptName",align:"center"},{title:"姓名",field:"nickName",align:"center"},{title:"性别",slots:{default:"sex"},align:"center"},{title:"电话号码",field:"phonenumber",align:"center"},{title:"合同性质",field:"personContractDesc",align:"center"},{title:"任职状态",slots:{default:"jobStatus"},align:"center"},{title:"备注",field:"remark",align:"center"},{title:"操作",slots:{default:"operation"},align:"center"}],isShowAdd:!1,crow:{},formInline:{nickName:void 0,phonenumber:void 0,personContract:void 0,jobStatus:void 0},optionsJobStatus:[{label:"在职",value:"1"},{label:"离职",value:"2"}]}},mounted:function(){},methods:{handleExport:function(){var e=Object(o["a"])(Object(o["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:this.deptId});this.download("/roadProducts/employee/export",Object(o["a"])({},e),"人员管理_".concat((new Date).getTime(),".xlsx"))},resetForm:function(e){this.$refs[e].resetFields()},setAdd:function(){var e=this;this.isShowAdd=!0,this.crow.deptId=this.deptId,this.$nextTick((function(){e.$refs.details.initData(e.crow),e.$refs.details.setUrl("add"),e.$refs.details.getUser(),e.$refs.details.resetForm("ruleForm")}))},handleDel:function(e){var t=this;this.$confirm("确定删除该条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])(e.id).then((function(e){200==e.code&&(t.$message({message:"成功!",type:"success"}),t.handleQuery())})).catch((function(e){}))})).catch((function(){}))},handleEdit:function(e){var t=this;this.crow.deptId=e.companyId,this.$nextTick((function(){t.$refs.details.initData(t.crow),t.$refs.details.getInfo(e.id),t.$refs.details.setUrl("edit")}))},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.table.page.currentPage=t,this.table.page.pageSize=a,this.handleQuery()},handleQuery:function(e){var t=this;this.table.loading=!0;var a=Object(o["a"])(Object(o["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:e||this.deptId});Object(l["i"])(a).then((function(e){e.rows.map((function(e){e.deptName=e.dept.deptName,e.remark=e.remark||e.dept.remark})),t.table.datas=e.rows,t.table.page.total=e.total,t.table.loading=!1}))}}},c=s,d=a("2877"),u=Object(d["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports},8461:function(e,t,a){},a0f4:function(e,t,a){"use strict";a("8461")},c0c7:function(e,t,a){"use strict";a.d(t,"j",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"m",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"k",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"n",(function(){return f})),a.d(t,"c",(function(){return h})),a.d(t,"o",(function(){return g})),a.d(t,"p",(function(){return b})),a.d(t,"f",(function(){return v})),a.d(t,"l",(function(){return y})),a.d(t,"e",(function(){return I}));var n=a("b775"),r=a("c38a");function o(e){return Object(n["a"])({url:"/system/user/list",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/system/user/"+Object(r["e"])(e),method:"get"})}function i(e){return Object(n["a"])({url:"/system/user",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/system/user",method:"put",data:e})}function c(e){return Object(n["a"])({url:"/system/user/"+e,method:"delete"})}function d(e){var t=e.pageSize,a=void 0===t?10:t;return Object(n["a"])({url:"system/post/list?pageNum=1&pageSize=".concat(a),method:"get"})}function u(e,t){var a={userId:e,password:t};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function p(e,t){var a={userId:e,status:t};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function m(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function f(e){return Object(n["a"])({url:"/system/user/profile",method:"put",data:e})}function h(){return Object(n["a"])({url:"/system/user/profile/checkUserPassword",method:"get"})}function g(e,t){var a={oldPassword:e,newPassword:t};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",params:a})}function b(e){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/system/user/authRole/"+e,method:"get"})}function y(e){return Object(n["a"])({url:"/system/user/authRole",method:"put",params:e})}function I(e){return Object(n["a"])({url:"/system/user/deptTree",method:"get",params:e})}},cd5d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dept_comp"},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleExport}},[e._v("导出")]),a("vxe-grid",{attrs:{"pager-config":e.table.page,border:"",resizable:"","auto-resize":"",height:"700",loading:e.table.loading,columns:e.columns,data:e.userList},on:{"page-change":e.handlePageChange}})],1)},r=[],o=a("5530"),l=a("fcb7"),i={props:["deptId"],watch:{deptId:{handler:function(e,t){this.handleQuery(e)},immediate:!0}},data:function(){return{userList:null,table:{loading:!0,page:{currentPage:1,pageSize:10,pageSizes:[10,20,50],total:0}},columns:[{title:"公司名称",field:"companyName",align:"center"},{title:"所辖路保队",field:"deptName",align:"center"},{title:"部门职能",field:"deptFunctions",align:"center"},{title:"负责人",field:"leader",align:"center"},{title:"电话",field:"phone",align:"center"},{title:"办公驻地",field:"location",align:"center"},{title:"辖区对应执法机构",field:"lawEnforcementAgency",align:"center"},{title:"辖区对应高速交警支队",field:"trafficControlAgency",align:"center"}]}},mounted:function(){},methods:{handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.table.page.currentPage=t,this.table.page.pageSize=a,this.handleQuery()},handleExport:function(){var e={pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:this.deptId};this.download("/roadProducts/dept/deptListExport",Object(o["a"])({},e),"部门管理_".concat((new Date).getTime(),".xlsx"))},handleQuery:function(e){var t=this;this.table.loading=!0;var a={pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize,ancestors:e||this.deptId};Object(l["f"])(a).then((function(e){t.userList=e.rows,t.table.page.total=e.total,t.table.loading=!1}))}}},s=i,c=a("2877"),d=Object(c["a"])(s,n,r,!1,null,null,null);t["default"]=d.exports},f623:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dept_management"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:5,xs:24}},[a("div",{staticClass:"head-container"},[a("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入部门名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),a("div",{staticClass:"head-container"},[a("el-tree",{ref:"tree",staticStyle:{height:"705px","overflow-y":"scroll"},attrs:{"default-expanded-keys":[102,101],data:e.deptOptionsTree,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"node-key":"id","highlight-current":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;t.data;return a("span",{staticClass:"slot-t-node"},[[a("span",{staticClass:"node_label"},[e._v(e._s(n.label))]),["交控集团","集团总部","集团"].includes(n.label)?e._e():a("span",{staticClass:"icon_list"},[a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(t){return t.stopPropagation(),e.addHandle(n.data)}}}),a("i",{staticClass:"el-icon-edit-outline",staticStyle:{margin:"0 5px"},on:{click:function(t){return t.stopPropagation(),e.editHandle(n.data)}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.delHandle(n.data)}}})])]],2)}}])})],1)]),a("el-col",{attrs:{span:19,xs:24}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"部门信息",name:"部门信息"}}),a("el-tab-pane",{attrs:{label:"管辖路段",name:"管辖路段"}}),a("el-tab-pane",{attrs:{label:"车辆管理",name:"车辆管理"}}),a("el-tab-pane",{attrs:{label:"人员管理",name:"人员管理"}}),a("el-tab-pane",{attrs:{label:"账号管理",name:"账号管理"}})],1),"部门信息"==e.activeName?a("deptComp",{ref:"dept_comp",attrs:{deptId:e.deptId}}):e._e(),"管辖路段"==e.activeName?a("roadComp",{attrs:{deptId:e.deptId}}):e._e(),"车辆管理"==e.activeName?a("vehicleComp",{attrs:{deptId:e.deptId}}):e._e(),"人员管理"==e.activeName?a("personnelComp",{attrs:{deptId:e.deptId}}):e._e(),"账号管理"==e.activeName?a("accountComp",{attrs:{deptId:e.deptId}}):e._e()],1)],1),a("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-row",[0!==e.form.parentId?a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级部门",prop:"parentId"}},[a("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"选择上级部门"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1):e._e()],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示排序",prop:"orderNum"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[a("el-input",{attrs:{placeholder:"请输入负责人",maxlength:"20"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"部门状态"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.dict.type.sys_normal_disable,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.dict.type.dept_type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"办公地点",prop:"type"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"more_item",attrs:{label:"辖区对应执法机构"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.lawEnforcementAgency,callback:function(t){e.$set(e.form,"lawEnforcementAgency",t)},expression:"form.lawEnforcementAgency"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"more_item",attrs:{label:"辖区对应高速交警机构"}},[a("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.trafficControlAgency,callback:function(t){e.$set(e.form,"trafficControlAgency",t)},expression:"form.trafficControlAgency"}})],1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"收款二维码：",prop:"payCode"}},[a("upload",{attrs:{filesList:e.filesList,objParams:{atmLimit:1}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],o=(a("4de4"),a("14d9"),a("b0c0"),a("d3b7"),a("fcb7")),l=a("2934"),i=a("c0c7"),s=a("cd5d"),c=a("7568"),d=a("7da3"),u=a("5bc1"),p=a("7724"),m=a("ca17"),f=a.n(m),h=(a("542c"),a("36fa")),g={dicts:["sys_normal_disable","dept_type"],components:{deptComp:s["default"],accountComp:c["default"],personnelComp:d["default"],roadComp:u["default"],vehicleComp:p["default"],Treeselect:f.a,upload:h["a"]},watch:{deptName:function(e){this.$refs.tree.filter(e)}},data:function(){return{deptId:void 0,activeName:"部门信息",deptName:"",deptOptionsTree:void 0,defaultProps:{children:"children",label:"label"},queryParams:{pageNum:1,pageSize:10,userName:void 0,nickName:void 0,phonenumber:void 0,status:void 0,deptId:void 0},form:{},filesList:[],title:"",open:!1,deptOptions:[],rules:{parentId:[{required:!0,message:"上级部门不能为空",trigger:"blur"}],deptName:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[]}}},mounted:function(){this.getDeptTree()},methods:{cancel:function(){this.open=!1,this.reset()},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.deptId?Object(o["h"])(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.$refs.dept_comp.handleQuery()})):Object(o["c"])(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.$refs.dept_comp.handleQuery()})))}))},_returnRes:function(e){this.form.payCode=e.fileUrl},_returnResDel:function(e){this.form.payCode="",this.filesList=[]},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.deptId,label:e.deptName,children:e.children}},reset:function(){for(var e in this.filesList=[],this.imgsList=[],this.form={deptId:void 0,parentId:void 0,deptName:void 0,orderNum:void 0,leader:void 0,phone:void 0,email:void 0,payCode:void 0,status:"0",location:void 0},this.form){if("status"==e)break;this.form[e]=void 0}},addHandle:function(e){var t=this;this.reset(),void 0!=e&&(this.form.parentId=e.id),this.open=!0,this.title="添加部门",Object(o["g"])().then((function(e){t.deptOptions=t.handleTree(e.data,"deptId")}))},editHandle:function(e){var t=this;this.reset(),Object(o["e"])(e.id).then((function(e){t.form=e.data,t.form.type=t.form.type+"",e.data.payCode&&(t.filesList=[{name:e.data.payCode,url:"/prod-api"+e.data.payCode,response:{data:{name:e.data.payCode,fileUrl:e.data.payCode,url:"/prod-api"+e.data.payCode}}}]),setTimeout((function(){t.open=!0})),t.title="修改部门",Object(l["i"])().then((function(e){if(e.data.deptId=e.data.deptId?String(e.data.deptId):"",t.deptOptions=t.handleTree(e.data,"deptId"),0==t.deptOptions.length){var a={deptId:t.form.parentId,deptName:t.form.parentName,children:[]};t.deptOptions.push(a)}}))}))},delHandle:function(e){var t=this;this.$modal.confirm('是否确认删除名称为"'+e.label+'"的数据项？').then((function(){return Object(o["d"])(e.id)})).then((function(){t.$refs.dept_comp.handleQuery(),t.getDeptTree(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleClick:function(e,t){this.activeName=e.name},getDeptTree:function(){var e=this;Object(i["e"])().then((function(t){e.deptOptionsTree=t.data}))},handleNodeClick:function(e){this.deptId=e.id},handleQuery:function(){var e=this;this.loading=!0,Object(i["j"])(this.addDateRange(this.queryParams)).then((function(t){e.userList=t.rows,e.table.total=t.total,e.loading=!1}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)}}},b=g,v=(a("6f43"),a("a0f4"),a("2877")),y=Object(v["a"])(b,n,r,!1,null,"4d6cb2b0",null);t["default"]=y.exports},fcb7:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"h",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a("b775");function r(e){return Object(n["a"])({url:"/system/dept/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/roadProducts/dept/deptList",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/dept/"+e,method:"get"})}function i(e){return Object(n["a"])({url:"/system/dept",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/system/dept",method:"put",data:e})}function c(e){return Object(n["a"])({url:"/system/dept/"+e,method:"delete"})}function d(e){return Object(n["a"])({url:"/system/user/deptTree?ancestors=".concat(e),method:"get"})}function u(e){return Object(n["a"])({url:"/system/user/deptTree?deptIdAndBelow=".concat(e||""),method:"get"})}}}]);