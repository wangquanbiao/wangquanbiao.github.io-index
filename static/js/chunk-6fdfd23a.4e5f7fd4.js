(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fdfd23a"],{"615d":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"com_details"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"160px"}},[r("div",{staticClass:"header"},[r("div",[r("p",[t._v("!")]),t._v(" 注意：全部材料必须上传，费用全部必填，否则审核可能不通过。 ")])]),r("div",{staticClass:"base"},[r("div",{staticClass:"title"},[t._v("材料上传")]),r("el-row",[r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("1")]),t._v(" 征求意见函 ")]),r("upload",{attrs:{keyId:t.fileKey[0],filesList:t.fileKey.doc[t.fileKey[0]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("2")]),t._v(" 立项依据 ")]),r("upload",{attrs:{keyId:t.fileKey[1],filesList:t.fileKey.doc[t.fileKey[1]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("3")]),t._v(" 申请人身份证明 ")]),r("upload",{attrs:{keyId:t.fileKey[2],filesList:t.fileKey.doc[t.fileKey[2]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("4")]),t._v(" 安全承诺书 ")]),r("upload",{attrs:{keyId:t.fileKey[3],filesList:t.fileKey.doc[t.fileKey[3]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("5")]),t._v(" 初步审核表 ")]),r("upload",{attrs:{keyId:t.fileKey[4],filesList:t.fileKey.doc[t.fileKey[4]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("6")]),t._v(" 涉路施工路产赔（补）偿协议 ")]),r("upload",{attrs:{keyId:t.fileKey[5],filesList:t.fileKey.doc[t.fileKey[5]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)])]),r("el-row",[r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("7")]),t._v(" 专家意见 ")]),r("upload",{attrs:{keyId:t.fileKey[6],filesList:t.fileKey.doc[t.fileKey[6]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("8")]),t._v(" 施工图设计 ")]),r("upload",{attrs:{keyId:t.fileKey[7],filesList:t.fileKey.doc[t.fileKey[7]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("9")]),t._v(" 施工方案 ")]),r("upload",{attrs:{keyId:t.fileKey[8],filesList:t.fileKey.doc[t.fileKey[8]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("10")]),t._v(" 设计方案 ")]),r("upload",{attrs:{keyId:t.fileKey[9],filesList:t.fileKey.doc[t.fileKey[9]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("11")]),t._v(" 应急预案 ")]),r("upload",{attrs:{keyId:t.fileKey[10],filesList:t.fileKey.doc[t.fileKey[10]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("12")]),t._v(" 安全技术评价报告 ")]),r("upload",{attrs:{keyId:t.fileKey[11],filesList:t.fileKey.doc[t.fileKey[11]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("13")]),t._v(" 涉路施工许可事项申请表 ")]),r("upload",{attrs:{keyId:t.fileKey[12],filesList:t.fileKey.doc[t.fileKey[12]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"})])])],1),r("div",{staticClass:"money"},[r("div",{staticClass:"title"},[t._v("费用明细(万元)")]),r("div",{staticClass:"money-container"},[r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"涉路施工协调服务费",prop:"servicesAmount"}},[r("el-input",{model:{value:t.ruleForm.servicesAmount,callback:function(e){t.$set(t.ruleForm,"servicesAmount",e)},expression:"ruleForm.servicesAmount"}})],1),r("el-form-item",{attrs:{label:"路产补偿费",prop:"compAmount"}},[r("el-input",{model:{value:t.ruleForm.compAmount,callback:function(e){t.$set(t.ruleForm,"compAmount",e)},expression:"ruleForm.compAmount"}})],1)],1),r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"公路资源占用补偿费",prop:"occupyCompAmount"}},[r("el-input",{model:{value:t.ruleForm.occupyCompAmount,callback:function(e){t.$set(t.ruleForm,"occupyCompAmount",e)},expression:"ruleForm.occupyCompAmount"}})],1),r("el-form-item",{attrs:{label:"通行费损失补偿",prop:"lossCompAmount"}},[r("el-input",{model:{value:t.ruleForm.lossCompAmount,callback:function(e){t.$set(t.ruleForm,"lossCompAmount",e)},expression:"ruleForm.lossCompAmount"}})],1)],1)])]),r("div",{staticClass:"doc"},[r("div",{staticClass:"title"},[t._v("其他附属文件上传")]),r("div",{staticClass:"doc-container"},[r("el-form-item",{attrs:{label:"附属文件上传",prop:"name"}},[r("upload",{attrs:{atmLimit:999,filesList:t.ruleForm.attachList},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)],1)]),r("div",{staticClass:"btn"},[r("el-button",{on:{click:function(e){return t.goBack("ruleForm")}}},[t._v("返回")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",0)}}},[t._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",3)}}},[t._v("提交审核")])],1)])],1)])},i=[],a=r("c7eb"),n=r("1da1"),o=(r("99af"),r("4de4"),r("d81d"),r("14d9"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("ba77")),u=function(){return Promise.all([r.e("chunk-commons"),r.e("chunk-738bf79d")]).then(r.bind(null,"4a77"))},l={components:{upload:u},data:function(){return{fileKey:{0:"yjh",1:"yj",2:"sfz",3:"cls",4:"shb",5:"pbcxy",6:"zxyj",7:"sgtsj",8:"sgfa",9:"sjfa",10:"yjya",11:"apbg",12:"xksx",doc:{yjh:[],yj:[],sfz:[],cls:[],shb:[],pbcxy:[],zxyj:[],sgtsj:[],sgfa:[],sjfa:[],yjya:[],apbg:[],xksx:[]}},ruleForm:{servicesAmount:"",compAmount:"",occupyCompAmount:"",lossCompAmount:"",businessId:this.$route.query.id,status:"",doc:{yjh:[],yj:[],sfz:[],cls:[],shb:[],pbcxy:[],zxyj:[],sgtsj:[],sgfa:[],sjfa:[],yjya:[],apbg:[],xksx:[]},attachList:[]},rules:{servicesAmount:[{required:!0,message:"请输入",trigger:"blur"}],compAmount:[{required:!0,message:"请输入",trigger:"blur"}],occupyCompAmount:[{required:!0,message:"请输入",trigger:"blur"}],lossCompAmount:[{required:!0,message:"请输入",trigger:"blur"}]}}},mounted:function(){this.$route.query.id&&this.getEditData()},methods:{getEditData:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var r,s,i,n;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])(t.$route.query.id);case 2:for(n in s=e.sent,t.ruleForm.compAmount=s.data.compAmount,t.ruleForm.lossCompAmount=s.data.lossCompAmount,t.ruleForm.occupyCompAmount=s.data.occupyCompAmount,t.ruleForm.servicesAmount=s.data.servicesAmount,(null===(r=s.data)||void 0===r||null===(r=r.attachList)||void 0===r?void 0:r.length)>0&&s.data.attachList.map((function(e){var r={attachId:e.id,name:e.fileName};t.ruleForm.attachList.push(r)})),i=s.data.doc,i)i[n].length>=1&&t.setFiles(i[n],n);case 10:case"end":return e.stop()}}),e)})))()},setFiles:function(t,e){for(var r=[],s=0;s<t.length;s++){var i={response:{data:{}}},a={};i.name=t[s].fileName,i.fileName=t[s].fileName,i.id=t[s].id,i.fileUrl=t[s].fileUrl,i.url="/prod-api"+t[s].fileUrl,i.response.data.fileUrl=t[s].fileUrl,i.response.data.url="/prod-api"+t[s].fileUrl,i.response.data.name=t[s].fileName,i.response.data.fileName=t[s].fileName,i.response.data.id=t[s].id,a.name=t[s].fileName,a.attachId=t[s].id,this.ruleForm.doc[e].push(a),r.push(i)}this.fileKey.doc[e]=r},submitForm:function(t,e){var r=this;this.$refs[t].validate(function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(s){var i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s){t.next=8;break}return r.ruleForm.status=e,t.next=4,Object(o["g"])(r.ruleForm);case 4:i=t.sent,200==i.code&&(r.$message.success("提交成功！"),r.$router.go(-1)),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},goBack:function(t){this.$refs[t].resetFields(),this.$router.go(-1)},_returnRes:function(t,e){var r=this,s={name:t.fileName,attachId:t.id};if(e){var i=this.ruleForm.doc[e].concat([s]);this.$nextTick((function(){r.$set(r.ruleForm.doc,e,i)}))}else this.ruleForm.attachList.push(s)},_returnResDel:function(t,e){var r={name:t.fileName||t.response.data.fileName,attachId:t.id||t.response.data.id};if(e){this.ruleForm.doc[e];this.ruleForm.doc[e]=this.ruleForm.doc[e].filter((function(t){return t.attachId!=r.attachId}))}else this.ruleForm.attachList.filter((function(t){return t.attachId==r.attachId}))}}},c=l,d=(r("948c"),r("2877")),m=Object(d["a"])(c,s,i,!1,null,"1fc0aefa",null);e["default"]=m.exports},"948c":function(t,e,r){"use strict";r("9536")},9536:function(t,e,r){},ba77:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"h",(function(){return u})),r.d(e,"k",(function(){return l})),r.d(e,"f",(function(){return c})),r.d(e,"c",(function(){return d})),r.d(e,"g",(function(){return m})),r.d(e,"q",(function(){return f})),r.d(e,"j",(function(){return p})),r.d(e,"p",(function(){return v})),r.d(e,"n",(function(){return y})),r.d(e,"o",(function(){return b})),r.d(e,"m",(function(){return h})),r.d(e,"l",(function(){return _})),r.d(e,"i",(function(){return C}));var s=r("b775");function i(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/stat",method:"post",data:t})}function a(t){return Object(s["a"])({url:"/statistics/sl/statTotalList",method:"post",data:t})}function n(t){return Object(s["a"])({url:"/statistics/sl/statCompanyByType",method:"post",data:t})}function o(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/list",method:"post",data:t})}function u(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/remove",method:"DELETE",data:t})}function l(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/save",method:"post",data:t})}function c(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/listHandle",method:"post",data:t})}function d(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/".concat(t),method:"get"})}function m(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/materialSubmit",method:"post",data:t})}function f(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/updateStatus",method:"post",data:t})}function p(t){return Object(s["a"])({url:"roadProducts/roadConstruct/reviewSubmit",method:"post",data:t})}function v(t){return Object(s["a"])({url:"/statistics/sl/total",method:"post",data:t})}function y(t){return Object(s["a"])({url:"/statistics/sl/companyStat",method:"post",data:t})}function b(t){return Object(s["a"])({url:"/statistics/sl/companyRank",method:"post",data:t})}function h(t){return Object(s["a"])({url:"/statistics/sl/statTypeRatio",method:"post",data:t})}function _(t){return Object(s["a"])({url:"/statistics/sl/statTypeCount",method:"post",data:t})}function C(t){return Object(s["a"])({url:"/roadProducts/roadConstruct/withdraw/".concat(t),method:"patch"})}}}]);