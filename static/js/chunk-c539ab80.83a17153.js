(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c539ab80"],{"3a3e":function(t,e,r){},"710e":function(t,e,r){"use strict";r("3a3e")},ba77:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return u})),r.d(e,"h",(function(){return i})),r.d(e,"k",(function(){return c})),r.d(e,"f",(function(){return l})),r.d(e,"c",(function(){return d})),r.d(e,"g",(function(){return m})),r.d(e,"q",(function(){return f})),r.d(e,"j",(function(){return p})),r.d(e,"p",(function(){return v})),r.d(e,"n",(function(){return b})),r.d(e,"o",(function(){return h})),r.d(e,"m",(function(){return y})),r.d(e,"l",(function(){return C})),r.d(e,"i",(function(){return g}));var o=r("b775");function s(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/stat",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/statistics/sl/statTotalList",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/statistics/sl/statCompanyByType",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/list",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/remove",method:"DELETE",data:t})}function c(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/save",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/listHandle",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/".concat(t),method:"get"})}function m(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/materialSubmit",method:"post",data:t})}function f(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/updateStatus",method:"post",data:t})}function p(t){return Object(o["a"])({url:"roadProducts/roadConstruct/reviewSubmit",method:"post",data:t})}function v(t){return Object(o["a"])({url:"/statistics/sl/total",method:"post",data:t})}function b(t){return Object(o["a"])({url:"/statistics/sl/companyStat",method:"post",data:t})}function h(t){return Object(o["a"])({url:"/statistics/sl/companyRank",method:"post",data:t})}function y(t){return Object(o["a"])({url:"/statistics/sl/statTypeRatio",method:"post",data:t})}function C(t){return Object(o["a"])({url:"/statistics/sl/statTypeCount",method:"post",data:t})}function g(t){return Object(o["a"])({url:"/roadProducts/roadConstruct/withdraw/".concat(t),method:"patch"})}},fbea:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"com_details"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"160px"}},[r("div",{staticClass:"header"},[r("div",[r("p",[t._v("!")]),t._v(" 注意：全部材料必须上传，费用全部必填，否则审核可能不通过。 ")])]),r("div",{staticClass:"base"},[r("div",{staticClass:"title"},[t._v("材料上传")]),r("el-row",[r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("1")]),t._v("涉路施工初步审核表 ")]),r("upload",{attrs:{keyId:t.fileKey[5],filesList:t.fileKey.doc[t.fileKey[5]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("2")]),t._v("施工方案 ")]),r("upload",{attrs:{keyId:t.fileKey[0],filesList:t.fileKey.doc[t.fileKey[0]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("3")]),t._v("应急预案 ")]),r("upload",{attrs:{keyId:t.fileKey[1],filesList:t.fileKey.doc[t.fileKey[1]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("4")]),t._v("安评报告 ")]),r("upload",{attrs:{keyId:t.fileKey[2],filesList:t.fileKey.doc[t.fileKey[2]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)]),r("div",{staticClass:"line-container"},[r("div",{staticClass:"bg-div"},[r("div",[r("p",[t._v("5")]),t._v("赔补偿协议 ")]),r("upload",{attrs:{keyId:t.fileKey[3],filesList:t.fileKey.doc[t.fileKey[3]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1),r("div",{staticClass:"bg-div bg"},[r("div",[r("p",[t._v("6")]),t._v("专家咨询意见 ")]),r("upload",{attrs:{keyId:t.fileKey[4],filesList:t.fileKey.doc[t.fileKey[4]]},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)])])],1),r("div",{staticClass:"money"},[r("div",{staticClass:"title"},[t._v("费用明细(万元)")]),r("div",{staticClass:"money-container"},[r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"涉路施工协调服务费",prop:"servicesAmount"}},[r("el-input",{model:{value:t.ruleForm.servicesAmount,callback:function(e){t.$set(t.ruleForm,"servicesAmount",e)},expression:"ruleForm.servicesAmount"}})],1),r("el-form-item",{attrs:{label:"路产补偿费",prop:"compAmount"}},[r("el-input",{model:{value:t.ruleForm.compAmount,callback:function(e){t.$set(t.ruleForm,"compAmount",e)},expression:"ruleForm.compAmount"}})],1)],1),r("div",{staticClass:"line"},[r("el-form-item",{attrs:{label:"公路资源占用补偿费",prop:"occupyCompAmount"}},[r("el-input",{model:{value:t.ruleForm.occupyCompAmount,callback:function(e){t.$set(t.ruleForm,"occupyCompAmount",e)},expression:"ruleForm.occupyCompAmount"}})],1),r("el-form-item",{attrs:{label:"通行费损失补偿",prop:"lossCompAmount"}},[r("el-input",{model:{value:t.ruleForm.lossCompAmount,callback:function(e){t.$set(t.ruleForm,"lossCompAmount",e)},expression:"ruleForm.lossCompAmount"}})],1)],1)])]),r("div",{staticClass:"doc"},[r("div",{staticClass:"title"},[t._v("其他附属文件上传")]),r("div",{staticClass:"doc-container"},[r("el-form-item",{attrs:{label:"附属文件上传",prop:"name"}},[r("upload",{attrs:{filesList:t.ruleForm.attachList},on:{returnRes:t._returnRes,returnResDel:t._returnResDel}})],1)],1)]),r("div",{staticClass:"btn"},[r("el-button",{on:{click:function(e){return t.goBack("ruleForm")}}},[t._v("返回")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",0)}}},[t._v("保存")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm",3)}}},[t._v("审核")])],1)])],1)])},s=[],a=r("c7eb"),n=r("1da1"),u=(r("99af"),r("14d9"),r("a434"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("ba77")),i=function(){return Promise.all([r.e("chunk-commons"),r.e("chunk-738bf79d")]).then(r.bind(null,"4a77"))},c={components:{upload:i},data:function(){return{fileKey:{0:"sgfa",1:"yjya",2:"apbg",3:"pbcxy",4:"zxyj",5:"shb",doc:{sgfa:[],yjya:[],apbg:[],pbcxy:[],zxyj:[],shb:[]}},ruleForm:{servicesAmount:"",compAmount:"",occupyCompAmount:"",lossCompAmount:"",businessId:this.$route.query.id,status:"",doc:{sgfa:[],yjya:[],apbg:[],pbcxy:[],zxyj:[],shb:[]},attachList:[]},rules:{servicesAmount:[{required:!0,message:"请输入",trigger:"blur"}],compAmount:[{required:!0,message:"请输入",trigger:"blur"}],occupyCompAmount:[{required:!0,message:"请输入",trigger:"blur"}],lossCompAmount:[{required:!0,message:"请输入",trigger:"blur"}]}}},mounted:function(){this.$route.query.id&&this.getEditData()},methods:{getEditData:function(){var t=this;return Object(n["a"])(Object(a["a"])().mark((function e(){var r,o,s,n,i,c,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["c"])(t.$route.query.id);case 2:for(l in o=e.sent,t.ruleForm.compAmount=o.data.compAmount,t.ruleForm.lossCompAmount=o.data.lossCompAmount,t.ruleForm.occupyCompAmount=o.data.occupyCompAmount,t.ruleForm.servicesAmount=o.data.servicesAmount,(null===(r=o.data)||void 0===r||null===(r=r.attachList)||void 0===r?void 0:r.length)>0&&(i={attachId:null===(s=o.data)||void 0===s||null===(s=s.attachList[0])||void 0===s?void 0:s.id,name:null===(n=o.data)||void 0===n||null===(n=n.attachList[0])||void 0===n?void 0:n.fileName},t.ruleForm.attachList=[i]),c=o.data.doc,c)c[l].length>=1&&t.setFiles(c[l],l);case 10:case"end":return e.stop()}}),e)})))()},setFiles:function(t,e){for(var r=[],o=0;o<t.length;o++){var s={response:{data:{}}},a={};s.name=t[o].fileName,s.fileName=t[o].fileName,s.id=t[o].id,s.fileUrl=t[o].fileUrl,s.url="/prod-api"+t[o].fileUrl,s.response.data.fileUrl=t[o].fileUrl,s.response.data.url="/prod-api"+t[o].fileUrl,s.response.data.name=t[o].fileName,s.response.data.fileName=t[o].fileName,s.response.data.id=t[o].id,a.name=t[o].fileName,a.attachId=t[o].id,this.ruleForm.doc[e].push(a),r.push(s)}this.fileKey.doc[e]=r},submitForm:function(t,e){var r=this;this.$refs[t].validate(function(){var t=Object(n["a"])(Object(a["a"])().mark((function t(o){var s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=8;break}return r.ruleForm.status=e,t.next=4,Object(u["g"])(r.ruleForm);case 4:s=t.sent,200==s.code&&(r.$message.success("提交成功！"),r.$router.go(-1)),t.next=9;break;case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},goBack:function(t){this.$refs[t].resetFields(),this.$router.go(-1)},_returnRes:function(t,e){var r=this,o={name:t.fileName,attachId:t.id};if(e){var s=this.ruleForm.doc[e].concat([o]);this.$nextTick((function(){r.$set(r.ruleForm.doc,e,s)}))}else this.ruleForm.attachList=[o]},_returnResDel:function(t,e){var r={name:t.fileName,attachId:t.id};if(e){for(var o=this.ruleForm.doc[e],s=0;s<o.length;s++)if(o[s].attachId==r.attachId){this.ruleForm.doc[e].splice(s,1);break}}else for(var a=this.ruleForm.attachList,n=0;n<a.length;n++)if(a[n].attachId==r.attachId){this.ruleForm.attachList.splice(n,1);break}}}},l=c,d=(r("710e"),r("2877")),m=Object(d["a"])(l,o,s,!1,null,"0f9e2104",null);e["default"]=m.exports}}]);