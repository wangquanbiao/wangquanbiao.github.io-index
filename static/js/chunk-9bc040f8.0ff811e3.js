(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9bc040f8"],{"3f63":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statistical-analysis"},[a("div",{staticClass:"params"},[a("el-form",{ref:"ruleForm",attrs:{model:t.formInline}},[a("el-row",[a("el-col",{attrs:{span:4}},[t.isPower?a("el-form-item",{attrs:{"label-width":"100px",label:"公司类型",prop:"orgType"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择公司"},on:{change:t.selectOrgType},model:{value:t.orgType,callback:function(e){t.orgType=e},expression:"orgType"}},t._l(t.companyTypeList,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1):t._e()],1),a("el-col",{attrs:{span:4}},[t.isPower?a("el-form-item",{attrs:{"label-width":"100px",label:"公司名称",prop:"companyId"}},[a("el-select",{attrs:{disabled:!t.companyTypeList,clearable:"",placeholder:"选择公司"},on:{change:t.selectCompany},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1):t._e()],1),a("el-col",{attrs:{span:4}},[t.isPower?t._e():a("el-form-item",{attrs:{"label-width":"100px",label:"公司名称",prop:"companyId"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择公司"},on:{change:t.selectCompany},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"100px",label:"所属部门：",prop:"orgId"}},[a("el-cascader",{key:t.cascaderKey,ref:"cascader",attrs:{disabled:!t.departmentalList,options:t.departmentalList,props:{value:"id"}},on:{change:t.handleChange}})],1)],1),a("el-col",{staticStyle:{"margin-left":"20px"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.searchFn(t.formInline)}}},[t._v("搜索")]),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.resetFrom}},[t._v("重置")])],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.personnelAgeVO&&(1==t.type||!t.type),expression:"personnelAgeVO && (type == 1 || !type)"}],staticClass:"card-list"},[a("ChartCard",{attrs:{title:"人员年龄统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"rynltjEcharts"}})]),a("ChartCard",{attrs:{title:"人员性别统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"ryxbtjEcharts"}})]),a("ChartCard",{attrs:{title:"人员角色统计"}},[a("div",{ref:"rygwtjEcharts",staticStyle:{height:"300px",width:"100%"},attrs:{id:"rygwtjEcharts"}})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.personnelAgeVO&&(2==t.type||!t.type),expression:"personnelAgeVO && (type == 2 || !type)"}],staticClass:"card-list"},[a("ChartCard",{attrs:{title:"车辆工作分类统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"clgzflEcharts"}})]),a("ChartCard",{attrs:{title:"车辆年限统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"clnxtjEcharts"}})]),a("ChartCard",{attrs:{title:"车辆使用状态统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"clsyztEcharts"}})]),a("ChartCard",{attrs:{title:"过去7日车辆行驶里程情况(km)"}},[a("div",{staticStyle:{"padding-right":"10px",height:"240px",width:"100%"},attrs:{id:"clxslcEcharts"}})]),a("ChartCard",{attrs:{title:"车辆总里程统计"}},[a("div",{staticStyle:{height:"240px",width:"100%"},attrs:{id:"clzlcEcharts"}})]),a("div",{staticClass:"card"})],1)])},n=[],r=a("c7eb"),s=a("1da1"),l=(a("d81d"),a("14d9"),a("b0c0"),a("2934")),c=a("68be"),o=a("b775");function h(t){return Object(o["a"])({url:"/orgManager/count/statistic",method:"POST",data:t})}var d=a("313e"),p={props:["type"],data:function(){return{isPower:!1,personnelAgeVO:"",rynltjEcharts:"",sexRatioVO:"",ryxbtjEcharts:"",vehicleRatioVOList:"",clgzflEcharts:"",vehicleStatusVOList:"",clsyztEcharts:"",vehicleMileageRangeVOList:"",clzlcEcharts:"",personRoleList:[],rygwtjEcharts:"",vehicleDateRangeVOList:"",clnxtjEcharts:"",vehicleSevenDayVOList:"",clxslcEcharts:"",department:"",depList:[],departmentalList:null,companyTypeList:null,cascaderKey:0,formInline:{orgId:"",companyId:""},orgType:""}},components:{ChartCard:c["a"]},created:function(){var t=this;this.getData().then((function(){t.initFn()})),this.getDptData()},mounted:function(){var t=this;this.$store.getters.userInfo.roles.map((function(e){("jtld"==e.roleKey||e.admin)&&(t.isPower=!0)})),this.isPower||Object(l["j"])().then((function(e){t.depList=e.data}))},methods:{resetFrom:function(){this.formInline={orgId:"",companyId:""},this.orgType="",this.departmentalList=[],this.cascaderKey=0},handleChange:function(t){this.formInline.orgId=t[t.length-1]},selectCompany:function(t){var e=this;this.cascaderKey++,this.departmentalList=[],this.formInline.orgId=null,Object(l["e"])(t).then((function(t){var a=t.data;e.departmentalList=a}))},searchFn:function(t){var e=this;this.getData(t).then((function(){e.initFn()}))},selectOrgType:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i,n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.formInline.companyId=null,e.formInline.orgId=null,e.$refs.cascader.checkedValue=[],a.next=5,Object(l["h"])({parentId:t,status:0});case 5:i=a.sent,n=i.data,e.depList=n;case 8:case"end":return a.stop()}}),a)})))()},getData:function(){var t=arguments,e=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i,n;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:{},a.next=3,h(i);case 3:n=a.sent,e.personnelAgeVO=n.data.personnelAgeVO,e.sexRatioVO=n.data.sexRatioVO,e.vehicleRatioVOList=n.data.vehicleRatioVOList,e.vehicleStatusVOList=n.data.vehicleStatusVOList,e.personRoleList=n.data.personRoleList,e.vehicleDateRangeVOList=n.data.vehicleDateRangeVOList,e.vehicleSevenDayVOList=n.data.vehicleSevenDayVOList,e.vehicleMileageRangeVOList=n.data.vehicleMileageRangeVOList;case 12:case"end":return a.stop()}}),a)})))()},initEchartFn:function(t,e,a,i,n,r){var s=this;if(this.$data[t]=d["init"](document.getElementById(t)),"bar"==a){var l=n?[{show:!0,type:"slider",start:0,end:30,height:3}]:"",c=r?{interval:0,rotate:30}:{interval:0};this.$nextTick((function(){return s.$data[t].setOption({tooltip:{trigger:"item"},grid:{left:"3%",right:"6%",bottom:"1%",containLabel:!0},xAxis:{data:i,axisLabel:c},dataZoom:l,yAxis:{},series:[{type:"bar",data:e,barWidth:"25%"}]}),!1}))}else"line"==a?this.$data[t].setOption({title:{},tooltip:{trigger:"axis"},legend:{data:["清障救援车辆","路网巡查车辆"]},grid:{left:"3%",right:"6%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:i,axisLabel:{interval:0,show:!0}},yAxis:{type:"value"},series:[{name:"清障救援车辆",type:"line",stack:"Total",data:e[0],lineStyle:{normal:{color:"#fbca45",width:4}}},{name:"路网巡查车辆",type:"line",stack:"Total",data:e[1],lineStyle:{normal:{color:"#e596e9",width:4}}}]}):a||this.$data[t].setOption({tooltip:{trigger:"item"},legend:{right:"100px",top:"70px",orient:"vertical",icon:"circle"},color:["#00A2FF","#FFDB5C","#FF9F7F","#fba5ff","#5470c6","pink"],series:[{type:"pie",radius:["40%","55%"],avoidLabelOverlap:!1,left:"-55%",label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:16,fontWeight:"bold"}},labelLine:{show:!1},data:e}]})},initFn:function(){var t=this,e=this.personnelAgeVO.map((function(t){return{value:t.data,name:t.name}}));this.initEchartFn("rynltjEcharts",e),this.initEchartFn("ryxbtjEcharts",[{value:this.sexRatioVO.maleCount,name:this.sexRatioVO.maleStr+" "+this.sexRatioVO.malePercentage+"%"},{value:this.sexRatioVO.femaleCount,name:this.sexRatioVO.femaleStr+" "+this.sexRatioVO.femalePercentage+"%"}]);var a=this.vehicleRatioVOList.map((function(t){return{value:t.vehicleCount,name:t.vehicleClass+" "+t.vehiclePercentage+"%"}}));this.initEchartFn("clgzflEcharts",a);var i=this.vehicleStatusVOList.map((function(t){return{value:t.count,name:t.status+" "+t.percentage+"%"}}));this.initEchartFn("clsyztEcharts",i);var n=[{value:0,name:"10万km以内"},{value:0,name:"10-20万km之间"},{value:0,name:"20-30万km之间"},{value:0,name:"30万km以上"}];n.map((function(e){t.vehicleMileageRangeVOList.map((function(t){e.name==t.mileageRange&&(e.value=t.vehicleCount,e.name=t.mileageRange+" "+t.percentage+"%")}))})),this.initEchartFn("clzlcEcharts",n);var r=[[],[]],s=this.vehicleSevenDayVOList.map((function(t){return r[0].push(t.vehicleQzCount),r[1].push(t.vehicleLwCount),t.dateStr}));this.initEchartFn("clxslcEcharts",r,"line",s);var l=[],c=this.personRoleList.map((function(t){return l.push(t.name),1*t.data}));this.initEchartFn("rygwtjEcharts",c,"bar",l,!1,!0);var o=[],h=this.vehicleDateRangeVOList.map((function(t){return o.push(t.dateRange),1*t.vehicleCount}));this.initEchartFn("clnxtjEcharts",h,"bar",o)},getDptData:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["h"])({parentId:100,status:0});case 2:a=e.sent,i=a.data,t.companyTypeList=i;case 5:case"end":return e.stop()}}),e)})))()}}},u=p,m=(a("97dc"),a("2877")),v=Object(m["a"])(u,i,n,!1,null,"3e12748a",null);e["default"]=v.exports},"97dc":function(t,e,a){"use strict";a("f1da")},f1da:function(t,e,a){}}]);