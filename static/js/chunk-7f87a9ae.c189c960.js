(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f87a9ae"],{"1bdb":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"duty_personnel"},[r("div",{staticClass:"query_param"},[r("el-form",{ref:"formInline",attrs:{model:e.formInline}},[r("el-row",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{label:"",prop:"companyId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择公司名称"},on:{change:e.companyChange},model:{value:e.formInline.companyId,callback:function(a){e.$set(e.formInline,"companyId",a)},expression:"formInline.companyId"}},e._l(e.depList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"orgId","label-width":"10px"}},[r("el-cascader",{key:e.cascaderKey,ref:"cascader",attrs:{placeholder:"请选择单位名称","popper-class":"cascader",options:e.DWList,props:{value:"id",checkStrictly:!0,emitPath:!1},"expand-trigger":"hover"},on:{change:e.deptChange},model:{value:e.formInline.orgId,callback:function(a){e.$set(e.formInline,"orgId",a)},expression:"formInline.orgId"}})],1),r("el-form-item",{attrs:{label:" ",prop:"qzlxType","label-width":"10px"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择清障类型"},model:{value:e.formInline.qzlxType,callback:function(a){e.$set(e.formInline,"qzlxType",a)},expression:"formInline.qzlxType"}},e._l(e.qzlxTypeList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"创建时间",prop:"","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"191px","margin-right":"8px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"开始日期"},model:{value:e.formInline.createBeginTime,callback:function(a){e.$set(e.formInline,"createBeginTime",a)},expression:"formInline.createBeginTime"}}),r("el-date-picker",{staticStyle:{width:"191px","margin-right":"8px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"结束日期"},model:{value:e.formInline.createEndTime,callback:function(a){e.$set(e.formInline,"createEndTime",a)},expression:"formInline.createEndTime"}})],1)],1),r("el-row",{staticStyle:{display:"flex"}},[r("el-form-item",{attrs:{label:" ",prop:"sectionId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择路段及路线"},model:{value:e.formInline.sectionId,callback:function(a){e.$set(e.formInline,"sectionId",a)},expression:"formInline.sectionId"}},e._l(e.roadList,(function(e,a){return r("el-option",{key:e.id+a,attrs:{label:e.roadDesc1,value:e.id}})})),1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"桩号区间",prop:"startLocationK","label-width":"90px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"公里"},model:{value:e.formInline.startLocationK,callback:function(a){e.$set(e.formInline,"startLocationK",a)},expression:"formInline.startLocationK"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"",prop:"startLocationM"}},[r("el-input",{attrs:{placeholder:"米"},model:{value:e.formInline.startLocationM,callback:function(a){e.$set(e.formInline,"startLocationM",a)},expression:"formInline.startLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1)],1)],1),r("el-col",{staticStyle:{margin:"0 15px 0 5px"},attrs:{span:4}},[r("el-form-item",{attrs:{label:"至",prop:"endLocationK","label-width":"22px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"公里"},model:{value:e.formInline.endLocationK,callback:function(a){e.$set(e.formInline,"endLocationK",a)},expression:"formInline.endLocationK"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"",prop:"endLocationM"}},[r("el-input",{attrs:{placeholder:"米"},model:{value:e.formInline.endLocationM,callback:function(a){e.$set(e.formInline,"endLocationM",a)},expression:"formInline.endLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1)],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")]),r("el-button",{on:{click:function(a){return e.resetForm("formInline")}}},[e._v("重置")])],1)],1)],1)],1),r("vxe-grid",{attrs:{stripe:"",border:"",resizable:"","auto-resize":"","max-height":"730",columns:e.columns,data:e.table.datas},scopedSlots:e._u([{key:"clearanceTypeDesc",fn:function(a){var t=a.row;return[r("div",{staticClass:"qzlx_type",class:"qzlx_type"+t.clearanceType},[e._v(e._s(t.clearanceTypeDesc))])]}},{key:"rescueVehicleList",fn:function(a){var t=a.row;return[e._v(" "+e._s(t.rescueVehicleList.length>0?t.rescueVehicleList.map((function(e){return e.rescuedWreckerNumber})).join(","):"")+" ")]}},{key:"operation",fn:function(a){var t=a.row;return[r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDetails(t)}}},[e._v("查看")]),r("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleProcessOrder(t)}}},[e._v("处理工单")])]}}])}),r("el-dialog",{staticClass:"process_orders_dialog",attrs:{visible:e.processOrdersDialog,size:"full",width:2==e.processOrdersData.rescueType?"40%":"50%",title:"处理工单",top:"20vh"},on:{"update:visible":function(a){e.processOrdersDialog=a}}},[r("el-form",{ref:"form",attrs:{model:e.processOrdersData,rules:e.rules,"label-width":"auto"}},[r("div",{staticClass:"section_title"},[e._v(e._s(e.processOrdersData.section))]),r("el-row",[r("div",{staticClass:"dialog_item"},[r("div",{staticClass:"left_item"},[r("div",{staticClass:"lable"},[r("svg",{staticClass:"icon",attrs:{t:"1710396584564",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2408",width:"14",height:"14"}},[r("path",{attrs:{d:"M512 254.5a27 27 0 0 0 27-27v-132a27 27 0 0 0-54 0v132a27 27 0 0 0 27 27zM641.2 289.08a27 27 0 0 0 36.88-9.88l66-114.28a27 27 0 1 0-46.77-27l-66 114.28a27 27 0 0 0 9.89 36.88zM896.83 290.68a27 27 0 0 0-36.88-9.88l-114.28 66a27 27 0 1 0 27 46.77l114.28-66a27 27 0 0 0 9.88-36.89zM345.92 279.2a27 27 0 0 0 46.77-27l-66-114.28a27 27 0 0 0-46.77 27zM251.34 393.54a27 27 0 1 0 27-46.77l-114.28-66a27 27 0 0 0-27 46.77zM790.75 754H745V554.85a231.22 231.22 0 0 0-68.29-164.58c-44.12-44.12-102.51-68.42-164.51-68.42a231.58 231.58 0 0 0-164.68 68.42C303.4 434.39 279 492.84 279 554.85V754h-45.75c-55.62 0-100.87 45.38-100.87 101s45.25 101 100.87 101h557.5c55.62 0 100.87-45.38 100.87-101s-45.25-101-100.87-101zM333 554.85c0-47.58 18.81-92.47 52.73-126.4a177.86 177.86 0 0 1 126.46-52.6c47.58 0 92.38 18.68 126.3 52.6A177.61 177.61 0 0 1 691 554.85V754H333zM790.75 902h-557.5a47 47 0 0 1 0-94h557.5a47 47 0 0 1 0 94z","p-id":"2409",fill:"#999999"}})]),r("span",[e._v("报警人：")])]),r("div",{staticClass:"item_content"},[e._v(" "+e._s(e.processOrdersData.callPolice)+" "+e._s(e.processOrdersData.callPolice&&e.processOrdersData.policePhone&&"-")+" "+e._s(e.processOrdersData.policePhone)+" ")])]),r("div",{staticClass:"right_item"},[r("div",{staticClass:"lable"},[e._v(" 故障车牌号： ")]),e.processOrdersData.rescueVehicleList&&e.processOrdersData.rescueVehicleList.length>0?r("div",{staticClass:"item_content"},[e._v(" "+e._s(e.processOrdersData.rescueVehicleList.map((function(e){return e.rescuedWreckerNumber})).join(","))+" ")]):e._e()])])]),r("el-row",[r("el-form-item",{attrs:{label:"是否有可用资源：",prop:"isAvailable"}},[r("el-radio",{attrs:{label:!0},model:{value:e.processOrdersData.isAvailable,callback:function(a){e.$set(e.processOrdersData,"isAvailable",a)},expression:"processOrdersData.isAvailable"}},[e._v("是")]),r("el-radio",{attrs:{label:!1},model:{value:e.processOrdersData.isAvailable,callback:function(a){e.$set(e.processOrdersData,"isAvailable",a)},expression:"processOrdersData.isAvailable"}},[e._v("否")])],1)],1),e.processOrdersData.isAvailable?e._e():r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"waiting_time",attrs:{label:"预计等待时间：",prop:"expectWaitTime"}},[r("el-input",{attrs:{placeholder:"请输入预计等待时间"},model:{value:e.processOrdersData.expectWaitTime,callback:function(a){e.$set(e.processOrdersData,"expectWaitTime",a)},expression:"processOrdersData.expectWaitTime"}})],1)],1)],1),e.processOrdersData.isAvailable?e._e():r("el-row",[r("el-form-item",{attrs:{label:"情况说明：",prop:"waitReason"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入情况说明"},model:{value:e.processOrdersData.waitReason,callback:function(a){e.$set(e.processOrdersData,"waitReason",a)},expression:"processOrdersData.waitReason"}})],1)],1),e.processOrdersData.isAvailable?r("el-row",[r("el-form-item",{attrs:{label:"救援形式：",prop:"rescueType"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.processOrdersData.rescueType,callback:function(a){e.$set(e.processOrdersData,"rescueType",a)},expression:"processOrdersData.rescueType"}},[e._v("自主救援")]),r("el-radio",{attrs:{label:"2"},model:{value:e.processOrdersData.rescueType,callback:function(a){e.$set(e.processOrdersData,"rescueType",a)},expression:"processOrdersData.rescueType"}},[e._v("社会救援")])],1)],1):e._e(),e.processOrdersData.isAvailable?r("el-row",[r("el-col",{attrs:{span:2==e.processOrdersData.rescueType?12:8}},[r("el-form-item",{attrs:{label:"签发人员：",prop:"signerId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择签发人"},model:{value:e.processOrdersData.signerId,callback:function(a){e.$set(e.processOrdersData,"signerId",a)},expression:"processOrdersData.signerId"}},e._l(e.qfrList,(function(e){return r("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1)],1),2==e.processOrdersData.rescueType?r("el-col",{attrs:{span:2==e.processOrdersData.rescueType?12:8}},[r("el-form-item",{attrs:{label:"清障人员：",prop:"clearanceResourceList.0.personnelIds",rules:{required:!0,message:"清障人员不能为空",trigger:"change"}}},[r("el-select",{ref:"selectLabel",attrs:{multiple:"",clearable:"",placeholder:"请选择清障人员"},on:{change:function(a){return e.personnelIdsChange(a,0)}},model:{value:e.processOrdersData.clearanceResourceList[0].personnelIds,callback:function(a){e.$set(e.processOrdersData.clearanceResourceList[0],"personnelIds",a)},expression:"processOrdersData.clearanceResourceList[0].personnelIds"}},e._l(e.qzryList,(function(e){return r("el-option",{key:e.userId,attrs:{disabled:e.disabled,label:e.nickName,value:e.userId}})})),1)],1)],1):e._e()],1):e._e(),2==e.processOrdersData.rescueType&&e.processOrdersData.isAvailable?r("el-row",[r("el-col",{attrs:{span:2==e.processOrdersData.rescueType?12:8}},[r("el-form-item",{attrs:{label:"联系方式：",prop:"thirdPartyOrgPhone"}},[r("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.processOrdersData.thirdPartyOrgPhone,callback:function(a){e.$set(e.processOrdersData,"thirdPartyOrgPhone",a)},expression:"processOrdersData.thirdPartyOrgPhone"}})],1)],1),r("el-col",{attrs:{span:2==e.processOrdersData.rescueType?12:8}},[r("el-form-item",{attrs:{label:"清障机构：",prop:"thirdPartyOrgName"}},[r("el-input",{attrs:{placeholder:"请输入清障机构"},model:{value:e.processOrdersData.thirdPartyOrgName,callback:function(a){e.$set(e.processOrdersData,"thirdPartyOrgName",a)},expression:"processOrdersData.thirdPartyOrgName"}})],1)],1)],1):e._e(),e.processOrdersData.isAvailable?r("div",e._l(e.processOrdersData.clearanceResourceList,(function(a,t){return r("el-row",{key:t,staticStyle:{position:"relative"}},[r("el-col",{attrs:{span:2==e.processOrdersData.rescueType?12:8}},[r("el-form-item",{attrs:{label:"清障车辆：",prop:"clearanceResourceList."+t+".clearanceVehicle",rules:{required:!0,message:"清障车辆不能为空",trigger:"change"}}},[1==e.processOrdersData.rescueType?r("el-select",{attrs:{placeholder:"请选择"},model:{value:a.clearanceVehicle,callback:function(t){e.$set(a,"clearanceVehicle",t)},expression:"t.clearanceVehicle"}},e._l(e.cllist,(function(e,a){return r("el-option",{key:a,attrs:{label:e.vehicleNo,value:e.vehicleNo}})})),1):e._e(),2==e.processOrdersData.rescueType?r("el-input",{attrs:{placeholder:"请输入清障车辆"},model:{value:a.clearanceVehicle,callback:function(t){e.$set(a,"clearanceVehicle",t)},expression:"t.clearanceVehicle"}}):e._e()],1)],1),2==e.processOrdersData.rescueType?r("el-col",{attrs:{span:2}},[r("div",{staticClass:"clearance_resource_list_btns2"},[0==t?r("div",{staticClass:"btn",on:{click:e.addClearanceResourceList}},[e._v("+")]):r("div",{staticClass:"btn btn2",on:{click:function(a){return e.delClearanceResourceList(t)}}},[e._v("-")])])]):e._e(),1==e.processOrdersData.rescueType?r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"清障司机：",prop:"clearanceResourceList."+t+".clearanceDriverId",rules:{required:!0,message:"清障司机不能为空",trigger:"change"}}},[r("el-select",{ref:"selectLabel",refInFor:!0,attrs:{clearable:"",placeholder:"请选择清障司机"},on:{change:function(a){return e.clearanceDriverIdChange(a,t)}},model:{value:a.clearanceDriverId,callback:function(t){e.$set(a,"clearanceDriverId",t)},expression:"t.clearanceDriverId"}},e._l(e.qzryList,(function(e){return r("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1)],1):e._e(),1==e.processOrdersData.rescueType?r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"清障人员：",prop:"clearanceResourceList."+t+".personnelIds",rules:{required:!0,message:"清障人员不能为空",trigger:"change"}}},[r("el-select",{ref:"selectLabel",refInFor:!0,attrs:{multiple:"",clearable:"",placeholder:"请选择清障人员"},on:{change:function(a){return e.personnelIdsChange(a,t)}},model:{value:a.personnelIds,callback:function(t){e.$set(a,"personnelIds",t)},expression:"t.personnelIds"}},e._l(e.qzryList,(function(e){return r("el-option",{key:e.userId,attrs:{disabled:e.disabled,label:e.nickName,value:e.userId}})})),1)],1)],1):e._e(),1==e.processOrdersData.rescueType?r("div",{staticClass:"clearance_resource_list_btns"},[0==t?r("div",{staticClass:"btn",on:{click:e.addClearanceResourceList}},[e._v("+")]):r("div",{staticClass:"btn btn2",on:{click:function(a){return e.delClearanceResourceList(t)}}},[e._v("-")])]):e._e()],1)})),1):e._e(),r("div",{staticClass:"dialog_footer",staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"35px"}},[r("el-button",{on:{click:function(a){e.processOrdersDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.openCancelOrdersDialog}},[e._v("取消工单")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("签 发")])],1)],1)],1),r("el-dialog",{staticClass:"process_orders_dialog",attrs:{visible:e.cancelOrdersDialog,size:"full",width:"30%",title:"取消工单",top:"20vh"},on:{"update:visible":function(a){e.cancelOrdersDialog=a}}},[r("el-form",{ref:"cancelOrders",attrs:{model:e.cancelOrdersData,"label-width":"auto"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"工单编号：",prop:""}},[e._v(" "+e._s(e.cancelOrdersData.workNumber)+" ")])],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"情况说明：",prop:"reason",rules:{required:!0,message:"情况说明不能为空",trigger:"blur"}}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入情况说明"},model:{value:e.cancelOrdersData.reason,callback:function(a){e.$set(e.cancelOrdersData,"reason",a)},expression:"cancelOrdersData.reason"}})],1)],1)],1)],1),r("div",{staticClass:"dialog_footer",staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"35px"}},[r("el-button",{on:{click:function(a){e.cancelOrdersDialog=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.cancelOrders}},[e._v("确 定")])],1)],1),r("el-dialog",{staticClass:"process_orders_dialog",attrs:{visible:e.detailsDialog,size:"full",width:"40%",title:"工单详情页",top:"20vh"},on:{"update:visible":function(a){e.detailsDialog=a}}},[r("el-form",{ref:"detailsDialog",attrs:{model:e.detailsDialogData,"label-width":"auto"}},[r("div",{staticClass:"details_dialog_head"},[r("img",{attrs:{src:t("a3aa"),alt:""}}),r("div",{staticClass:"work_order_num"},[e._v(" 工单编号："+e._s(e.detailsDialogData.workNumber)+" ")]),r("div",{staticClass:"status_text",class:"status_text"+e.detailsDialogData.status},[e._v(" "+e._s(e.detailsDialogData.statusName)+" ")])]),r("div",{staticClass:"info"},[r("div",{staticClass:"work_info"},[r("div",{staticClass:"item"},[e._v(" 信息来源："+e._s(e.detailsDialogData.sourceValue)+" ")]),r("div",{staticClass:"item"},[e._v(" 单位名称："+e._s(e.detailsDialogData.company)+" ")]),r("div",{staticClass:"item"},[e._v(" 创建时间："+e._s(e.detailsDialogData.createTime)+" ")])]),r("div",{staticClass:"details_info"},[r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障位置：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.section)+" k"+e._s(e.detailsDialogData.locationKm)+"+"+e._s(e.detailsDialogData.locationM)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障类型： ")]),r("span",{staticStyle:{"font-size":"12px",display:"inline-block","text-align":"center",color:"#eee",transform:"skew(-20deg)","background-color":"#222",padding:"0px 8px"}},[e._v(" "+e._s(e.detailsDialogData.clearanceTypeDesc)+" ")])])],1),r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 报警人信息：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.callPolice)+"-"+e._s(e.detailsDialogData.policePhone)+" ")])]),0!=e.detailsDialogData.status?r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 预计等待时间：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.expectWaitTime)+" ")])]):r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障形式：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.rescueTypeDesc)+" ")])])],1),0==e.detailsDialogData.status&&1==e.detailsDialogData.rescueType?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障机构：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.thirdPartyOrgName)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 联系方式：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.thirdPartyOrgPhone)+" ")])])],1):e._e(),0==e.detailsDialogData.status?r("el-row",e._l(e.detailsDialogData.clearanceVehicleList,(function(a){return r("el-row",{key:a.id,staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障人员：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(a.clearancePersonList.length>0?a.clearancePersonList.map((function(e){return e.name})).join(","):"")+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障车号：")]),r("span",{staticStyle:{background:"#F2F2FD","border-radius":"2px 2px 2px 2px",color:"#2F7EF5",padding:"3px 6px"}},[e._v(" "+e._s(a.licensePlate)+" ")])]),1==e.detailsDialogData.rescueType?r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:4}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障司机：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(a.driverName)+" ")])]):e._e()],1)})),1):e._e(),11==e.detailsDialogData.status?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 情况说明：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.waitReason)+" ")])])],1):e._e(),r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 事件描述：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.note)+" ")])])],1),8==e.detailsDialogData.status?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 取消原因：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.cancelReason)+" ")])])],1):e._e()],1),r("div",{staticClass:"rescue_Vehicle_info"},[r("div",{staticClass:"title"},[e._v(" 被救援车辆信息 ")]),e._l(e.detailsDialogData.rescueVehicleList,(function(a){return r("el-row",{key:a.id,staticStyle:{margin:"15px 0"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援人员姓名：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(a.rescuedName)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援人员电话：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(a.rescuedPhone)+" ")])]),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援车牌号：")]),r("span",{staticStyle:{background:"#F2F2FD","border-radius":"2px 2px 2px 2px",color:"#2F7EF5",padding:"3px 6px"}},[e._v(" "+e._s(a.rescuedWreckerNumber)+" ")])])],1)}))],2)])]),r("div",{staticClass:"dialog_footer",staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"35px"}},[r("el-button",{on:{click:function(a){e.detailsDialog=!1}}},[e._v("关闭")])],1)],1)],1)},s=[],l=t("5530"),i=t("c7eb"),c=t("1da1"),o=t("ade3"),n=(t("4de4"),t("c740"),t("caad"),t("d81d"),t("14d9"),t("d3b7"),t("2532"),t("b775"));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/roadProducts/clearanceRescue/workOrderList",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/roadProducts/clearanceRescue/availableResource",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/roadProducts/clearanceRescue/workOrderCancel",method:"PATCH",data:e})}var m=t("2934"),v={watch:{"processOrdersData.rescueType":{handler:function(e,a){this.processOrdersData.clearanceResourceList=[{clearanceVehicle:void 0,clearanceDriverId:void 0,clearanceDriver:void 0,personnelIds:[],clearancePersonList:{userId:void 0,name:void 0,phone:void 0}}],this.qzryList.map((function(e){e.disabled=!1}))},deep:!0},"processOrdersData.isAvailable":{handler:function(e,a){this.processOrdersData.clearanceResourceList=[{clearanceVehicle:void 0,clearanceDriverId:void 0,clearanceDriver:void 0,personnelIds:[],clearancePersonList:{userId:void 0,name:void 0,phone:void 0}}],this.processOrdersData.signerId=void 0,this.processOrdersData.thirdPartyOrgPhone=void 0,this.processOrdersData.thirdPartyOrgName=void 0,this.processOrdersData.expectWaitTime="",this.processOrdersData.waitReason="",this.processOrdersData.rescueType="1",this.qzryList.map((function(e){e.disabled=!1}))},deep:!0}},data:function(){return{table:{loading:!1,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{title:"公司名称",field:"company",align:"center",width:200},{title:"部门名称",field:"orgDesc",align:"center",width:200},{title:"清障类型",slots:{default:"clearanceTypeDesc"},align:"center",width:130},{title:"路线+路段",field:"section",align:"center"},{title:"被救援车辆信息",slots:{default:"rescueVehicleList"},align:"center"},{title:"事件描述",field:"note",align:"center"},{title:"创建时间",field:"createTime",align:"center",width:150},{title:"操作",slots:{default:"operation"},align:"center",width:160}],qzlxTypeList:[{label:"未选择类型",id:0},{label:"事故",id:1},{label:"故障",id:2},{label:"其他",id:3}],roadList:[],depList:[],DWList:[],cascaderKey:0,formInline:{companyId:void 0,orgId:void 0,qzlxType:void 0,createBeginTime:void 0,createEndTime:void 0,sectionId:void 0},qfrList:[],qzryList:[],cllist:[],processOrdersDialog:!1,processOrdersData:Object(o["a"])({id:void 0,section:void 0,signerId:void 0,wreckerNumber:void 0,isAvailable:!0,rescueType:"1",expectWaitTime:"",waitReason:"",thirdPartyOrgPhone:void 0,thirdPartyOrgName:void 0,clearanceResourceList:[{clearanceVehicle:void 0,clearanceDriverId:void 0,clearanceDriver:void 0,personnelIds:[],clearancePersonList:{userId:void 0,name:void 0,phone:void 0}}],orgId:void 0,companyId:void 0,callPolice:void 0,policePhone:void 0},"wreckerNumber",void 0),personnelIdsList:[],isShow:!1,cancelOrdersDialog:!1,cancelOrdersData:{id:void 0,reason:void 0,workNumber:void 0},detailsDialog:!1,detailsDialogData:{},rules:{isAvailable:[{required:!0,message:"请选择是否有可用资源",trigger:"change"}],rescueType:[{required:!0,message:"请选择救援形式",trigger:"change"}],signerId:[{required:!0,message:"请选择签发人员",trigger:"change"}],clearanceResourceList:{clearanceVehicle:[{required:!0,message:"请选择清障车辆",trigger:"blur"}],clearanceDriverId:[{required:!0,message:"请选择清障司机",trigger:"blur"}]},thirdPartyOrgPhone:[{required:!0,message:"请输入联系方式",trigger:"blur"}],thirdPartyOrgName:[{required:!0,message:"请输入清障机构",trigger:"blur"}],expectWaitTime:[{required:!0,message:"请输入联系方式",trigger:"blur"}]}}},mounted:function(){this.getData(),this.getDptData()},methods:{resetForm:function(e){this.$refs[e].resetFields(),this.depList=[],this.roadList=[],this.getData()},deptChange:function(e){var a=this;e&&Object(m["l"])({orgId:e}).then((function(e){a.roadList=e.rows})),this.$refs.cascader&&(this.$refs.cascader.dropDownVisible=!1)},companyChange:function(e){var a=this;return Object(c["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return a.formInline.companyId=void 0,a.formInline.orgId=void 0,a.DWList=[],t.abrupt("return");case 5:return t.next=7,Object(m["g"])({ancestors:e,isFilter:!0});case 7:r=t.sent,a.cascaderKey++,a.DWList=r.data;case 10:case"end":return t.stop()}}),t)})))()},getDptData:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var t;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(m["j"])();case 2:t=a.sent,e.depList=t.data;case 4:case"end":return a.stop()}}),a)})))()},openCancelOrdersDialog:function(){this.processOrdersDialog=!1,this.cancelOrdersDialog=!0,this.cancelOrdersData.reason=void 0},cancelOrders:function(){var e=this,a=Object(l["a"])({},this.cancelOrdersData);delete a.workNumber,u(a).then((function(a){200==a.code&&(e.$message.success("取消成功"),e.cancelOrdersDialog=!1,e.getData())}))},clearanceDriverIdChange:function(e,a){var t=this;e&&this.qzryList.map((function(r){r.userId==e&&(t.processOrdersData.clearanceResourceList[a].clearanceDriver=r.nickName)}))},personnelIdsChange:function(e,a){var t=this;this.processOrdersData.clearanceResourceList[a].clearancePersonList=[],e&&(this.qzryList.map((function(r){if(r.disabled=!1,e.includes(r.userId)){var s={userId:r.userId,name:r.nickName,phone:r.phonenumber};t.processOrdersData.clearanceResourceList[a].clearancePersonList.push(s)}})),this.processOrdersData.clearanceResourceList.map((function(e){e.personnelIds.map((function(e){var a=t.qzryList.findIndex((function(a){return a.userId==e}));-1!=a&&(t.qzryList[a].disabled=!0)}))})))},submit:function(){var e=this;this.$refs["form"].validate((function(a){if(a){var t=Object(l["a"])({},e.processOrdersData);delete t.orgId,delete t.companyId,delete t.policePhone,delete t.wreckerNumber,delete t.section,delete t.callPolice,t.clearanceResourceList.map((function(e){delete e.personnelIds})),2==e.processOrdersData.rescueType&&e.processOrdersData.clearanceResourceList.map((function(a){a.clearancePersonList=e.processOrdersData.clearanceResourceList[0].clearancePersonList})),p(t).then((function(a){200==a.code&&(e.$message.success("签发成功"),e.processOrdersDialog=!1,e.getData(),e.reset())}))}}))},delClearanceResourceList:function(e){this.processOrdersData.clearanceResourceList=this.processOrdersData.clearanceResourceList.filter((function(a,t){return t!=e}))},addClearanceResourceList:function(){this.processOrdersData.clearanceResourceList.push({clearanceVehicle:void 0,clearanceDriverId:void 0,clearanceDriver:void 0,personnelIds:[],clearancePersonList:{userId:void 0,name:void 0,phone:void 0}})},reset:function(){this.processOrdersData=Object(o["a"])(Object(o["a"])(Object(o["a"])({id:void 0,signerId:void 0,section:void 0,callPolice:void 0,wreckerNumber:void 0,isAvailable:!0,rescueType:"1",expectWaitTime:"",waitReason:"",thirdPartyOrgPhone:void 0,thirdPartyOrgName:void 0,clearanceResourceList:[{clearanceVehicle:void 0,clearanceDriverId:void 0,clearanceDriver:void 0,personnelIds:[],clearancePersonList:{userId:void 0,name:void 0,phone:void 0}}],orgId:void 0,companyId:void 0},"callPolice",void 0),"policePhone",void 0),"wreckerNumber",void 0)},getList:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var t,r,s,l;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.$store.getters.userInfo,a.next=3,Object(m["q"])({pageNum:1,pageSize:100,secondDeptId:t.dept.deptId,isFilter:!1});case 3:return r=a.sent,s=r.rows,e.qfrList=s,a.next=8,Object(m["v"])(e.processOrdersData.orgId);case 8:l=a.sent,e.qzryList=null===l||void 0===l?void 0:l.data.users.map((function(e){return e.disabled=!1,e})),e.cllist=null===l||void 0===l?void 0:l.data.vehicles.filter((function(e){return e.vehicleNo}));case 11:case"end":return a.stop()}}),a)})))()},handleProcessOrder:function(e){for(var a in this.reset(),this.processOrdersData)e[a]&&a in this.processOrdersData&&(this.processOrdersData[a]=e[a]);this.processOrdersData.rescueVehicleList=e.rescueVehicleList,this.cancelOrdersData.workNumber=e.workNumber,this.cancelOrdersData.id=e.id,this.getList(),this.processOrdersDialog=!0},handleDetails:function(e){this.detailsDialogData=e,this.detailsDialog=!0},getData:function(){var e=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var t;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d(e.formInline);case 2:t=a.sent,{sourceBusinessId:"9a3c3de958bf4ac585430361d110f7bb",sourceId:1,incomingCallDate:"2024-03-14 16:25",callPolice:"测试报警人",clearanceType:"3",clearanceTypeDesc:"其他",policePhone:"17302531429",note:"测试事件描述",record:"注意携带千斤顶设备",roadSectionType:1,sectionId:"1",section:"G5京昆高速罗祁段",interflowDesc:"21",linkDesc:"",rampCode:"C",direction:"测试方向",locationKm:20,locationM:0,status:11,statusName:"测试",rescueList:[{orgId:10004,orgDesc:"一中队"}],rescueVehicleList:[{rescuedName:"测试",rescuedPhone:"17302531429",qzLx:"",vehicleType:1,rescuedWreckerNumber:"苏A9221"}]},e.table.datas=t.rows;case 5:case"end":return a.stop()}}),a)})))()}}},f=v,g=(t("8e60"),t("5268"),t("2877")),h=Object(g["a"])(f,r,s,!1,null,"70aa2019",null);a["default"]=h.exports},5268:function(e,a,t){"use strict";t("dcda")},"8e60":function(e,a,t){"use strict";t("ad20")},a3aa:function(e,a){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gAXR2VuZXJhdGVkIGJ5IFNuaXBhc3Rl/9sAhAAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47AQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAqAC4DAREAAhEBAxEB/8QBogAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLEAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+foBAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKCxEAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD2VmCqWYgAdzUykoq7eg0m9ERi5hOcSKTjOAaxWJovaVyvZz6or/2ta+r/APfNcX9rYbz+42+q1CSG+gmDFWIC4yWGK6KOOo1U3F6LuROjONkyVJ4pDhJFY+gNbwr05u0ZXM3CS1aJK2JKmp/8eEn4fzFedmf+6y+X5o6MN/FRjW0qwzh2BIwQce4xXzGGqxpVVKW2v4qx6NSLlGyJM2X92X862vg+zJtV8hWmt1t5I4lfL45Y+hpyrUI0ZQpp3lbfyYlCbmpS6C6Z/wAf8f4/yNPLP96j8/yYsT/CZvV9geUVNT/48JPw/mK87M/91l8vzR0Yb+KjFgjEsyozBQe57V8rQpqpUUG7XPSnJxjdFz+zYf8An6WvV/s2j/z9RzfWJ/yjJ7GKKFnW4ViOw71jXwNOnTc1UTaLhWlKVnEbpn/H/H+P8jWeWf71H5/kx4n+Ezer7A8oqan/AMeEn4fzFedmf+6y+X5o6MN/FRiQoskqoz7Ae57V8rRpxqVFGTsj05ycY3SLn2C3/wCfta9P6hQ/5+o5vbz/AJRk1nDHEzrcK5HYd6xrYOlTpuUal2XCrKUrOImmf8f8f4/yNTln+9R+f5MMT/CZvV9geUQXsLT2rxpjccYz9a5MbRlWoShHd/5mtGahNSZlf2Tdeif99V89/ZOJ8vvO/wCtUw/sm69E/wC+qP7JxPl94fWqYf2Tdeif99Uf2TifL7w+tUyey0+eC6WSTbtXPQ+1dmBy+tRrqc7WV/yMa1eE4OKNWvoDhCgAoAKACgAoAKAP/9k="},ad20:function(e,a,t){},dcda:function(e,a,t){}}]);