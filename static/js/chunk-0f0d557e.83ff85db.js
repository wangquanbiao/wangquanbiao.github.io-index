(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f0d557e"],{"0a0a":function(e,t,r){},"236f":function(e,t,r){"use strict";r("0a0a")},"2bf2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("el-dialog",{attrs:{title:"人员信息",visible:e.isShow,isShow:e.show,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.isShow=t},close:function(t){e.$emit("update:show",!1)}}},[r("div",{staticClass:"radio-group-box",staticStyle:{"text-align":"center","margin-bottom":"40px"}},[r("el-radio-group",{model:{value:e.radioGroup,callback:function(t){e.radioGroup=t},expression:"radioGroup"}})],1),"form1"==e.radioGroup?r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"用户姓名：",prop:"nickName"}},[r("el-input",{attrs:{maxlength:"30",placeholder:"请输入"},model:{value:e.ruleForm.nickName,callback:function(t){e.$set(e.ruleForm,"nickName",t)},expression:"ruleForm.nickName"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{label:"电子邮箱：",prop:"email"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.genderList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"联系电话：",prop:"phonenumber"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.phonenumber,callback:function(t){e.$set(e.ruleForm,"phonenumber",t)},expression:"ruleForm.phonenumber"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"所属部门：",prop:"orgId"}},[r("el-cascader",{key:e.cascaderKey,ref:"cascader",attrs:{clearable:"","popper-class":"org_cascader",options:e.DWList,props:{value:"id",checkStrictly:!0,emitPath:!1},"expand-trigger":"hover"},on:{change:e.handleChange},model:{value:e.ruleForm.orgId,callback:function(t){e.$set(e.ruleForm,"orgId",t)},expression:"ruleForm.orgId"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"任职状态：",prop:"jobStatus"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.jobStatus,callback:function(t){e.$set(e.ruleForm,"jobStatus",t)},expression:"ruleForm.jobStatus"}},e._l(e.optionsJobStatus,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-row"),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"籍贯：",prop:"nativePlace"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.nativePlace,callback:function(t){e.$set(e.ruleForm,"nativePlace",t)},expression:"ruleForm.nativePlace"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"进入本企时间：",prop:"joinUsTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.ruleForm.joinUsTime,callback:function(t){e.$set(e.ruleForm,"joinUsTime",t)},expression:"ruleForm.joinUsTime"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"参加工作时间：",prop:"startWorkTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.ruleForm.startWorkTime,callback:function(t){e.$set(e.ruleForm,"startWorkTime",t)},expression:"ruleForm.startWorkTime"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"政治面貌：",prop:"politicalStatus"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.politicalStatus,callback:function(t){e.$set(e.ruleForm,"politicalStatus",t)},expression:"ruleForm.politicalStatus"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"岗位:",prop:"postIds"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择岗位"},model:{value:e.ruleForm.postIds,callback:function(t){e.$set(e.ruleForm,"postIds",t)},expression:"ruleForm.postIds"}},e._l(e.postOptions,(function(e){return r("el-option",{key:e.postId,attrs:{label:e.postName,value:e.postId,disabled:1==e.status}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"合同：",prop:"personContract"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.personContract,callback:function(t){e.$set(e.ruleForm,"personContract",t)},expression:"ruleForm.personContract"}},e._l(e.dict.type.person_contract,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"照片：",prop:""}},[r("upload",{attrs:{filesList:e.filesList,objParams:{atmLimit:1}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}})],1)],1),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"40px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1):e._e(),"form2"==e.radioGroup?r("div",[r("el-table",{attrs:{data:e.staffTitleInfosList,border:"","row-key":"id","header-cell-style":{background:"#eef6fa",color:"#000"}}},[r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{link:"",type:"danger"},on:{click:function(r){return e.delStaffTitleInfos(t.$index)}}},[e._v(" 删除 ")])]}}],null,!1,3248768163)}),r("el-table-column",{attrs:{prop:"titleDesc",label:"职称或职业资格"}}),r("el-table-column",{attrs:{prop:"titleLevelDesc",label:"等级"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(e.getTitleLeve(t.row.titleLevelId))+" ")])]}}],null,!1,941691504)}),r("el-table-column",{attrs:{prop:"issueDate",label:"颁发日期"}}),r("el-table-column",{attrs:{prop:"provePic",label:"证明材料"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticClass:"titleLevelImg",attrs:{src:e.row.provePic,"preview-src-list":[e.row.provePic],fit:"cover"}})]}}],null,!1,1362007271)})],1),r("br"),r("el-row",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.addTable()}}},[e._v("添加")])],1)],1):e._e()],1)],1)},o=[],s=r("5530"),l=r("c7eb"),n=r("1da1"),i=(r("d9e2"),r("a15b"),r("d81d"),r("14d9"),r("b0c0"),r("a9e3"),r("ac1f"),r("00b4"),r("fcb7")),c=r("2934"),u=r("c5da"),p=r("36fa"),d=r("7ded"),m=r("24e5"),f=r.n(m),b=function(e){var t=/^[0-9]*[1-9][0-9]*$/,r=e.length;return!(11!=r||!t)},h=function(e,t,r){t?b(t)?r():r(new Error("手机号不正确！")):r(new Error("手机号不能为空！"))},g={components:{upload:p["a"]},dicts:["person_contract"],props:{show:{type:Boolean,default:!1},search:{type:Object,default:function(){return{}}}},watch:{show:function(){this.isShow=this.show},search:{handler:function(e,t){this.ruleForm.companyId=e.deptId,this.ruleForm.companyDesc=e.deptName,this.cascaderKey=0,this.otherCascaderKey=0,this.initData(e)},immediate:!0}},data:function(){return{otherCascaderKey:0,cascaderKey:0,pleasett:"请选择",isShowLoading:!1,isShow:this.show,reqUrl:"add",radioGroup:"form1",DWList:[],DWList2:[],postOptions:[],roleOptions:[],ruleForm:{secondDeptId:"",userType:"01",avatar:"",idCard:"",orgId:"",jobStatus:"",deptId:"",deptName:"",nickName:"",orgDesc:"",politicalStatus:"",startWorkTime:"",joinUsTime:"",nativePlace:"",userName:"",phonenumber:"",roleIds:"",postIds:"",age:"",birthday:"",sex:"",password:"",companyId:"",companyDesc:"",email:"",status:"",roadCode:"",roadDesc:"",technicalLevel:"",remark:"",personContract:""},postList:[],filesList:[],imgsList:[],staffTitleInfosList:[],genderList:[{deptId:"0",deptName:"男"},{deptId:"1",deptName:"女"}],optionsJobStatus:[{label:"在职",value:"1"},{label:"离职",value:"2"}],rules:{postIds:[{required:!0,message:"请选择",trigger:"change"}],personContract:[{required:!0,message:"请选择",trigger:"change"}],orgId:[{required:!0,message:"请选择",trigger:"change"}],roleIds:[{required:!0,message:"请选择",trigger:"change"}],nickName:[{required:!0,message:"请输入",trigger:"blur"}],sex:[{required:!0,message:"请输入",trigger:"blur"}],age:[{required:!0,message:"请输入",trigger:"blur"}],phonenumber:[{message:"请输入联系电话",required:!0,trigger:"blur"},{validator:h,trigger:"blur"}],password:[{required:!0,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\w\s]).{8,}$/,message:"密码包括字母大小写（区分大小写）、数字、符号，最少8位数！",trigger:"change"}]}}},created:function(){},methods:{getNoFilterDepartmentList:function(e){var t=this;return Object(n["a"])(Object(l["a"])().mark((function r(){var a,o;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["u"])(e||t.ruleForm.companyId);case 2:a=r.sent,o=a.data,t.DWList2=o;case 5:case"end":return r.stop()}}),r)})))()},handleChange:function(e){e?this.$refs.cascader&&(this.$refs.cascader.dropDownVisible=!1):this.ruleForm.orgId=""},otherHandleChange:function(e){},getAge:function(e){var t=(e+"").length;if(0===t)return"";if(15!==t&&18!==t)return"";var r="";18===t&&(r=e.substr(6,4)+"/"+e.substr(10,2)+"/"+e.substr(12,2)),15===t&&(r="19"+e.substr(6,2)+"/"+e.substr(8,2)+"/"+e.substr(10,2));var a=new Date(r),o=new Date,s=o.getFullYear()-a.getFullYear();return(o.getMonth()<a.getMonth()||o.getMonth()==a.getMonth()&&o.getDate()<a.getDate())&&s--,s},getTitleLeve:function(e){return""},delStaffTitleInfos:function(e){},addTable:function(){},_returnRes:function(e){var t={name:e.fileName,attachId:e.id,fileUrl:e.fileUrl};this.imgsList.push(t)},_returnResDel:function(e){this.imgsList=[]},initData:function(e){var t=this;return Object(n["a"])(Object(l["a"])().mark((function r(){var a;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["b"])(e.deptId);case 2:a=r.sent,t.cascaderKey++,t.DWList=a.data,t.getNoFilterDepartmentList(e.deptId);case 6:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var t=this,r="add"==this.reqUrl?"post":"put";0!=this.imgsList.length&&(this.ruleForm.avatar=this.imgsList[0].fileUrl),this.$refs[e].validate((function(e){if(!e)return!1;for(var a=0;a<t.DWList.length;a++)if(t.ruleForm.orgId==t.DWList[a].deptId){t.ruleForm.orgDesc=t.DWList[a].deptName;break}if(t.ruleForm.deptId=t.ruleForm.orgId,t.ruleForm.deptName=t.ruleForm.orgDesc,!t.isShowLoading){t.isShowLoading=!0;var o=Object(s["a"])({},t.ruleForm);o.secondDeptId=t.ruleForm.secondDeptId?t.ruleForm.secondDeptId.join(","):"",Object(d["c"])().then((function(e){var a=new f.a;a.setPublicKey(e.data),o.password=a.encrypt(o.password),Object(u["a"])(o,r).then((function(e){200==e.code&&(t.$message({message:"成功!",type:"success"}),t.$emit("notice"),t.isShowLoading=!1,t.resetForm("ruleForm"),t.isShow=!1)})).catch((function(e){t.isShowLoading=!1}))}))}}))},resetForm:function(e){for(var t in this.pleasett="请选择",this.filesList=[],this.imgsList=[],this.$refs.cascader.checkedValue=[],this.$refs[e].resetFields(),this.ruleForm)this.ruleForm[t]=void 0},setUrl:function(e){this.reqUrl=e},getUser:function(){var e=this;return Object(n["a"])(Object(l["a"])().mark((function t(){var r,a,o;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["j"])();case 2:return r=t.sent,e.roleOptions=r.roles,t.next=6,Object(c["n"])();case 6:a=t.sent,o=a.rows,e.postOptions=o;case 9:case"end":return t.stop()}}),t)})))()},change:function(e){this.$forceUpdate()},getInfo:function(e){var t=this;return Object(n["a"])(Object(l["a"])().mark((function r(){var a,o,s,n,i,p,d,m;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isShow=!0,r.next=3,Object(u["h"])({id:e});case 3:return o=r.sent,t.ruleForm=o.data,t.ruleForm.orgId=o.data.deptId,t.ruleForm.postIds=o.data.postIds,t.ruleForm.roleIds=o.data.roleIds,t.ruleForm.sex=1==o.data.sex||0==o.data.sex?String(o.data.sex):"",t.ruleForm.secondDeptId=o.data.secondDeptId?String(o.data.secondDeptId).split(",").map((function(e){return Number(e)})):[],r.next=12,Object(c["n"])();case 12:if(s=r.sent,n=s.rows,t.postOptions=(null===o||void 0===o||null===(a=o.posts)||void 0===a?void 0:a.length)>0?o.posts:n,t.roleOptions=o.roles,i=o.data,p=[],[],d={response:{data:{}}},{response:{data:{}}},m={},{},i.avatar){r.next=20;break}return r.abrupt("return");case 20:d.name=i.avatar,d.url="/prod-api"+i.avatar,d.response.data.name=i.avatar,d.response.data.url="/prod-api"+i.avatar,m.fileUrl=i.avatar,p.push(d),t.imgsList.push(m),t.filesList=p;case 28:case"end":return r.stop()}}),r)})))()}}},v=g,F=(r("236f"),r("d707"),r("2877")),w=Object(F["a"])(v,a,o,!1,null,"07571c36",null);t["default"]=w.exports},a070:function(e,t,r){},d707:function(e,t,r){"use strict";r("a070")}}]);