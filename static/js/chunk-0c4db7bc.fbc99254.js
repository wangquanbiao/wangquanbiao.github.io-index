(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c4db7bc"],{"0caf":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tzs_comp"},[e.loading?e._e():t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("section",{staticClass:"section_card"},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"编号",prop:"caseNumber"}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.caseNumber,callback:function(r){e.$set(e.ruleForm,"caseNumber",r)},expression:"ruleForm.caseNumber"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{staticClass:"w_250",attrs:{label:"事件日期",prop:"time"}},[t("el-date-picker",{attrs:{disabled:"",clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},on:{input:function(r){return e.$forceUpdate()}},model:{value:e.ruleForm.time,callback:function(r){e.$set(e.ruleForm,"time",r)},expression:"ruleForm.time"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"事件地点",prop:"address"}},[t("el-input",{attrs:{disabled:"",placeholder:"请输入内容"},model:{value:e.ruleForm.address,callback:function(r){e.$set(e.ruleForm,"address",r)},expression:"ruleForm.address"}})],1)],1)],1),e._l(e.ruleForm.inners,(function(r,a){return t("div",{key:r.dsr.id+a},[t("div",{staticClass:"title second_title"},[t("span",[e._v("当事人")]),0==a?t("div",{staticClass:"add_table",on:{click:e.dsrAdd}},[e._v("添加")]):t("div",{staticClass:"add_table",on:{click:function(t){return e.dsrDel(r.dsr.id)}}},[e._v("删除")])]),t("div",{staticClass:"card",staticStyle:{"padding-right":"15px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名",prop:"inners."+a+".dsr.name",rules:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.name,callback:function(t){e.$set(r.dsr,"name",t)},expression:"item.dsr.name"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"电话",prop:"inners."+a+".dsr.phone",rules:[{required:!0,message:"电话不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.phone,callback:function(t){e.$set(r.dsr,"phone",t)},expression:"item.dsr.phone"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"身份证号",prop:"inners."+a+".dsr.idNumber",rules:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.idNumber,callback:function(t){e.$set(r.dsr,"idNumber",t)},expression:"item.dsr.idNumber"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"住址",prop:"inners."+a+".dsr.address",rules:[{required:!1,message:"姓名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.address,callback:function(t){e.$set(r.dsr,"address",t)},expression:"item.dsr.address"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"车牌号",prop:"inners."+a+".dsr.carPlate",rules:[{required:!0,message:"车牌号不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.carPlate,callback:function(t){e.$set(r.dsr,"carPlate",t)},expression:"item.dsr.carPlate"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"车辆品牌",prop:"inners."+a+".dsr.carBrand",rules:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.carBrand,callback:function(t){e.$set(r.dsr,"carBrand",t)},expression:"item.dsr.carBrand"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"车型",prop:"inners."+a+".dsr.carModel",rules:[{required:!1,message:"姓名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:r.dsr.carModel,callback:function(t){e.$set(r.dsr,"carModel",t)},expression:"item.dsr.carModel"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"w_1",staticStyle:{width:"100%"},attrs:{label:"事件认定",prop:"inners."+a+".dsr.eventDesc"}},[t("el-input",{attrs:{rows:4,type:"textarea",placeholder:"请输入"},model:{value:r.dsr.eventDesc,callback:function(t){e.$set(r.dsr,"eventDesc",t)},expression:"item.dsr.eventDesc"}})],1)],1)],1)],1)])})),t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{"label-width":"120px",label:"缴费单位地址",prop:"payFeeAddress"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.payFeeAddress,callback:function(r){e.$set(e.ruleForm,"payFeeAddress",r)},expression:"ruleForm.payFeeAddress"}},e._l(e.lawEnforcementAgencyList,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{staticClass:"w_250",attrs:{label:"签收日期",prop:"ysTime"}},[t("el-date-picker",{attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{input:function(r){return e.$forceUpdate()}},model:{value:e.ruleForm.ysTime,callback:function(r){e.$set(e.ruleForm,"ysTime",r)},expression:"ruleForm.ysTime"}})],1)],1)],1),t("p",{staticStyle:{display:"flex","align-items":"center"}},[t("span",[e._v("法律法规依据：违法了《中国人民共和国公路法》第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.flfg1,callback:function(r){e.$set(e.ruleForm,"flfg1",r)},expression:"ruleForm.flfg1"}})],1),t("span",[e._v("条，《公路安全保护条例》第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:"",prop:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.flfg2,callback:function(r){e.$set(e.ruleForm,"flfg2",r)},expression:"ruleForm.flfg2"}})],1),t("span",[e._v("条")])],1),t("p",{staticStyle:{display:"flex","align-items":"center"}},[t("span",[e._v("路产赔偿决定：根据《中国人民共和国公路法》第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.lcpc1,callback:function(r){e.$set(e.ruleForm,"lcpc1",r)},expression:"ruleForm.lcpc1"}})],1),t("span",[e._v("条、第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.lcpc2,callback:function(r){e.$set(e.ruleForm,"lcpc2",r)},expression:"ruleForm.lcpc2"}})],1),t("span",[e._v("款，《公路安全保护条例》第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:"",prop:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.lcpc3,callback:function(r){e.$set(e.ruleForm,"lcpc3",r)},expression:"ruleForm.lcpc3"}})],1),t("span",[e._v("条、第")]),t("el-form-item",{staticStyle:{width:"60px",height:"20px",margin:"0px 8px 20px"},attrs:{"label-width":"0",label:""}},[t("el-input",{attrs:{oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.lcpc4,callback:function(r){e.$set(e.ruleForm,"lcpc4",r)},expression:"ruleForm.lcpc4"}})],1),t("span",[e._v("款的规定")])],1)],2),t("section",{staticStyle:{display:"flex","justify-content":"center",padding:"25px 0"}},[t("el-button",{on:{click:function(r){return e.$emit("close")}}},[e._v("关闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)])],1)},l=[],s=t("c7eb"),n=t("1da1"),o=(t("4de4"),t("d81d"),t("14d9"),t("b0c0"),t("e9c4"),t("b64b"),t("d3b7"),t("e95a7")),i=t("fcb7"),c={props:{close:{type:Function,require:!0},show:{type:Boolean}},watch:{show:{handler:function(e,r){e?!this.loading&&this.getData():this.ruleForm={}},deep:!0}},data:function(){return{ruleForm:{time:void 0,address:void 0},loading:!0,rules:{address:[{required:!0,message:"请填写",trigger:"blur"}],time:[{required:!0,message:"请选择",trigger:"change"}]},lawEnforcementAgencyList:[]}},mounted:function(){this.getData(),this.getCurrentDept()},methods:{getCurrentDept:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function r(){var t,a;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["e"])(e.$store.state.user.userInfo.deptId);case 2:t=r.sent,a=t.data,e.lawEnforcementAgencyList=a.lawEnforcementAgency.split("、").map((function(e){return{label:e}})),e.ruleForm.payFeeAddress=e.ruleForm.payFeeAddress||e.lawEnforcementAgencyList[0]&&e.lawEnforcementAgencyList[0].label;case 6:case"end":return r.stop()}}),r)})))()},dsrAdd:function(){var e={name:void 0,address:void 0,phone:void 0,idNumber:void 0,carPlate:void 0,carBrand:void 0,carModel:void 0,eventDesc:void 0,id:Date.now()*(100*Math.random())};this.ruleForm.inners&&0!=this.ruleForm.inners.length||(this.ruleForm.inners=[]),this.ruleForm.inners.push({dsr:e})},dsrDel:function(e){this.ruleForm.inners=this.ruleForm.inners.filter((function(r){return r.dsr.id!=e}))},submitForm:function(e){var r=this;this.$refs[e].validate(function(){var e=Object(n["a"])(Object(s["a"])().mark((function e(t){var a,l;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&(a=JSON.parse(JSON.stringify(r.ruleForm)),l=JSON.parse(JSON.stringify(a.baseData)),l.accidentTime=a.time,l.accidentLocation=a.address,l.dsrList=[],a.inners.map((function(e,r){l.dsrList.push(e.dsr)})),delete a.baseData,delete a.time,delete a.address,Object(o["b"])({tzs:a,baseData:l},{businessId:r.$route.query.id,docCode:"new_tzs"}).then((function(e){200==e.code&&(r.loading=!1,r.$message.success("保存成功"),r.$emit("close"))})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},getData:function(){var e=this;return Object(n["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loading=!0,r.next=3,Object(o["a"])({businessId:e.$route.query.id,docCode:"new_tzs"}).then((function(r){var t;if(e.ruleForm=r.data.tzs,e.ruleForm.baseData=r.data.baseData,null===(t=e.ruleForm.baseData)||void 0===t||t.dsrList.map((function(r){e.ruleForm.inners.map((function(e){r.name!=e.dsr.name&&r.id!=e.dsr.id||(e.dsr.eventDesc=r.eventDesc)}))})),e.ruleForm.time=e.ruleForm.baseData.accidentTime,e.ruleForm.address=e.ruleForm.baseData.accidentLocation,!e.ruleForm.inners||0==e.ruleForm.inners.length){var a,l={name:void 0,address:void 0,phone:void 0,idNumber:void 0,carPlate:void 0,carBrand:void 0,carModel:void 0,eventDesc:void 0,id:Date.now()*(100*Math.random())};e.ruleForm.inners=[],e.ruleForm.inners.push({dsr:l}),null===(a=e.ruleForm.baseData)||void 0===a||null===(a=a.dsrList)||void 0===a||a.map((function(r,t){e.ruleForm.inners[t].dsr=r}))}e.ruleForm.flfg1=e.ruleForm.flfg1||52,e.ruleForm.flfg2=e.ruleForm.flfg2||9,e.ruleForm.lcpc1=e.ruleForm.lcpc1||85,e.ruleForm.lcpc2=e.ruleForm.lcpc2||1,e.ruleForm.lcpc3=e.ruleForm.lcpc3||71,e.ruleForm.lcpc4=e.ruleForm.lcpc4||1,e.ruleForm.payFeeAddress=e.ruleForm.payFeeAddress||e.lawEnforcementAgencyList[0]&&e.lawEnforcementAgencyList[0].label,e.loading=!1}));case 3:case"end":return r.stop()}}),r)})))()}}},d=c,u=(t("6145"),t("2877")),p=Object(u["a"])(d,a,l,!1,null,"4e56681f",null);r["default"]=p.exports},6145:function(e,r,t){"use strict";t("aa59")},aa59:function(e,r,t){},e95a7:function(e,r,t){"use strict";t.d(r,"a",(function(){return l})),t.d(r,"b",(function(){return s}));t("99af");var a=t("b775");function l(e){var r=e.businessId,t=e.docCode;return Object(a["a"])({url:"/roadProducts/roadDoc/docDetails/".concat(r,"/").concat(t),method:"get"})}function s(e,r){var t=r.businessId,l=r.docCode;return Object(a["a"])({url:"/roadProducts/roadDoc/saveDoc/".concat(t,"/").concat(l),method:"post",data:e})}},fcb7:function(e,r,t){"use strict";t.d(r,"g",(function(){return l})),t.d(r,"f",(function(){return s})),t.d(r,"e",(function(){return n})),t.d(r,"c",(function(){return o})),t.d(r,"h",(function(){return i})),t.d(r,"d",(function(){return c})),t.d(r,"a",(function(){return d})),t.d(r,"b",(function(){return u}));var a=t("b775");function l(e){return Object(a["a"])({url:"/system/dept/list",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/roadProducts/dept/deptList",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/system/dept/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/system/dept",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/system/dept",method:"put",data:e})}function c(e){return Object(a["a"])({url:"/system/dept/"+e,method:"delete"})}function d(e){return Object(a["a"])({url:"/system/user/deptTree?ancestors=".concat(e),method:"get"})}function u(e){return Object(a["a"])({url:"/system/user/deptTree?deptIdAndBelow=".concat(e||""),method:"get"})}}}]);