(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71be0d15"],{"8aea":function(t,i,s){"use strict";s("8de0")},"8de0":function(t,i,s){},"8fcd":function(t,i,s){"use strict";s.d(i,"d",(function(){return a})),s.d(i,"k",(function(){return n})),s.d(i,"j",(function(){return r})),s.d(i,"b",(function(){return o})),s.d(i,"f",(function(){return d})),s.d(i,"m",(function(){return c})),s.d(i,"l",(function(){return l})),s.d(i,"n",(function(){return u})),s.d(i,"a",(function(){return v})),s.d(i,"u",(function(){return f})),s.d(i,"c",(function(){return p})),s.d(i,"q",(function(){return _})),s.d(i,"p",(function(){return m})),s.d(i,"r",(function(){return h})),s.d(i,"o",(function(){return b})),s.d(i,"s",(function(){return C})),s.d(i,"t",(function(){return g})),s.d(i,"e",(function(){return y})),s.d(i,"i",(function(){return I})),s.d(i,"h",(function(){return j})),s.d(i,"g",(function(){return L})),s.d(i,"v",(function(){return w})),s.d(i,"w",(function(){return O}));var e=s("b775");function a(t){return Object(e["a"])({url:"/roadProducts/roadCount/countList",method:"post",data:t})}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["a"])({url:"/index/count/vehicleTreeSelect",method:"post",data:t})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(e["a"])({url:"/roadProducts/tVehicleInfo/list",method:"post",data:t})}function o(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/cancel/".concat(t.id),method:"PATCH",data:{cancelReason:t.cancelReason}})}function d(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/list",method:"post",data:t})}function c(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/cxList",method:"post",data:t})}function l(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/clList",method:"post",data:t})}function u(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/info/".concat(t),method:"get"})}function v(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/add",method:"post",data:t})}function f(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/edit",method:"post",data:t})}function p(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/edit",method:"post",data:t})}function _(){return Object(e["a"])({url:"/index/count/inWorkOrder",method:"get"})}function m(t){return Object(e["a"])({url:"/roadProducts/gps/findVehicleInfo/".concat(t),method:"get"})}function h(t){return Object(e["a"])({url:"/roadProducts/gps/listLatestInfos",method:"post",data:t})}function b(t){return Object(e["a"])({url:"/roadProducts/gps/findCameraPage",method:"post",data:t})}function C(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/remove",method:"DELETE",data:t})}function g(t){return Object(e["a"])({url:"/roadProducts/gps/list",method:"post",data:t})}function y(t){return Object(e["a"])({url:"/roadProducts/roadCount/stat",method:"post",data:t})}function I(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/statTotal",method:"post",data:t})}function j(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/statList",method:"post",data:t})}function L(t){return Object(e["a"])({url:"/roadProducts/tReportRoadInfo/query",method:"post",data:t})}function w(t){return Object(e["a"])({url:"/roadProducts/gps/videoStart_py/".concat(t),method:"get"})}function O(t){return Object(e["a"])({url:"/roadProducts/gps/videoStop_py/".concat(t),method:"get"})}},a48a:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"com_details"},[s("div",{staticClass:"title_wrap"},[s("div",{staticClass:"title"},[t._v("任务工单基本信息")]),s("div",[s("el-popover",{attrs:{placement:"right",trigger:"manual"},model:{value:t.visible,callback:function(i){t.visible=i},expression:"visible"}},[s("el-row",[s("div",{staticStyle:{"font-weight":"bold"}},[t._v("请选择回放日期")])]),s("br"),s("el-row",[s("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"请选择回放开始日期","end-placeholder":"请选择回放结束日期","value-format":"timestamp"},model:{value:t.videoDate,callback:function(i){t.videoDate=i},expression:"videoDate"}})],1),s("br"),s("el-row",{staticStyle:{"text-align":"center"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.toLaneVideoMap(t.detailInfo)}}},[t._v("确定")])],1),s("el-button",{attrs:{slot:"reference"},on:{click:function(i){t.visible=!t.visible}},slot:"reference"},[t._v("查看回放")])],1),s("el-button",{on:{click:function(i){return t.toLaneRouteMap(t.detailInfo)}}},[t._v("查看轨迹")])],1)]),s("el-divider"),s("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("div",{staticClass:"tb_list",staticStyle:{"margin-top":"0"}},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("工单编号:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.businessId))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("所属公司:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.companyDesc))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("签发领导:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.signer))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("签发日期:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.qfrqTime))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查时间:")]),s("div",{staticClass:"right"},[t._v(" "+t._s(t.detailInfo.rwksTime)+"~"+t._s(t.detailInfo.rwjsTime)+" ")])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查路段:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.patrolRoad))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查车辆:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.patrolNub))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查人员:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.patrolUserName))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("签发次数:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.signNum))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查注意事项:")]),s("div",{staticClass:"right"},[t._v(t._s(t.detailInfo.inspectionPrecautions))])])])])]),s("el-divider"),s("div",{staticClass:"title"},[t._v("巡查情况")]),s("el-divider"),t._l(t.detailInfo.childList,(function(i,e){return s("div",{key:i.id,staticStyle:{display:"flex","justify-content":"space-between"}},[s("div",[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left",staticStyle:{color:"#409eff"}},[t._v(t._s(t.detailInfo.patrolTimesName))])]),s("div",{staticClass:"tb_list",staticStyle:{"margin-top":"16px"}},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("出车时间:")]),s("div",{staticClass:"right"},[t._v(t._s(i.startTime))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("出车里程指数:")]),s("div",{staticClass:"right"},[t._v(t._s(i.startMileage))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("车况:")]),s("div",{staticClass:"right"},[t._v(t._s(i.carCondition))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("收车时间:")]),s("div",{staticClass:"right"},[t._v(t._s(i.endTime))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("巡查里程:")]),s("div",{staticClass:"right"},[t._v(t._s(t.renXcli(i)))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("收车里程指数:")]),s("div",{staticClass:"right"},[t._v(t._s(i.endMileage))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("车辆运行和设备器材使用情况:")]),s("div",{staticClass:"right"},[t._v(t._s(i.healthDesc))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("加油情况:")]),s("div",{staticClass:"right"},[t._v(t._s(i.refuelDesc))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("备注:")]),s("div",{staticClass:"right"},[t._v(t._s(i.remark))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("天气:")]),s("div",{staticClass:"right"},[t._v(t._s(i.weather))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("路况:")]),s("div",{staticClass:"right"},[t._v(t._s(i.roadConditions))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("桥隧:")]),s("div",{staticClass:"right"},[t._v(t._s(i.bridgesTunnels))])])]),s("div",{staticClass:"tb_list"},[s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("控制区:")]),s("div",{staticClass:"right"},[t._v(t._s(i.controlArea))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("路产设施:")]),s("div",{staticClass:"right"},[t._v(t._s(i.roadFacilities))])]),s("div",{staticClass:"tb_item"},[s("div",{staticClass:"left"},[t._v("涉路施工:")]),s("div",{staticClass:"right"},[t._v(t._s(i.roadConstruction))])])])])])}))],2),s("el-divider"),s("div",{staticClass:"title"},[t._v("巡查记事记录")]),s("el-divider"),t._l(t.detailInfo.nodeList,(function(i,e){return s("div",{key:e},[s("div",[t._v("("+t._s(e+1)+") "+t._s(i.patrolDesc))])])})),s("el-divider"),s("div",{staticClass:"title"},[t._v("流程进度")]),s("div",[s("div",{staticStyle:{margin:"20px 0",display:"flex","border-left":"5px solid #409eff"}},[s("div",{staticStyle:{"margin-right":"50px","margin-left":"10px"}},[t._v(" 巡查车辆："+t._s(t.detailInfo.patrolNub)+" ")]),s("div",[t._v("巡查班长："+t._s(t.detailInfo.leader))])]),s("el-steps",{attrs:{space:"14%"}},t._l(t.stepList,(function(i,e){return s("el-step",{key:e,attrs:{title:i.title,status:i.status}},[s("template",{slot:"description"},[s("div",[t._v(t._s(i.time))])])],2)})),1)],1),s("el-divider"),s("div",{staticClass:"title"},[t._v("巡查照片记录")]),s("div",{staticClass:"imgList"},t._l(t.imgList,(function(i,e){return s("div",{key:e,staticClass:"img_item"},[s("viewer",{attrs:{images:t.imgList}},[s("img",{staticStyle:{width:"80px",height:"60px","object-fit":"cover"},attrs:{src:t.imgUrl+i.fileUrl,alt:""}})]),s("span",[t._v("图片"+t._s(e+1))])],1)})),0),s("el-divider"),s("div",[t.edit?s("div",[t._v(" 审核结果 "),t._l(t.statusList,(function(i,e){return s("el-button",{key:e,staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:i.type==t.param.status?"primary":""},on:{click:function(s){return t.handleType(i.type)}}},[t._v(t._s(i.title))])}))],2):t._e(),t.edit?s("div",{staticStyle:{"margin-top":"20px",display:"flex"}},[s("div",{staticStyle:{"flex-shrink":"0","margin-right":"20px"}},[t._v("审核意见")]),s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.param.spyj,callback:function(i){t.$set(t.param,"spyj",i)},expression:"param.spyj"}})],1):t._e(),t.info?s("div",[t._v("审核结果："+t._s(t.detailInfo.statusName))]):t._e(),t.info?s("div",{staticStyle:{"margin-top":"20px"}},[t._v(" 审核意见："+t._s(t.detailInfo.spyj)+" ")]):t._e(),s("div",{staticClass:"btn"},[t.edit?s("el-button",{attrs:{type:"primary"},on:{click:t.setUp}},[t._v("提交")]):t._e(),s("el-button",{on:{click:t.goBack}},[t._v("返回")])],1)]),t.isVideoPreview?[s("video-preview",{attrs:{show:t.isVideoPreview,videoMap:t.videoMap},on:{"update:show":function(i){t.isVideoPreview=i}}})]:t._e()],2)},a=[],n=s("c7eb"),r=s("2909"),o=s("1da1"),d=(s("99af"),s("a15b"),s("d81d"),s("14d9"),s("a9e3"),s("d3b7"),s("3ca3"),s("159b"),s("ddb0"),s("8fcd")),c=s("2934"),l=function(){return Promise.all([s.e("chunk-commons"),s.e("chunk-2d0f028f")]).then(s.bind(null,"fccf"))},u={components:{VideoPreview:l},data:function(){return{visible:!1,isVideoPreview:!1,videoDate:[],videoMap:{},cllist:[],edit:!1,info:!1,stepList:[{title:"签发",time:"",status:""},{title:"开始",time:"",status:""},{title:"巡查中",time:"",status:""},{title:"结束",time:"",status:""}],imgList:[],imgUrl:"/prod-api",detailInfo:{},statusList:[{title:"通过",type:4},{title:"不通过",type:5}],param:{status:4,spyj:""}}},mounted:function(){this.edit="edit"==this.$route.query.type,this.info="info"==this.$route.query.type,this.getData()},methods:{toLaneVideoMap:function(t){2==this.videoDate.length?(this.videoMap={vehcli:t.patrolNub,startTimeStamp:this.videoDate[0]/1e3,endTimeStamp:this.videoDate[1]/1e3,playTimeStamp:this.videoDate[0]/1e3},this.visible=!1,this.isVideoPreview=!0):this.$notify({title:"警告",message:"请选择回放日期！",type:"warning"})},toLaneRouteMap:function(t){this.$router.push({path:"/roadSecurity/laneRouteMap",query:{type:1,id:t.id}})},renXcli:function(t){return t.endMileage||(t.endMileage=0),t.startMileage||(t.startMileage=0),Number(t.endMileage)-Number(t.startMileage)},setUp:function(){for(var t=this,i="",s=0;s<this.statusList.length;s++)if(this.statusList[s].type==this.param.status){i="确认".concat(this.statusList[s].title,"审核吗?");break}this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={id:t.$route.query.id,status:t.param.status,spyj:t.param.spyj};Object(d["u"])(i).then((function(i){var s=i.code,e=i.msg;200==s&&(t.$message({message:e,type:"success"}),t.goBack())})).catch((function(t){}))})).catch((function(){}))},getData:function(){var t=this;return Object(o["a"])(Object(n["a"])().mark((function i(){var s,e,a,o,l,u;return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.$store.getters.userInfo,i.next=3,Object(c["s"])({orgId:s.deptId});case 3:return e=i.sent,t.cllist=e.rows,t.imgList=[],a=t.$route.query.id,i.next=9,Object(d["n"])(a);case 9:o=i.sent,t.detailInfo=o.data,t.detailInfo.nodeList=o.data.nodeList||[],t.detailInfo.nodeList.length>0&&t.detailInfo.nodeList.forEach((function(i){t.imgList=[].concat(Object(r["a"])(t.imgList),Object(r["a"])(i.fileList))})),l=0,null!=t.detailInfo.transfer&&(t.stepList.unshift({title:"转单",time:"",status:"success"}),l++),t.detailInfo.yzpTime&&(t.stepList[0+l].time=t.detailInfo.yzpTime,t.stepList[0+l].status="success"),t.detailInfo.yksTime&&(t.stepList[1+l].time=t.detailInfo.yksTime,t.stepList[1+l].status="success"),t.detailInfo.xczTime&&(t.stepList[2+l].time=t.detailInfo.xczTime,t.stepList[2+l].status="success"),t.detailInfo.jsTime&&(t.stepList[3+l].time=t.detailInfo.jsTime,t.stepList[3+l].status="success"),u=o.data.roadList.map((function(t){return t.roadDesc})),t.detailInfo.patrolRoad=u.join(",");case 21:case"end":return i.stop()}}),i)})))()},handleType:function(t){this.param.status=t},goBack:function(){this.$router.go(-1)}}},v=u,f=(s("8aea"),s("2877")),p=Object(f["a"])(v,e,a,!1,null,"308ac559",null);i["default"]=p.exports}}]);