(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-215b3c40"],{"8fcd":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"k",(function(){return o})),n.d(e,"j",(function(){return c})),n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return u})),n.d(e,"m",(function(){return s})),n.d(e,"l",(function(){return d})),n.d(e,"n",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"u",(function(){return p})),n.d(e,"c",(function(){return m})),n.d(e,"q",(function(){return h})),n.d(e,"p",(function(){return b})),n.d(e,"r",(function(){return g})),n.d(e,"o",(function(){return v})),n.d(e,"s",(function(){return j})),n.d(e,"t",(function(){return O})),n.d(e,"e",(function(){return I})),n.d(e,"i",(function(){return y})),n.d(e,"h",(function(){return w})),n.d(e,"g",(function(){return P})),n.d(e,"v",(function(){return x})),n.d(e,"w",(function(){return R}));var r=n("b775");function a(t){return Object(r["a"])({url:"/roadProducts/roadCount/countList",method:"post",data:t})}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/index/count/vehicleTreeSelect",method:"post",data:t})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r["a"])({url:"/roadProducts/tVehicleInfo/list",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/cancel/".concat(t.id),method:"PATCH",data:{cancelReason:t.cancelReason}})}function u(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/list",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/cxList",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/clList",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/info/".concat(t),method:"get"})}function f(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/add",method:"post",data:t})}function p(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/edit",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/edit",method:"post",data:t})}function h(){return Object(r["a"])({url:"/index/count/inWorkOrder",method:"get"})}function b(t){return Object(r["a"])({url:"/roadProducts/gps/findVehicleInfo/".concat(t),method:"get"})}function g(t){return Object(r["a"])({url:"/roadProducts/gps/listLatestInfos",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/roadProducts/gps/findCameraPage",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/remove",method:"DELETE",data:t})}function O(t){return Object(r["a"])({url:"/roadProducts/gps/list",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/roadProducts/roadCount/stat",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/statTotal",method:"post",data:t})}function w(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/statList",method:"post",data:t})}function P(t){return Object(r["a"])({url:"/roadProducts/tReportRoadInfo/query",method:"post",data:t})}function x(t){return Object(r["a"])({url:"/roadProducts/gps/videoStart_py/".concat(t),method:"get"})}function R(t){return Object(r["a"])({url:"/roadProducts/gps/videoStop_py/".concat(t),method:"get"})}},a21a:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"params"},[n("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:"巡查车牌号",prop:"patrolNub"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.formInline.patrolNub,callback:function(e){t.$set(t.formInline,"patrolNub",e)},expression:"formInline.patrolNub"}},t._l(t.cllist,(function(t){return n("el-option",{key:t.id,attrs:{label:t.vehicleNo,value:t.vehicleNo}})})),1)],1),n("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择运营公司"},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return n("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1),n("div",{staticClass:"my-vxe-grid"},[n("vxe-grid",{attrs:{"cell-style":t.setStatusColor,"highlight-hover-row":"",stripe:"",resizable:"","auto-resize":"","max-height":"600","pager-config":t.table.page,loading:t.table.loading,columns:t.columns,data:t.table.datas},on:{"page-change":t.handlePageChange},scopedSlots:t._u([{key:"optionPatrolRoad",fn:function(e){var n=e.row;return[t._v(" "+t._s(t.renPatrolRoad(n))+" ")]}},{key:"rwjsTime",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.rwksTime+"~"+n.rwjsTime)+" ")]}},{key:"option",fn:function(e){var r=e.row;return[n("div",{staticClass:"btn-group"},[n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"primary"},on:{click:function(e){return t.handleDelete(r)}}},[t._v("删除")]),r.is_del?n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"warning"},on:{click:function(e){return t.handleDel(r)}}},[t._v("取消")]):t._e(),n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"primary"},on:{click:function(e){return t.handleDetail(r)}}},[t._v("详情")]),r.is_del?n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"success"},on:{click:function(e){return t.handleEdit(r)}}},[t._v("修改")]):t._e()],1)]}}])})],1)])},a=[],o=n("5530"),c=n("c7eb"),i=n("1da1"),u=(n("a15b"),n("d81d"),n("14d9"),n("d3b7"),n("159b"),n("8fcd")),s=n("2934"),d={name:"RoadSecurityList",data:function(){return{formInline:{companyId:"",patrolNub:""},businessTypeList:[],cllist:[],depList:[],table:{loading:!1,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{title:"公司名称",field:"companyDesc",align:"center"},{title:"工单编号",field:"businessId",align:"center"},{title:"签发领导",field:"signer",align:"center"},{title:"巡查路段",field:"patrolRoad",slots:{default:"optionPatrolRoad"},align:"center"},{title:"巡查人员",field:"patrolUserName",align:"center"},{title:"巡查车号",field:"patrolNub",align:"center"},{title:"巡查时间",field:"rwjsTime",slots:{default:"rwjsTime"},align:"center"},{title:"状态",field:"statusName",align:"center"},{title:"操作",slots:{default:"option"},align:"center"}]}},mounted:function(){this.getDptData(),this.getData(),this.gettVehicleInfoList()},methods:{handleDel:function(t){var e=this;this.$confirm("此操作将取消".concat(t.businessId,"该工单, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$prompt("请填写取消原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(t){if(!t)return"取消原因不能为空"}}).then((function(n){var r=n.value;Object(u["b"])({id:t.id,cancelReason:r}).then((function(t){200==t.code&&(e.$message({type:"success",message:"已取消!"}),e.getData())}))})).catch((function(){}))})).catch((function(){}))},handleDelete:function(t){var e=this;this.$confirm("此操作将删除".concat(t.businessId,"该工单, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$prompt("请填写删除原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(t){if(!t)return"删除原因不能为空"}}).then((function(n){var r=n.value;Object(u["s"])({id:t.id,reason:r}).then((function(t){200==t.code&&(e.$message({type:"success",message:"已删除!"}),e.getData())}))})).catch((function(){}))})).catch((function(){}))},setDel:function(t){var e=this;return Object(i["a"])(Object(c["a"])().mark((function n(){var r;return Object(c["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["s"])(t.id);case 2:r=n.sent,200==r.code&&(e.$message({type:"success",message:"成功!"}),e.getData());case 4:case"end":return n.stop()}}),n)})))()},renPatrolRoad:function(t){var e=t.roadList.map((function(t){return t.roadDesc}));return e.join(",")},gettVehicleInfoList:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var n,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.getters.userInfo,e.next=3,Object(s["s"])({orgId:99==n.deptId?"":n.deptId});case 3:r=e.sent,t.cllist=r.rows;case 5:case"end":return e.stop()}}),e)})))()},getDptData:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["j"])();case 2:n=e.sent,t.depList=n.data;case 4:case"end":return e.stop()}}),e)})))()},handleDetail:function(t,e){this.$router.push({path:"roadSecurityDetails",query:{id:t.id,type:e}})},handleEdit:function(t){this.$router.push({path:"roadSecurityReport",query:{id:t.id}})},resetForm:function(t){this.$refs[t].resetFields()},handlePageChange:function(t){var e=t.currentPage,n=t.pageSize;this.table.page.currentPage=e,this.table.page.pageSize=n,this.getData()},getData:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var n,r,a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.getters.userInfo,t.table.loading=!0,r=Object(o["a"])(Object(o["a"])({},t.formInline),{},{pageNum:t.table.page.currentPage,pageSize:t.table.page.pageSize}),e.next=5,Object(u["f"])(r);case 5:a=e.sent,a.rows.forEach((function(t){t.createBy==n.userId&&"已指派"==t.statusName?t.is_del=!0:t.is_del=!1})),t.table.datas=a.rows,t.table.page.total=a.total,t.table.loading=!1;case 10:case"end":return e.stop()}}),e)})))()},setStatusColor:function(t){var e=t.row,n=t.columnIndex;return"已指派"==e.statusName&&7==n?{color:"#0084FF"}:"巡查中"==e.statusName&&7==n?{color:"#FF7E00"}:7==n?{color:"#B35DB8"}:void 0}}},l=d,f=(n("a3bf"),n("2877")),p=Object(f["a"])(l,r,a,!1,null,"7920360e",null);e["default"]=p.exports},a3bf:function(t,e,n){"use strict";n("feb1")},feb1:function(t,e,n){}}]);