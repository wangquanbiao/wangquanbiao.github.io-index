(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-686d33e5"],{"0bd0":function(e,l,r){"use strict";r("46a5")},"3d49":function(e,l,r){},4481:function(e,l,r){"use strict";r.r(l);var t=function(){var e=this,l=e.$createElement,r=e._self._c||l;return r("div",{staticClass:"app-container"},[r("el-dialog",{attrs:{title:"车辆信息",visible:e.isShow,isShow:e.show,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(l){e.isShow=l},close:function(l){e.$emit("update:show",!1)}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆分类：",prop:"vehicleClass"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.vehicleClassChange},model:{value:e.ruleForm.vehicleClass,callback:function(l){e.$set(e.ruleForm,"vehicleClass",l)},expression:"ruleForm.vehicleClass"}},e._l(e.CLFLList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车牌号码：",prop:"vehicleNo"}},[r("el-input",{model:{value:e.ruleForm.vehicleNo,callback:function(l){e.$set(e.ruleForm,"vehicleNo",l)},expression:"ruleForm.vehicleNo"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"所属部门：",prop:"orgId"}},[r("el-cascader",{ref:"cascader",staticStyle:{color:"#000"},attrs:{"popper-class":"cascader",options:e.DWList,props:{value:"id",checkStrictly:!0},placeholder:e.pleasett,"show-all-levels":!1,"expand-trigger":"hover"},on:{change:e.handleChange}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"购置/调拨日期：",prop:"purchaseDate"}},[r("el-date-picker",{staticClass:"width100",attrs:{"value-format":"yyyy-MM-dd",placeholder:"请选择"},model:{value:e.ruleForm.purchaseDate,callback:function(l){e.$set(e.ruleForm,"purchaseDate",l)},expression:"ruleForm.purchaseDate"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"使用状态：",prop:"useType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.useType,callback:function(l){e.$set(e.ruleForm,"useType",l)},expression:"ruleForm.useType"}},e._l(e.SYZTList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"保险配置：",prop:"insuranceInfo"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ruleForm.insuranceInfo,callback:function(l){e.$set(e.ruleForm,"insuranceInfo",l)},expression:"ruleForm.insuranceInfo"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"到险日期：",prop:"endLineDate"}},[r("el-date-picker",{attrs:{placeholder:"请选择","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.endLineDate,callback:function(l){e.$set(e.ruleForm,"endLineDate",l)},expression:"ruleForm.endLineDate"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆类型：",prop:"vehicleType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{focus:e.vehicleTypeFocus},model:{value:e.ruleForm.vehicleType,callback:function(l){e.$set(e.ruleForm,"vehicleType",l)},expression:"ruleForm.vehicleType"}},e._l(e.cllxList,(function(l){return r("el-option",{directives:[{name:"show",rawName:"v-show",value:l.remark==e.remark||!l.remark,expression:"item.remark == remark || !item.remark"}],key:l.dictValue,attrs:{label:l.dictLabel,value:l.dictValue}})})),1)],1)],1)],1),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆品牌：",prop:"vehicleBrand"}},[r("el-input",{model:{value:e.ruleForm.vehicleBrand,callback:function(l){e.$set(e.ruleForm,"vehicleBrand",l)},expression:"ruleForm.vehicleBrand"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"核定载人：",prop:"approvedManned"}},[r("el-input",{model:{value:e.ruleForm.approvedManned,callback:function(l){e.$set(e.ruleForm,"approvedManned",l)},expression:"ruleForm.approvedManned"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"大架号码：",prop:"frameNumber"}},[r("el-input",{model:{value:e.ruleForm.frameNumber,callback:function(l){e.$set(e.ruleForm,"frameNumber",l)},expression:"ruleForm.frameNumber"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"总质量：",prop:"totalMass"}},[r("el-input",{model:{value:e.ruleForm.totalMass,callback:function(l){e.$set(e.ruleForm,"totalMass",l)},expression:"ruleForm.totalMass"}},[r("template",{slot:"append"},[e._v("KG")])],2)],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"发动机号码：",prop:"engineNo"}},[r("el-input",{model:{value:e.ruleForm.engineNo,callback:function(l){e.$set(e.ruleForm,"engineNo",l)},expression:"ruleForm.engineNo"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车身长：",prop:"vehicleLength"}},[r("el-input",{model:{value:e.ruleForm.vehicleLength,callback:function(l){e.$set(e.ruleForm,"vehicleLength",l)},expression:"ruleForm.vehicleLength"}},[r("template",{slot:"append"},[e._v("mm")])],2)],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车身宽：",prop:"vehicleWidth"}},[r("el-input",{model:{value:e.ruleForm.vehicleWidth,callback:function(l){e.$set(e.ruleForm,"vehicleWidth",l)},expression:"ruleForm.vehicleWidth"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车身高：",prop:"vehicleHeight"}},[r("el-input",{model:{value:e.ruleForm.vehicleHeight,callback:function(l){e.$set(e.ruleForm,"vehicleHeight",l)},expression:"ruleForm.vehicleHeight"}},[r("template",{slot:"append"},[e._v("mm")])],2)],1)],1)],1):e._e(),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"能源类型：",prop:"energy_type"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.energyType,callback:function(l){e.$set(e.ruleForm,"energyType",l)},expression:"ruleForm.energyType"}},e._l(e.nylxList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆编号：",prop:"vehicleNumber"}},[r("el-input",{model:{value:e.ruleForm.vehicleNumber,callback:function(l){e.$set(e.ruleForm,"vehicleNumber",l)},expression:"ruleForm.vehicleNumber"}})],1)],1)],1),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆电瓶电压：",prop:"vehicleBatteryVoltage"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.vehicleBatteryVoltage,callback:function(l){e.$set(e.ruleForm,"vehicleBatteryVoltage",l)},expression:"ruleForm.vehicleBatteryVoltage"}},e._l(e.vehicleBatteryVoltageList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"原值（元）：",prop:"vehiclePrice"}},[r("el-input",{model:{value:e.ruleForm.vehiclePrice,callback:function(l){e.$set(e.ruleForm,"vehiclePrice",l)},expression:"ruleForm.vehiclePrice"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"所属清障部门驻地：",prop:"deptLocation"}},[r("el-input",{model:{value:e.ruleForm.deptLocation,callback:function(l){e.$set(e.ruleForm,"deptLocation",l)},expression:"ruleForm.deptLocation"}})],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"车辆停放地：",prop:"vehicleParkingArea"}},[r("el-input",{model:{value:e.ruleForm.vehicleParkingArea,callback:function(l){e.$set(e.ruleForm,"vehicleParkingArea",l)},expression:"ruleForm.vehicleParkingArea"}})],1)],1)],1):e._e(),2==e.ruleForm.vehicleClass?r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"轴数：",prop:"axesNumber"}},[r("el-input",{model:{value:e.ruleForm.axesNumber,callback:function(l){e.$set(e.ruleForm,"axesNumber",l)},expression:"ruleForm.axesNumber"}})],1)],1)],1):e._e(),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"是否安装定位：",prop:"isInstallDevice"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.isInstallDevice,callback:function(l){e.$set(e.ruleForm,"isInstallDevice",l)},expression:"ruleForm.isInstallDevice"}},e._l(e.DeviceSelect,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"是否安装云台：",prop:"isInstallCamera"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.ruleForm.isInstallCamera,callback:function(l){e.$set(e.ruleForm,"isInstallCamera",l)},expression:"ruleForm.isInstallCamera"}},e._l(e.DeviceSelect,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:9}},[r("el-form-item",{attrs:{label:"现有里程：",prop:"publishedMileage"}},[r("el-input",{model:{value:e.ruleForm.publishedMileage,callback:function(l){e.$set(e.ruleForm,"publishedMileage",l)},expression:"ruleForm.publishedMileage"}},[r("template",{slot:"append"},[e._v("KM")])],2)],1)],1)],1),r("el-row",[r("el-form-item",{attrs:{label:"照片：",prop:"vehiclePic"}},[r("upload",{attrs:{filesList:e.filesList,objParams:{atmLimit:1}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel},model:{value:e.ruleForm.vehiclePic,callback:function(l){e.$set(e.ruleForm,"vehiclePic",l)},expression:"ruleForm.vehiclePic"}})],1)],1),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(l){e.$set(e.ruleForm,"remark",l)},expression:"ruleForm.remark"}})],1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"40px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(l){return e.submitForm("ruleForm")}}},[e._v("确定")]),r("el-button",{on:{click:function(l){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)},a=[],s=r("c7eb"),i=r("1da1"),o=(r("14d9"),r("b0c0"),r("c5da")),c=r("2934"),n=r("36fa"),u=r("fcb7"),m={components:{upload:n["a"]},props:{show:{type:Boolean,default:!1},search:{type:Object,default:function(){return{}}}},watch:{show:function(){this.isShow=this.show},search:{handler:function(e,l){this.crow=e,this.ruleForm.companyId=e.deptId,this.initData(e)},immediate:!0}},data:function(){return{pleasett:"请选择",remark:"",isShowLoading:!1,isShow:this.show,reqUrl:"add",DWList:[],CLFLList:[],SYZTList:[],cllxList:[],depList:[],nylxList:[],crow:{},ruleForm:{isInstallDevice:"2",isInstallCamera:"2",companyId:"",orgId:"",orgDesc:"",companyDesc:"",engineNo:"",useType:"",vehicleNo:"",vehicleClass:"",insuranceInfo:"",purchaseDate:"",frameNumber:"",endLineDate:"",vehicleBrand:"",vehicleType:"",energyType:"",approvedManned:"",technicalLevel:"",vehicleWidth:"",totalMass:"",vehicleHeight:"",vehicleLength:"",publishedMileage:"",vehicleNumber:"",remark:"",axesNumber:"",vehicleBatteryVoltage:"",vehiclePrice:"",deptLocation:"",vehicleParkingArea:""},DeviceSelect:[{label:"否",id:"2"},{label:"是",id:"1"}],filesList:[],imgsList:[],rules:{vehicleClass:[{required:!0,message:"请选择",trigger:"change"}],orgId:[{required:!0,message:"请选择",trigger:"change"}],endLineDate:[{required:!0,message:"请选择",trigger:"change"}],isInstallDevice:[{required:!0,message:"请选择",trigger:"change"}],isInstallCamera:[{required:!0,message:"请选择",trigger:"change"}],useType:[{required:!0,message:"请选择",trigger:"change"}],purchaseDate:[{required:!0,message:"请选择",trigger:"change"}],insuranceInfo:[{required:!0,message:"请输入",trigger:"blur"}],vehicleNo:[{required:!0,message:"请输入",trigger:"blur"}]},vehicleBatteryVoltageList:[{label:"12V",id:"12V"},{label:"24V",id:"24V"}]}},created:function(){},methods:{handleChange:function(e){var l;this.ruleForm.orgId=e[e.length-1],null!==(l=this.$refs.cascader.getCheckedNodes()[0])&&void 0!==l&&l.data.label&&(this.ruleForm.orgDesc=this.$refs.cascader.getCheckedNodes()[0].data.label),this.$refs.cascader&&(this.$refs.cascader.dropDownVisible=!1)},vehicleTypeFocus:function(){this.ruleForm.vehicleClass||this.$message({message:"请先选择车辆分类",type:"warning"})},vehicleClassChange:function(e){this.remark=1==e?"巡查车辆":"清障车辆"},initData:function(e){var l=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var t,a,i,o,n,m;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["k"])({dictType:"vehicle_class"});case 2:return t=r.sent,l.CLFLList=t.rows,r.next=6,Object(c["k"])({dictType:"vehicle_use_type"});case 6:return a=r.sent,l.SYZTList=a.rows,r.next=10,Object(c["k"])({dictType:"vehicle_type_v1"});case 10:return i=r.sent,l.cllxList=i.rows,r.next=14,Object(c["k"])({dictType:"energy_type"});case 14:return o=r.sent,l.nylxList=o.rows,r.next=18,Object(u["b"])(e.deptId||l.crow.deptId);case 18:return n=r.sent,l.DWList=n.data,r.next=22,Object(c["h"])({parentId:100,status:0});case 22:m=r.sent,l.depList=m.data;case 24:case"end":return r.stop()}}),r)})))()},_returnRes:function(e){var l={name:e.fileName,attachId:e.id,fileUrl:e.fileUrl};this.imgsList.push(l),0!=this.imgsList.length&&(this.ruleForm.vehiclePic=this.imgsList[0].fileUrl)},_returnResDel:function(e){this.imgsList=[],this.ruleForm.vehiclePic=""},submitForm:function(e){var l,r=this,t="add"==this.reqUrl?"post":"put";this.ruleForm.orgId&&(null!==(l=this.$refs.cascader.getCheckedNodes()[0])&&void 0!==l&&l.data.label&&(this.ruleForm.orgDesc=this.$refs.cascader.getCheckedNodes()[0].data.label));for(var a=0;a<this.depList.length;a++)if(this.depList[a].deptId==this.ruleForm.companyId){this.ruleForm.companyDesc=this.depList[a].deptName;break}this.$refs[e].validate((function(e){if(!e)return!1;r.isShowLoading||(r.isShowLoading=!0,Object(o["q"])(r.ruleForm,r.reqUrl,t).then((function(e){200==e.code&&(r.$message({message:"成功!",type:"success"}),r.$emit("notice"),r.isShowLoading=!1,r.resetForm("ruleForm"),r.isShow=!1)})).catch((function(e){r.isShowLoading=!1})))}))},resetForm:function(e){this.ruleForm.orgId=void 0,this.ruleForm.energyType=void 0,this.pleasett="请选择",this.filesList=[],this.imgsList=[],this.$refs[e].resetFields(),this.$refs.cascader.$refs.panel.checkedValue=[],this.$refs.cascader.$refs.panel.clearCheckedNodes(),this.$refs.cascader.$refs.panel.activePath=[]},setUrl:function(e){this.reqUrl=e},getInfo:function(e){var l=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var t,a,i,n,u,m;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l.isShow=!0,r.next=3,Object(o["s"])(e);case 3:return t=r.sent,t.data.vehicleType&&(t.data.vehicleType=t.data.vehicleType+""),t.data.energyType&&(t.data.energyType=t.data.energyType+""),l.ruleForm=t.data,l.ruleForm.useType=l.ruleForm.useType+"",l.ruleForm.vehicleClass=l.ruleForm.vehicleClass+"",l.pleasett=l.ruleForm.orgDesc,l.$refs.cascader.checkedValue=[l.ruleForm.orgId],l.vehicleClassChange(l.ruleForm.vehicleClass),r.next=14,Object(c["k"])({dictType:"vehicle_type_v1"});case 14:if(a=r.sent,l.cllxList=a.rows,i=t.data,n=[],[],i.vehiclePic){r.next=22;break}return l.imgsList=[],l.filesList=[],l.ruleForm.vehiclePic="",r.abrupt("return");case 22:u={response:{data:{}}},{response:{data:{}}},m={},{},u.name=i.vehiclePic,u.url="/prod-api"+i.vehiclePic,u.response.data.name=i.vehiclePic,u.response.data.url="/prod-api"+i.vehiclePic,m.fileUrl=i.vehiclePic,n.push(u),l.imgsList.push(m),l.filesList=n;case 31:case"end":return r.stop()}}),r)})))()}}},p=m,d=(r("61d1"),r("0bd0"),r("2877")),h=Object(d["a"])(p,t,a,!1,null,"324aa5a4",null);l["default"]=h.exports},"46a5":function(e,l,r){},"61d1":function(e,l,r){"use strict";r("3d49")}}]);