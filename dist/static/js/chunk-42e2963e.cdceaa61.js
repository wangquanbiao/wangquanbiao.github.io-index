(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42e2963e","chunk-2d208d6c","chunk-2d208d6c","chunk-2d208d6c","chunk-2d208d6c","chunk-2d208d6c","chunk-2d208d6c","chunk-2d208d6c"],{a700:function(e,t,r){"use strict";r.d(t,"O",(function(){return a})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return n})),r.d(t,"T",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"K",(function(){return u})),r.d(t,"M",(function(){return d})),r.d(t,"L",(function(){return p})),r.d(t,"N",(function(){return m})),r.d(t,"J",(function(){return f})),r.d(t,"g",(function(){return h})),r.d(t,"i",(function(){return b})),r.d(t,"h",(function(){return v})),r.d(t,"R",(function(){return g})),r.d(t,"P",(function(){return y})),r.d(t,"Q",(function(){return F})),r.d(t,"S",(function(){return L})),r.d(t,"I",(function(){return _})),r.d(t,"F",(function(){return w})),r.d(t,"f",(function(){return C})),r.d(t,"H",(function(){return k})),r.d(t,"G",(function(){return j})),r.d(t,"v",(function(){return x})),r.d(t,"t",(function(){return T})),r.d(t,"s",(function(){return O})),r.d(t,"u",(function(){return R})),r.d(t,"e",(function(){return P})),r.d(t,"z",(function(){return D})),r.d(t,"x",(function(){return $})),r.d(t,"w",(function(){return M})),r.d(t,"y",(function(){return S})),r.d(t,"D",(function(){return N})),r.d(t,"B",(function(){return I})),r.d(t,"A",(function(){return q})),r.d(t,"C",(function(){return V})),r.d(t,"m",(function(){return z})),r.d(t,"k",(function(){return E})),r.d(t,"l",(function(){return A})),r.d(t,"j",(function(){return K})),r.d(t,"E",(function(){return B})),r.d(t,"q",(function(){return W})),r.d(t,"o",(function(){return H})),r.d(t,"n",(function(){return G})),r.d(t,"p",(function(){return J})),r.d(t,"r",(function(){return U}));var o=r("b775");function a(e){return Object(o["a"])({url:"/roadProducts/roadType/roadTypeTree",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/query",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/roadProducts/dept/getDeptRoadInfoByDeptId/".concat(e),method:"get"})}function i(e){return Object(o["a"])({url:"/roadProducts/dept/saveDeptRoadInfo",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/list",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/roadProducts/unMainLinkInfo/list",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/roadProducts/roadType/add",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/roadProducts/roadType/edit",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/roadProducts/roadType/remove/"+e,method:"delete"})}function m(e){return Object(o["a"])({url:"/roadProducts/roadType/info/"+e,method:"get"})}function f(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/list",method:"post",data:e})}function h(e,t,r){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/"+t,method:r,data:e})}function b(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/info/"+e,method:"get"})}function v(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/remove/"+e,method:"DELETE"})}function g(e){return Object(o["a"])({url:"/roadProducts/mainRoadInfo/list",method:"post",data:e})}function y(e,t,r){return Object(o["a"])({url:"/roadProducts/unMainLinkInfo/"+t,method:r,data:e})}function F(e){return Object(o["a"])({url:"/roadProducts/unMainLinkInfo/info/"+e,method:"get"})}function L(e){return Object(o["a"])({url:"/roadProducts/unMainLinkInfo/remove/"+e,method:"DELETE"})}function _(e){return Object(o["a"])({url:"/roadProducts/roadTunnel/list",method:"post",data:e})}function w(e,t,r){return Object(o["a"])({url:"/roadProducts/roadTunnel/"+t,method:r,data:e})}function C(e){return Object(o["a"])({url:"/roadProducts/mainLineRamp/rampDirList",method:"post",data:e})}function k(e){return Object(o["a"])({url:"/roadProducts/roadTunnel/info/"+e,method:"get"})}function j(e){return Object(o["a"])({url:"/roadProducts/roadTunnel/remove/"+e,method:"DELETE"})}function x(e){return Object(o["a"])({url:"/roadProducts/roadBridgeInfo/list",method:"post",data:e})}function T(e){return Object(o["a"])({url:"/roadProducts/roadBridgeInfo/remove/"+e,method:"DELETE"})}function O(e,t,r){return Object(o["a"])({url:"/roadProducts/roadBridgeInfo/"+t,method:r,data:e})}function R(e){return Object(o["a"])({url:"/roadProducts/roadBridgeInfo/info/"+e,method:"get"})}function P(e){return Object(o["a"])({url:"/roadProducts/mainLineRamp/downList",method:"post",data:e})}function D(e){return Object(o["a"])({url:"/roadProducts/RoadCulvertInfo/list",method:"post",data:e})}function $(e){return Object(o["a"])({url:"/roadProducts/RoadCulvertInfo/remove/"+e,method:"DELETE"})}function M(e,t,r){return Object(o["a"])({url:"/roadProducts/RoadCulvertInfo/"+t,method:r,data:e})}function S(e){return Object(o["a"])({url:"/roadProducts/RoadCulvertInfo/info/"+e,method:"get"})}function N(e){return Object(o["a"])({url:"/roadProducts/roadOtherInfo/list",method:"post",data:e})}function I(e){return Object(o["a"])({url:"/roadProducts/roadOtherInfo/remove/"+e,method:"DELETE"})}function q(e,t,r){return Object(o["a"])({url:"/roadProducts/roadOtherInfo/"+t,method:r,data:e})}function V(e){return Object(o["a"])({url:"/roadProducts/roadOtherInfo/info/"+e,method:"get"})}function z(e){return Object(o["a"])({url:"/roadProducts/roadAccessoryInfo/list",method:"post",data:e})}function E(e){return Object(o["a"])({url:"/roadProducts/roadAccessoryInfo/remove/"+e,method:"DELETE"})}function A(e){return Object(o["a"])({url:"/roadProducts/roadAccessoryInfo/info/"+e,method:"get"})}function K(e,t,r){return Object(o["a"])({url:"/roadProducts/roadAccessoryInfo/"+t,method:r,data:e})}function B(e){return Object(o["a"])({url:"/roadProducts/roadProductsOperLog/list",method:"post",data:e})}function W(e){return Object(o["a"])({url:"/roadProducts/roadAreaFacilities/list",method:"post",data:e})}function H(e){return Object(o["a"])({url:"/roadProducts/roadAreaFacilities/remove/"+e,method:"DELETE"})}function G(e,t,r){return Object(o["a"])({url:"/roadProducts/roadAreaFacilities/"+t,method:r,data:e})}function J(e){return Object(o["a"])({url:"/roadProducts/roadAreaFacilities/info/"+e,method:"get"})}function U(e){return Object(o["a"])({url:"/roadProducts/standardization/remove/"+e,method:"DELETE"})}},c032:function(e,t,r){"use strict";r("f38b")},c7ea:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"supplementary"},[r("div",{staticClass:"content"},[r("el-form",{ref:"queryForm",attrs:{model:e.ruleForm,rules:e.rules,inline:!0,"label-width":"auto"}},[r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 补录原因 ")]),r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"补录原因",prop:"mendDataReason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.ruleForm.mendDataReason,callback:function(t){e.$set(e.ruleForm,"mendDataReason",t)},expression:"ruleForm.mendDataReason"}})],1)],1),r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 流程 ")]),r("div",{staticClass:"steps_list"},[r("el-steps",{attrs:{active:e.stepsActive}},[r("el-step",{attrs:{title:"出发"}}),r("el-step",{attrs:{title:"到达"}}),r("el-step",{attrs:{title:"作业"}}),r("el-step",{attrs:{title:"结束"}}),r("el-step",{attrs:{title:"收车"}})],1)],1)]),r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 出发 ")]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"出车时间",prop:"departureDate"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.departureDate,callback:function(t){e.$set(e.ruleForm,"departureDate",t)},expression:"ruleForm.departureDate"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"出车里程",prop:"departureMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.departureMileage,callback:function(t){e.$set(e.ruleForm,"departureMileage",t)},expression:"ruleForm.departureMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否空驶"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.nodeList[0].optNotDrive,callback:function(t){e.$set(e.nodeList[0],"optNotDrive",t)},expression:"nodeList[0].optNotDrive"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.nodeList[0].optNotDrive,callback:function(t){e.$set(e.nodeList[0],"optNotDrive",t)},expression:"nodeList[0].optNotDrive"}},[e._v("否")])],1)],1)],1),r("el-row",[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"备注",prop:""}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.nodeList[0].remark,callback:function(t){e.$set(e.nodeList[0],"remark",t)},expression:"nodeList[0].remark"}})],1)],1),1==e.nodeList[0].optNotDrive?r("div",e._l(e.ruleForm.rescueVehicleList,(function(t,o){return r("div",{key:o+e.itme.id},[r("div",{staticClass:"rescue_vehicle_list",staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticClass:"second_level_title card_title"},[e._v(" 被救援车辆#"+e._s(o+1)+"信息 ")]),0==o?r("div",{staticClass:"btn_style",staticStyle:{height:"30px"},on:{click:e.addRescueVehicleList}},[e._v(" 添加 ")]):r("div",{staticClass:"btn_style",staticStyle:{height:"30px"},on:{click:function(r){return e.delRescueVehicleList(t.tableId)}}},[e._v(" 删除 ")])])]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"车主姓名",prop:"rescueVehicleList."+o+".rescuedName"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.rescuedName,callback:function(r){e.$set(t,"rescuedName",r)},expression:"item.rescuedName"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"车主电话",prop:"rescueVehicleList."+o+".rescuedPhone"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.rescuedPhone,callback:function(r){e.$set(t,"rescuedPhone",r)},expression:"item.rescuedPhone"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"车牌号码",prop:"rescueVehicleList."+o+".rescuedWreckerNumber"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.rescuedWreckerNumber,callback:function(r){e.$set(t,"rescuedWreckerNumber",r)},expression:"item.rescuedWreckerNumber"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"被救援车类型",prop:"rescueVehicleList."+o+".vehicleType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.vehicleType,callback:function(r){e.$set(t,"vehicleType",r)},expression:"item.vehicleType"}},e._l(e.dict.type.qzjy_bjyc_type,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1)})),0):e._e()],1),0==e.nodeList[0].optNotDrive?r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 到达 ")]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"清障类型",prop:"clearanceType"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.clearanceType,callback:function(t){e.$set(e.ruleForm,"clearanceType",t)},expression:"ruleForm.clearanceType"}},[e._v("事故")]),r("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.clearanceType,callback:function(t){e.$set(e.ruleForm,"clearanceType",t)},expression:"ruleForm.clearanceType"}},[e._v("故障")])],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"到达时间",prop:"yddTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"请选择时间"},model:{value:e.ruleForm.yddTime,callback:function(t){e.$set(e.ruleForm,"yddTime",t)},expression:"ruleForm.yddTime"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"到达里程",prop:"arrivedMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.arrivedMileage,callback:function(t){e.$set(e.ruleForm,"arrivedMileage",t)},expression:"ruleForm.arrivedMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否空驶",prop:"",rules:{required:!0,message:"请选择",trigger:"change"}}},[r("el-radio",{attrs:{label:"1"},model:{value:e.nodeList[1].optNotDrive,callback:function(t){e.$set(e.nodeList[1],"optNotDrive",t)},expression:"nodeList[1].optNotDrive"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"},model:{value:e.nodeList[1].optNotDrive,callback:function(t){e.$set(e.nodeList[1],"optNotDrive",t)},expression:"nodeList[1].optNotDrive"}},[e._v("否")])],1)],1)],1),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"路段",prop:"sectionId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择路段"},on:{change:e.changeRoad},model:{value:e.ruleForm.sectionId,callback:function(t){e.$set(e.ruleForm,"sectionId",t)},expression:"ruleForm.sectionId"}},e._l(e.roadList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.roadDesc,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"路段方向",prop:"direction"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择路段方向"},model:{value:e.ruleForm.direction,callback:function(t){e.$set(e.ruleForm,"direction",t)},expression:"ruleForm.direction"}},e._l(e.directionList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.key,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"桩号",prop:"locationType"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.locationType,callback:function(t){e.$set(e.ruleForm,"locationType",t)},expression:"ruleForm.locationType"}},[e._v("默认")]),r("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.locationType,callback:function(t){e.$set(e.ruleForm,"locationType",t)},expression:"ruleForm.locationType"}},[e._v("起止桩号")]),r("el-radio",{attrs:{label:"3"},model:{value:e.ruleForm.locationType,callback:function(t){e.$set(e.ruleForm,"locationType",t)},expression:"ruleForm.locationType"}},[e._v("无桩号")])],1)],1),1==e.ruleForm.locationType?r("el-col",{attrs:{span:6}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"公里",oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.locationKm,callback:function(t){e.$set(e.ruleForm,"locationKm",t)},expression:"ruleForm.locationKm"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"米",oninput:"value=value.replace(/[^0-9\\.]/g,'')"},model:{value:e.ruleForm.locationM,callback:function(t){e.$set(e.ruleForm,"locationM",t)},expression:"ruleForm.locationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1):e._e(),2==e.ruleForm.locationType?r("el-col",{attrs:{span:12}},[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"公里",oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.startLocationKm,callback:function(t){e.$set(e.ruleForm,"startLocationKm",t)},expression:"ruleForm.startLocationKm"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"米",oninput:"value=value.replace(/[^0-9\\.]/g,'')"},model:{value:e.ruleForm.startLocationM,callback:function(t){e.$set(e.ruleForm,"startLocationM",t)},expression:"ruleForm.startLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1),r("el-col",{attrs:{span:2}},[r("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",height:"36px"}},[e._v(" - ")])]),r("el-col",{attrs:{span:10}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"公里",oninput:"value=value.replace(/[^0-9]/g,'')"},model:{value:e.ruleForm.endLocationKm,callback:function(t){e.$set(e.ruleForm,"endLocationKm",t)},expression:"ruleForm.endLocationKm"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-input",{staticClass:"x_w_l",attrs:{placeholder:"米",oninput:"value=value.replace(/[^0-9\\.]/g,'')"},model:{value:e.ruleForm.endLocationM,callback:function(t){e.$set(e.ruleForm,"endLocationM",t)},expression:"ruleForm.endLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1)],1)],1):e._e()],1)],1)],1),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"现场照片",prop:"departureDate"}},[r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("div",[e.nodeList[1].id?r("uploadPhotoVIdeo",{attrs:{filesList:e.nodeList[1].photoList,objParams:{type:1,newStyle:!0,beforeContent:"上传照片",rId:e.nodeList[1].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e(),e.nodeList[1].id?r("uploadPhotoVIdeo",{staticStyle:{"margin-left":"15px"},attrs:{filesList:e.nodeList[1].videoList,objParams:{type:2,atmLimit:1,newStyle:!0,beforeContent:"上传视频",rId:e.nodeList[1].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e()],1),r("p",{staticStyle:{color:"#D01D1D","font-weight":"bold"}},[e._v("请上传到达照片，至少上传一张")])])])],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"备注",prop:"reason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"如有其他救援情况，请在备注处填写"},model:{value:e.nodeList[1].remark,callback:function(t){e.$set(e.nodeList[1],"remark",t)},expression:"nodeList[1].remark"}})],1)],1)],1)],1):e._e(),0==e.nodeList[1].optNotDrive&&0==e.nodeList[0].optNotDrive?r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 作业 ")]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"作业时间",prop:"zyzTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.zyzTime,callback:function(t){e.$set(e.ruleForm,"zyzTime",t)},expression:"ruleForm.zyzTime"}})],1)],1),r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{label:"现场照片",prop:"departureDate"}},[r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("div",[e.nodeList[2].id?r("uploadPhotoVIdeo",{attrs:{filesList:e.nodeList[2].photoList,objParams:{type:1,newStyle:!0,beforeContent:"上传照片",rId:e.nodeList[2].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e(),e.nodeList[2].id?r("uploadPhotoVIdeo",{staticStyle:{"margin-left":"15px"},attrs:{filesList:e.nodeList[2].videoList,objParams:{type:2,atmLimit:1,newStyle:!0,beforeContent:"上传视频",rId:e.nodeList[2].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e()],1),r("p",{staticStyle:{color:"#D01D1D","font-weight":"bold"}},[e._v("注意：本照片需要包含三要素：清障车辆、救援车辆、安控设施")])])])],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"备注",prop:"reason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"如有其他救援情况，请在备注处填写"},model:{value:e.nodeList[2].remark,callback:function(t){e.$set(e.nodeList[2],"remark",t)},expression:"nodeList[2].remark"}})],1)],1)],1)],1):e._e(),0==e.nodeList[0].optNotDrive?r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 结束 ")]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"作业结束时间",prop:"yjsTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.yjsTime,callback:function(t){e.$set(e.ruleForm,"yjsTime",t)},expression:"ruleForm.yjsTime"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"结束里程",prop:"endMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.endMileage,callback:function(t){e.$set(e.ruleForm,"endMileage",t)},expression:"ruleForm.endMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"拖行里程",prop:"trailerMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算无需填写"},model:{value:e.ruleForm.trailerMileage,callback:function(t){e.$set(e.ruleForm,"trailerMileage",t)},expression:"ruleForm.trailerMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"超出里程",prop:"exceedingKm"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算无需填写"},model:{value:e.ruleForm.exceedingKm,callback:function(t){e.$set(e.ruleForm,"exceedingKm",t)},expression:"ruleForm.exceedingKm"}})],1)])],1)],1),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"现场照片",prop:"departureDate"}},[r("div",{staticStyle:{display:"flex","flex-direction":"column"}},[r("div",[e.nodeList[3].id?r("uploadPhotoVIdeo",{attrs:{filesList:e.nodeList[3].photoList,objParams:{type:1,newStyle:!0,beforeContent:"上传照片",rId:e.nodeList[3].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e(),e.nodeList[3].id?r("uploadPhotoVIdeo",{staticStyle:{"margin-left":"15px"},attrs:{filesList:e.nodeList[3].videoList,objParams:{type:2,atmLimit:1,newStyle:!0,beforeContent:"上传视频",rId:e.nodeList[3].id}},on:{returnRes:e._returnRes,returnResDel:e._returnResDel}}):e._e()],1),r("p",{staticStyle:{color:"#D01D1D","font-weight":"bold"}},[e._v("请上传结束照片，至少上传一张")])])])],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"备注",prop:"reason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"如有其他救援情况，请在备注处填写"},model:{value:e.nodeList[3].remark,callback:function(t){e.$set(e.nodeList[3],"remark",t)},expression:"nodeList[3].remark"}})],1)],1)],1),r("div",{staticClass:"rescue_vehicle_list"},[r("div",{staticClass:"second_level_title card_title"},[e._v(" 被救援车辆信息 ")]),r("div",{staticClass:"add_info_btn",on:{click:e.addRescueVehicleList}},[e._v(" 添加 ")]),r("el-row",{staticStyle:{padding:"15px 0"}},[r("el-table",{attrs:{data:e.ruleForm.rescueVehicleList,border:""}},[r("el-table-column",{attrs:{prop:"rescuedName",label:"车主姓名",width:"106",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".rescuedName",rules:[{required:!0,message:"车主姓名不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.rescuedName,callback:function(r){e.$set(t.row,"rescuedName",r)},expression:"scope.row.rescuedName"}})],1)]}}],null,!1,175119425)}),r("el-table-column",{attrs:{prop:"rescuedPhone",label:"车主电话",width:"150",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".rescuedPhone",rules:[{required:!0,message:"车主电话不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.rescuedPhone,callback:function(r){e.$set(t.row,"rescuedPhone",r)},expression:"scope.row.rescuedPhone"}})],1)]}}],null,!1,1501865687)}),r("el-table-column",{attrs:{prop:"rescuedWreckerNumber",label:"车牌号码",width:"110",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".rescuedWreckerNumber",rules:[{required:!0,message:"车牌号码不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.rescuedWreckerNumber,callback:function(r){e.$set(t.row,"rescuedWreckerNumber",r)},expression:"scope.row.rescuedWreckerNumber"}})],1)]}}],null,!1,2730472702)}),r("el-table-column",{attrs:{prop:"vehicleType",label:"被救援车类型",width:"130",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".vehicleType",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.row.vehicleType,callback:function(r){e.$set(t.row,"vehicleType",r)},expression:"scope.row.vehicleType"}},e._l(e.dict.type.qzjy_bjyc_type,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]}}],null,!1,326163726)}),r("el-table-column",{attrs:{prop:"jycType",label:"救援车类型",width:"130",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".jycType",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.row.jycType,callback:function(r){e.$set(t.row,"jycType",r)},expression:"scope.row.jycType"}},e._l(e.dict.type.qzjy_jyclx_type,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]}}],null,!1,3370815704)}),r("el-table-column",{attrs:{prop:"weatherType",label:"天气类型",width:"106",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".weatherType",rules:[{required:!0,message:"请选择",trigger:"change"}]}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.row.weatherType,callback:function(r){e.$set(t.row,"weatherType",r)},expression:"scope.row.weatherType"}},e._l(e.dict.type.qzjy_weather_type,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)]}}],null,!1,1206927396)}),r("el-table-column",{attrs:{prop:"baseCost",label:"基本救援费用(元)",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-row",[r("el-col",{attrs:{span:t.row.isShowReason?8:24}},[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".baseCost",rules:[{required:!0,message:"救援费用不能为空",trigger:"blur"}]}},[r("div",{staticStyle:{display:"flex","flex-wrap":"nowrap"}},[r("el-input",{staticStyle:{width:"62%","margin-right":"5px"},attrs:{placeholder:"请输入"},on:{change:function(r){return e.changeBaseCost(r,t.$index)}},model:{value:t.row.baseCost,callback:function(r){e.$set(t.row,"baseCost",r)},expression:"scope.row.baseCost"}}),r("span",{staticStyle:{flex:"1",color:"#2F7EF5",cursor:"pointer"},on:{click:function(r){return e.getRescueCost(t.row,t.$index)}}},[e._v("获取费用")])],1)])],1),t.row.isShowReason?r("el-col",{attrs:{span:16}},[r("el-form-item",{staticClass:"el_item_line_height",attrs:{"label-width":"60px",label:"修改金额原因",prop:"rescueVehicleList."+t.$index+".changeAmountReason "}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.changeAmountReason,callback:function(r){e.$set(t.row,"changeAmountReason",r)},expression:"scope.row.changeAmountReason"}})],1)],1):e._e()],1)]}}],null,!1,852527788)}),r("el-table-column",{attrs:{prop:"otherCost",label:"其他救援费用(元)",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".otherCost"}},[r("el-input",{attrs:{placeholder:"请输入"},on:{change:function(r){return e.changeOtherCost(r,t.$index)}},model:{value:t.row.otherCost,callback:function(r){e.$set(t.row,"otherCost",r)},expression:"scope.row.otherCost"}})],1)]}}],null,!1,3239996891)}),r("el-table-column",{attrs:{prop:"totalCost",label:"当前车辆合计(元)",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{prop:"rescueVehicleList."+t.$index+".totalCost"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算"},model:{value:t.row.totalCost,callback:function(r){e.$set(t.row,"totalCost",r)},expression:"scope.row.totalCost"}})],1)]}}],null,!1,2430300624)}),r("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.$index?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.delRescueVehicleList(t.row.tableId)}}},[e._v("删除")]):e._e()]}}],null,!1,2768433097)})],1)],1)],1),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"总计",prop:"qzfwf"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算无需填写"},model:{value:e.ruleForm.qzfwf,callback:function(t){e.$set(e.ruleForm,"qzfwf",t)},expression:"ruleForm.qzfwf"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否收取费用",prop:"isChargeFees"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.isChargeFees,callback:function(t){e.$set(e.ruleForm,"isChargeFees",t)},expression:"ruleForm.isChargeFees"}},[e._v("是")]),r("el-radio",{attrs:{label:"2"},model:{value:e.ruleForm.isChargeFees,callback:function(t){e.$set(e.ruleForm,"isChargeFees",t)},expression:"ruleForm.isChargeFees"}},[e._v("否")])],1)],1),2==e.ruleForm.isChargeFees?r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"未收费原因",prop:"notChargeFeesReason"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入未收费原因"},model:{value:e.ruleForm.notChargeFeesReason,callback:function(t){e.$set(e.ruleForm,"notChargeFeesReason",t)},expression:"ruleForm.notChargeFeesReason"}})],1)],1):e._e()],1)],1):e._e(),r("div",{staticClass:"content_card"},[r("div",{staticClass:"card_title"},[e._v(" 收车 ")]),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"收车时间",prop:"collectionDate"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.collectionDate,callback:function(t){e.$set(e.ruleForm,"collectionDate",t)},expression:"ruleForm.collectionDate"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"收车里程",prop:"collectionMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.collectionMileage,callback:function(t){e.$set(e.ruleForm,"collectionMileage",t)},expression:"ruleForm.collectionMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"行驶里程",prop:"totalMileage"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"km"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算无需填写"},model:{value:e.ruleForm.totalMileage,callback:function(t){e.$set(e.ruleForm,"totalMileage",t)},expression:"ruleForm.totalMileage"}})],1)])],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"加油",prop:"refuel"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"升"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.refuel,callback:function(t){e.$set(e.ruleForm,"refuel",t)},expression:"ruleForm.refuel"}})],1)])],1)],1),r("el-row",{staticStyle:{padding:"0 15px"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"通行费",prop:"tollFee"}},[r("div",{staticClass:"departure_mileage",attrs:{"data-unit":"元"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.tollFee,callback:function(t){e.$set(e.ruleForm,"tollFee",t)},expression:"ruleForm.tollFee"}})],1)])],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"textarea_input",staticStyle:{width:"100%"},attrs:{label:"备注",prop:""}},[r("el-input",{attrs:{type:"textarea",placeholder:"如有其他救援情况，请在备注处填写"},model:{value:e.nodeList[4].remark,callback:function(t){e.$set(e.nodeList[4],"remark",t)},expression:"nodeList[4].remark"}})],1)],1)],1),r("div",{staticClass:"rescue_vehicle_list"},[r("div",{staticStyle:{display:"flex"}},[r("div",{staticClass:"second_level_title card_title",staticStyle:{width:"85px"}},[e._v(" 清障记事 ")]),r("div",{staticClass:"btn_style",on:{click:e.getGenerateClearanceRecord}},[e._v(" 点击生成 ")]),r("div",{staticClass:"btn_style",on:{click:e.addGenerateClearanceRecord}},[e._v(" 新增 ")])]),r("el-table",{attrs:{data:e.clearChronicles,border:""}},[r("el-table-column",{attrs:{prop:"processTime",label:"时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.processTime,callback:function(r){e.$set(t.row,"processTime",r)},expression:"scope.row.processTime"}})]}}])}),r("el-table-column",{attrs:{prop:"systemMsg",label:"工作内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.systemMsg,callback:function(r){e.$set(t.row,"systemMsg",r)},expression:"scope.row.systemMsg"}})]}}])}),r("el-table-column",{attrs:{prop:"rescuedName",label:"操作",width:"106",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.$index?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.delGenerateClearanceRecord(t.row.judgeId)}}},[e._v("删除")]):e._e()]}}])})],1)],1)],1)]),r("div",{staticClass:"content_card",staticStyle:{display:"flex","justify-content":"center",padding:"25px 0"}},[r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("关闭")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("queryForm",5)}}},[e._v("提交审核")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("queryForm")}}},[e._v("暂存")])],1)],1)])},a=[],l=r("c7eb"),n=r("5530"),i=r("1da1"),s=r("ade3"),c=(r("4de4"),r("7db0"),r("caad"),r("d81d"),r("14d9"),r("b0c0"),r("e9c4"),r("a9e3"),r("b64b"),r("d3b7"),r("2532"),r("3ca3"),r("159b"),r("ddb0"),r("36fa")),u=r("c49c"),d=r("ac24"),p=r("e984"),m=r("2934"),f={dicts:["qzjy_base_price","qzjy_bjyc_type","qzjy_jyclx_type","qzjy_weather_type"],components:{upload:c["a"],uploadPhotoVIdeo:u["a"]},watch:{"ruleForm.locationType":{deep:!0,handler:function(e,t){this.isWatch&&(this.ruleForm.locationKm=void 0,this.ruleForm.locationM=void 0,this.ruleForm.startLocationKm=void 0,this.ruleForm.startLocationM=void 0,this.ruleForm.endLocationKm=void 0,this.ruleForm.endLocationM=void 0),this.ruleForm.id&&(this.isWatch=!0)}},"ruleForm.departureMileage":{deep:!0,handler:function(e,t){this.ruleForm.totalMileage=(this.ruleForm.collectionMileage?Number(this.ruleForm.collectionMileage):0)-(e?Number(e):0)}},"ruleForm.collectionMileage":{deep:!0,handler:function(e,t){this.ruleForm.totalMileage=(e?Number(e):0)-(this.ruleForm.departureMileage?Number(this.ruleForm.departureMileage):0)}},"ruleForm.endMileage":{deep:!0,handler:function(e,t){this.ruleForm.trailerMileage=(e?Number(e):0)-(this.ruleForm.arrivedMileage?Number(this.ruleForm.arrivedMileage):0),this.ruleForm.exceedingKm=this.ruleForm.trailerMileage-Number(this.dict.type.qzjy_base_price[0].value)>0?this.ruleForm.trailerMileage-Number(this.dict.type.qzjy_base_price[0].value):0}},"ruleForm.arrivedMileage":{deep:!0,handler:function(e,t){this.ruleForm.trailerMileage=(this.ruleForm.endMileage?Number(this.ruleForm.endMileage):0)-(e?Number(e):0),this.ruleForm.exceedingKm=this.ruleForm.trailerMileage-Number(this.dict.type.qzjy_base_price[0].value)>0?this.ruleForm.trailerMileage-Number(this.dict.type.qzjy_base_price[0].value):0}}},data:function(){return{fileSrc:"/prod-api",isWatch:!1,loading:!1,stepsActive:1,roadList:[],directionList:[],nodeList:[{optNotDrive:"0",remark:void 0,rId:void 0,rStatus:1},{optNotDrive:"0",remark:void 0,fileList:[],videoList:[],photoList:[],rId:void 0,rStatus:2},{remark:void 0,fileList:[],videoList:[],photoList:[],rId:void 0,rStatus:3},{remark:void 0,fileList:[],videoList:[],photoList:[],rId:void 0,rStatus:4,isChargeFees:"2",notChargeFeesReason:void 0},{remark:void 0,rId:void 0,rStatus:4}],clearChronicles:[],ruleForm:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({rescueVehicleList:[{rescuedName:void 0,rescuedPhone:void 0,rescuedWreckerNumber:void 0,vehicleType:void 0,jycType:void 0,weatherType:void 0,baseCost:void 0,changeAmountReason:void 0,otherCost:0,totalCost:void 0,oldBaseCost:"",isShowReason:!1,tableId:Date.now()}],mendDataReason:void 0,reason:void 0,departureDate:void 0,departureMileage:void 0,arrivedMileage:void 0,endMileage:void 0,trailerMileage:void 0,exceedingKm:void 0,totalMileage:void 0,optNotDrive:"0",remark:void 0,clearanceType:void 0,direction:void 0,sectionId:void 0,locationType:"1",locationKm:void 0,locationM:void 0,startLocationKm:void 0,startLocationM:void 0,endLocationKm:void 0,endLocationM:void 0,yddTime:void 0,zyzTime:void 0,yjsTime:void 0,collectionDate:void 0,collectionMileage:void 0},"endMileage",void 0),"refuel",void 0),"tollFee",void 0),"qzfwf",void 0),rules:{departureDate:[{required:!0,message:"请选择",trigger:"change"}],departureMileage:[{required:!0,message:"请输入",trigger:"blur"}],arrivedMileage:[{required:!0,message:"请输入",trigger:"blur"}],clearanceType:[{required:!0,message:"请选择",trigger:"change"}],yddTime:[{required:!0,message:"请选择",trigger:"change"}],optNotDrive:[{required:!0,message:"请选择",trigger:"change"}],sectionId:[{required:!0,message:"请选择",trigger:"change"}],direction:[{required:!0,message:"请选择",trigger:"change"}],zyzTime:[{required:!0,message:"请选择",trigger:"change"}],yjsTime:[{required:!0,message:"请选择",trigger:"change"}],collectionDate:[{required:!0,message:"请选择",trigger:"change"}],endMileage:[{required:!0,message:"请输入",trigger:"blur"}],collectionMileage:[{required:!0,message:"请输入",trigger:"blur"}],tollFee:[{required:!0,message:"请输入",trigger:"blur"}],isChargeFees:[{required:!0,message:"请输入",trigger:"blur"}],mendDataReason:[{required:!0,message:"请输入",trigger:"blur"}],totalMileage:[{required:!0,message:"请输入",trigger:"blur"}]},filesList:[]}},mounted:function(){var e=this;new Promise((function(t,r){e.loading=!0,e.getList(t)})).then((function(){e.getData()}))},methods:{conversionType:function(e,t){var r=e;return"string"==typeof t&&(r=String(e)),"number"==typeof t&&(r=Number(e)),e?r:void 0},submitForm:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$refs[e].validate(function(){var e=Object(i["a"])(Object(l["a"])().mark((function e(o){var a,i,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o){e.next=19;break}if(!(t.nodeList[1].fileList.length<=0)){e.next=4;break}return t.$message.warning("请上传到达现场照片"),e.abrupt("return");case 4:if(!(t.nodeList[2].fileList.length<=0)){e.next=7;break}return t.$message.warning("请上传作业现场照片"),e.abrupt("return");case 7:if(!(t.nodeList[3].fileList.length<=0)){e.next=10;break}return t.$message.warning("请上传结束现场照片"),e.abrupt("return");case 10:a=JSON.parse(JSON.stringify(t.ruleForm)),a.status=r,delete a.clearanceRecordList,a.nodeList=t.nodeList.map((function(e){var t=Object(n["a"])({},e);return delete t.photoList,delete t.videoList,t.fileList.map((function(e){e.status&&delete e.status})),t})),a.isMendData=0,a.rescueVehicleList.map((function(e){if(e.jycType||e.weatherType||e.baseCost){var t={jycType:e.jycType,weatherType:e.weatherType,baseCost:e.baseCost,oldBaseCost:e.oldBaseCost,otherCost:e.otherCost,totalCost:e.totalCost,changeAmountReason:e.changeAmountReason||""};e.rescueCost=t,delete e.jycType,delete e.weatherType,delete e.baseCost,delete e.oldBaseCost,delete e.otherService,delete e.totalCost,delete e.changeAmountReason,delete e.isShowReason,delete e.tableId,delete e.otherCost}})),i=Object(p["D"])(a).then((function(e){return 200!=e.code})),s=Object(p["e"])(t.clearChronicles).then((function(e){return 200!=e.code})),Promise.all([i,s]).then((function(e){e.includes(!0)||(t.$message.success("提交成功"),t.$router.go(-1))}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},delGenerateClearanceRecord:function(e){this.clearChronicles=this.clearChronicles.filter((function(t){return t.judgeId!=e}))},addGenerateClearanceRecord:function(){var e={rId:this.ruleForm.id,judgeId:Date.now(),businessId:this.ruleForm.workNumber,processTime:void 0,systemMsg:void 0};this.clearChronicles.push(e)},getGenerateClearanceRecord:function(){var e=this;return Object(i["a"])(Object(l["a"])().mark((function t(){var r,o;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["n"])(e.ruleForm.id);case 2:r=t.sent,o=r.data,e.clearChronicles=e.clearChronicles.filter((function(e){return!e.isSystemGenerated})),o.map((function(t,r){t.isSystemGenerated=!0,t.judgeId=Date.now()+r,e.clearChronicles.push(t)}));case 6:case"end":return t.stop()}}),t)})))()},changeOtherCost:function(e,t){var r=(e?Number(e):0)+(this.ruleForm.rescueVehicleList[t].baseCost?Number(this.ruleForm.rescueVehicleList[t].baseCost):0);this.$set(this.ruleForm.rescueVehicleList[t],"totalCost",r);var o=0;this.ruleForm.rescueVehicleList.map((function(e){o+=e.totalCost?Number(e.totalCost):0})),this.$set(this.ruleForm,"qzfwf",o)},changeBaseCost:function(e,t){var r=(e?Number(e):0)+(this.ruleForm.rescueVehicleList[t].otherCost?Number(this.ruleForm.rescueVehicleList[t].otherCost):0);this.$set(this.ruleForm.rescueVehicleList[t],"totalCost",r);var o=0;this.ruleForm.rescueVehicleList.map((function(e){o+=e.totalCost?Number(e.totalCost):0})),this.$set(this.ruleForm,"qzfwf",o),e!=Number(this.ruleForm.rescueVehicleList[t].oldBaseCost)?this.$set(this.ruleForm.rescueVehicleList[t],"isShowReason",!0):this.$set(this.ruleForm.rescueVehicleList[t],"isShowReason",!1)},getRescueCost:function(e,t){var r=this;return Object(i["a"])(Object(l["a"])().mark((function o(){var a,n,i,s,c;return Object(l["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.vehicleType){o.next=3;break}return r.$message.warning("请先选择被救援车类型"),o.abrupt("return");case 3:if(e.jycType){o.next=6;break}return r.$message.warning("请先选择救援车类型"),o.abrupt("return");case 6:if(e.weatherType){o.next=9;break}return r.$message.warning("请先选择天气类型"),o.abrupt("return");case 9:return r.loading=!0,a={vehicleType:e.vehicleType,jycType:e.jycType,weatherType:e.weatherType,relationId:e.relationId},o.next=13,Object(p["t"])(a);case 13:n=o.sent,i=n.data,s=(i?Number(i):0)+(r.ruleForm.rescueVehicleList[t].otherCost?Number(r.ruleForm.rescueVehicleList[t].otherCost):0),r.$set(r.ruleForm.rescueVehicleList[t],"baseCost",i),r.$set(r.ruleForm.rescueVehicleList[t],"oldBaseCost",i),r.$set(r.ruleForm.rescueVehicleList[t],"isShowReason",!1),r.$set(r.ruleForm.rescueVehicleList[t],"totalCost",s),c=0,r.ruleForm.rescueVehicleList.map((function(e){c+=e.totalCost?Number(e.totalCost):0})),r.$set(r.ruleForm,"qzfwf",c),r.loading=!1;case 24:case"end":return o.stop()}}),o)})))()},delRescueVehicleList:function(e){this.ruleForm.rescueVehicleList=this.ruleForm.rescueVehicleList.filter((function(t){return t.tableId!=e}))},addRescueVehicleList:function(){var e={rescuedName:void 0,rescuedPhone:void 0,rescuedWreckerNumber:void 0,vehicleType:void 0,jycType:void 0,weatherType:void 0,baseCost:void 0,changeAmountReason:void 0,otherCost:0,totalCost:void 0,oldBaseCost:"",isShowReason:!1,tableId:Date.now(),relationId:this.ruleForm.id};this.ruleForm.rescueVehicleList.push(e)},changeRoad:function(e){var t;(this.ruleForm.direction=void 0,e)&&(this.directionList=null===(t=this.roadList.filter((function(t){return t.id==e}))[0])||void 0===t?void 0:t.ldfxList)},_returnResDel:function(e){this.nodeList.map((function(t){t.id==e.rId&&(t.fileList=t.fileList.filter((function(t){return e.id!=t.id})))}))},_returnRes:function(e){this.nodeList.map((function(t){t.id==e.rId&&t.fileList.push(e)}))},getList:function(e){var t=this;return Object(i["a"])(Object(l["a"])().mark((function r(){var o;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(m["l"])({orgId:"",pageNum:1,pageSize:1e3});case 2:o=r.sent,o.rows.forEach((function(e){e.ldfxList=[{key:e.startDirection,value:e.startDirection},{key:e.endDirection,value:e.endDirection}]})),t.roadList=o.rows,e&&e();case 6:case"end":return r.stop()}}),r)})))()},getData:function(){var e=this;return Object(i["a"])(Object(l["a"])().mark((function t(){var r,o,a,i,s;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["v"])(e.$route.query.id);case 2:r=t.sent,o=r.data,e.ruleForm=o,e.nodeList.map((function(t,r){var o=e.ruleForm.nodeList.find((function(e){return e.rStatus==t.rStatus}));o=Object(n["a"])(Object(n["a"])({},t),o),o.photoList=o.fileList.filter((function(t){return t.url=e.fileSrc+t.fileUrl,t.name=t.fileName,1==t.type})),o.videoList=o.fileList.filter((function(t){return t.url=e.fileSrc+t.fileUrl,t.name=t.fileName,2==t.type})),o.rId=o.rId||e.ruleForm.id,o.id=o.id||Object(d["a"])(),o.optNotDrive=0==o.optNotDrive||1==o.optNotDrive?String(o.optNotDrive):"",e.$set(e.nodeList,r,Object(n["a"])(Object(n["a"])({},e.nodeList[r]),o))})),e.stepsActive=Number(e.ruleForm.status),e.ruleForm.sectionId&&(i=e.ruleForm.sectionId,e.directionList=null===(a=e.roadList.filter((function(e){return e.id==i}))[0])||void 0===a?void 0:a.ldfxList),s={rescuedName:void 0,rescuedPhone:void 0,rescuedWreckerNumber:void 0,vehicleType:void 0,jycType:void 0,weatherType:void 0,baseCost:void 0,changeAmountReason:void 0,totalCost:void 0,oldBaseCost:"",isShowReason:!1,tableId:Date.now(),relationId:e.ruleForm.id,otherCost:0},e.ruleForm.rescueVehicleList?e.ruleForm.rescueVehicleList.map((function(t,r){var o=Object(n["a"])({},t);o.rescueCost&&(o=Object(n["a"])(Object(n["a"])({},o),o.rescueCost)),o.vehicleType=o.vehicleType?String(o.vehicleType):"",o=Object(n["a"])(Object(n["a"])({},s),o),o.jycType=e.conversionType(o.jycType,"string")||"",o.weatherType=e.conversionType(o.weatherType,"string")||"",e.$set(e.ruleForm.rescueVehicleList,r,o)})):e.ruleForm.rescueVehicleList=[s],e.ruleForm.clearanceRecordList&&(e.clearChronicles=e.ruleForm.clearanceRecordList.map((function(e,t){return e.isSystemGenerated=!0,e.judgeId=Date.now()+t,e}))),e.ruleForm.isChargeFees=e.conversionType(e.ruleForm.isChargeFees,"string")||"2",e.ruleForm.clearanceType=e.conversionType(e.ruleForm.clearanceType,"string"),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()}}},h=f,b=(r("c032"),r("2877")),v=Object(b["a"])(h,o,a,!1,null,"5dd52c5d",null);t["default"]=v.exports},e984:function(e,t,r){"use strict";r.d(t,"s",(function(){return a})),r.d(t,"D",(function(){return l})),r.d(t,"n",(function(){return n})),r.d(t,"t",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"j",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return p})),r.d(t,"p",(function(){return m})),r.d(t,"q",(function(){return f})),r.d(t,"r",(function(){return h})),r.d(t,"u",(function(){return b})),r.d(t,"v",(function(){return v})),r.d(t,"e",(function(){return g})),r.d(t,"a",(function(){return y})),r.d(t,"A",(function(){return F})),r.d(t,"w",(function(){return L})),r.d(t,"E",(function(){return _})),r.d(t,"d",(function(){return w})),r.d(t,"b",(function(){return C})),r.d(t,"z",(function(){return k})),r.d(t,"l",(function(){return j})),r.d(t,"y",(function(){return x})),r.d(t,"k",(function(){return T})),r.d(t,"m",(function(){return O})),r.d(t,"B",(function(){return R})),r.d(t,"f",(function(){return P})),r.d(t,"o",(function(){return D})),r.d(t,"x",(function(){return $})),r.d(t,"C",(function(){return M}));var o=r("b775");function a(){return Object(o["a"])({url:"/system/dept/list?type=1&isFilter=false",method:"get"})}function l(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/updateData",method:"PUT",data:e})}function n(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/generateClearanceRecord/".concat(e),method:"get"})}function i(e){return Object(o["a"])({url:"/roadProducts/clearanceRescueCost/getCostCount",method:"POST",data:e})}function s(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue_v1/edit",method:"POST",data:e})}function c(e){return Object(o["a"])({url:"/roadProducts/standardization/edit",method:"PUT",data:e})}function u(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/cancel/".concat(e.id),method:"patch",data:{cancelReason:e.cancelReason}})}function d(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/remove?ids="+e,method:"DELETE"})}function p(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/remove",method:"DELETE",data:e})}function m(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/list",method:"post",data:e})}function f(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/query",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/shList ",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/infoByParentId/".concat(e),method:"get"})}function v(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/info/".concat(e),method:"get"})}function g(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/saveClearanceRecord",data:e,method:"post"})}function y(e,t){return Object(o["a"])({url:"/roadProducts/clearanceRescue/".concat(t),method:"post",data:e})}function F(e){return Object(o["a"])({url:"/clearanceRescue/count/getCount",method:"post",data:e})}function L(e){return Object(o["a"])({url:"/roadProducts/invoice/list",method:"post",data:e})}function _(e){return Object(o["a"])({url:"roadProducts/clearanceRescue/updateStatus",method:"post",data:e})}function w(e,t){return Object(o["a"])({url:"/roadProducts/invoice/".concat(t),method:"post",data:e})}function C(e){return Object(o["a"])({url:"/roadProducts/invoice/add",method:"post",data:e})}function k(e){return Object(o["a"])({url:"/roadProducts/invoice/info/".concat(e),method:"get"})}function j(e){return Object(o["a"])({url:"/roadProducts/invoice/edit",method:"post",data:e})}function x(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/gdList",method:"post",data:e})}function T(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/edit",method:"post",data:e})}function O(e){return Object(o["a"])({url:"/roadProducts/workOrderReturn/list",method:"post",data:e})}function R(e){return Object(o["a"])({url:"/roadProducts/clearanceRescue/statAnalysis",method:"post",data:e})}function P(e){return Object(o["a"])({url:"/statistics/qz/statTotalList",method:"post",data:e})}function D(e){return Object(o["a"])({url:"/statistics/qz/statRateList",method:"post",data:e})}function $(e){return Object(o["a"])({url:"/statistics/qz/companyStat",method:"post",data:e})}function M(e){return Object(o["a"])({url:"/statistics/qz/trendAnalysis",method:"post",data:e})}},f38b:function(e,t,r){}}]);