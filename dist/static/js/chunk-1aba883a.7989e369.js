(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aba883a"],{1828:function(t,e,a){"use strict";a("f97e")},7636:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"l_item"},[a("HeaderTitle",{attrs:{title:e.title}}),1==e.type?a("div",{staticClass:"l_content",on:{click:t.openClearList}},[a("div",{staticClass:"lc_item"},[a("div",{staticClass:"cs"},[t._v(" 总"+t._s(e.name)+" ")]),a("div",{staticClass:"number"},[t._v(" "+t._s(t._f("formatNum")(e.topNum))+" "),a("span",[t._v(t._s(e.unit))])])]),a("div",{staticClass:"lc_item"},[a("div",{staticClass:"cs"},[t._v(" 总清障"+t._s(e.name)+" ")]),a("div",{staticClass:"number"},[t._v(" "+t._s(t._f("formatNum")(e.middleNum))+" "),a("span",[t._v(t._s(e.unit))])])]),a("div",{staticClass:"lc_item"},[a("div",{staticClass:"cs"},[t._v(" 总空驶"+t._s(e.name)+" ")]),a("div",{staticClass:"number"},[t._v(" "+t._s(t._f("formatNum")(e.bottomNum))+" "),a("span",[t._v(t._s(e.unit))])])])]):t._e(),2==e.type?a("div",{staticClass:"l_content gl_content"},[a("div",{staticClass:"gl_item",on:{click:function(e){return t.openBar("setOut")}}},[a("span",{staticClass:"totitle"},[t._v(" 10分钟出发率 ")]),a("el-progress",{staticStyle:{margin:"4px 0"},attrs:{type:"circle",width:74,"stroke-width":8,percentage:e.within10MinSetOut?Number(e.within10MinSetOut):0,color:"#165DFF"}})],1),a("div",{staticClass:"gl_item",on:{click:function(e){return t.openBar("arrive")}}},[a("span",{staticClass:"totitle"},[t._v(" 40分钟到达率 ")]),a("el-progress",{staticStyle:{margin:"4px 0"},attrs:{type:"circle",width:74,"stroke-width":8,percentage:e.within40MinReach?Number(e.within40MinReach):0,color:"#14C9C9"}})],1),a("div",{staticClass:"gl_item",on:{click:t.openLine}},[a("span",{staticClass:"totitle"},[t._v(" 平均作业时间 ")]),a("div",{staticClass:"circle_progress",staticStyle:{position:"relative",margin:"4px 0","font-size":"14px","font-weight":"bold"}},[a("el-progress",{attrs:{"show-text":!1,type:"circle",width:74,"stroke-width":8,percentage:100,color:"#fac858"}}),a("span",{staticStyle:{width:"100%","text-align":"center",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}},[t._v(t._s(e.avgJobTime)+"分钟")])],1)])]):t._e()],1)})),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},["form"==t.dialogShow?a("div",[a("vxe-grid",{ref:"table",attrs:{"highlight-hover-row":"",stripe:"",border:"","max-height":"600",loading:t.table.loading,columns:t.columns,data:t.table.datas}})],1):t._e(),"bar"==t.dialogShow?a("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"rate_Bar"}}):t._e(),"line"==t.dialogShow?a("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"average_Line"}}):t._e()])],2)},i=[],r=a("c7eb"),l=a("5530"),o=a("1da1"),s=(a("4de4"),a("d81d"),a("14d9"),a("b0c0"),a("d3b7"),a("39f3")),c=a("313e"),m=a("e984"),p=a("2934"),u={props:{info:{type:Object,default:function(){return{}}},formInline:{type:Object,default:function(){return{}}},query:{type:Object,default:function(){return{}}}},components:{HeaderTitle:s["a"]},data:function(){return{allCompanyList:[],dialogShow:null,list:[],dialogVisible:!1,table:{loading:!0,page:{total:0,perfect:!0},datas:[]},columns:[{title:"清障救援情况",align:"center",children:[{title:"公司名称",field:"companyName",align:"center"},{title:"清障救援次数",align:"center",children:[{title:"总次数",field:"totalCnt",align:"center"},{title:"总清障次数",align:"center",field:"normalCnt"},{title:"总空驶次数",align:"center",field:"abnormalCnt"}]},{title:"清障救援金额",align:"center",children:[{title:"总金额",align:"center",field:"totalAmt"},{title:"总清障金额",align:"center",field:"normalAmt"},{title:"总空驶金额",align:"center",field:"abnormalAmt"}]},{title:"清障救援作业里程",align:"center",children:[{title:"总里程",align:"center",field:"totalMile"},{title:"总清障里程",align:"center",field:"normalMile"},{title:"总空驶里程",align:"center",field:"abnormalMile"}]}]}]}},watch:{info:{handler:function(t){var e=[{type:1,title:"清障救援次数",unit:"次",name:"次数",topNum:t.totalCnt||0,middleNum:t.normalCnt||0,bottomNum:t.abnormalCnt||0,topHB:t.totalCntMOM||0,middleHB:t.normalCntMOM||0,bottomHB:t.abnormalCntMOM||0},{type:1,title:"清障救援金额",unit:"元",name:"金额",topNum:t.totalAmt||0,middleNum:t.normalAmt||0,bottomNum:t.abnormalAmt||0,topHB:t.totalAmtMOM||0,middleHB:t.normalAmtMOM||0,bottomHB:t.abnormalAmtMOM||0},{type:1,title:"清障救援作业里程",unit:"km",name:"里程",topNum:t.totalMile||0,middleNum:t.normalMile||0,bottomNum:t.abnormalMile||0,topHB:t.totalMileMOM||0,middleHB:t.normalMileMOM||0,bottomHB:t.abnormalMileMOM||0},{type:2,title:"清障救援服务效率概览",within10MinSetOut:t.within10MinSetOut||0,within40MinReach:t.within40MinReach||0,avgJobTime:t.avgJobTime||0}];this.list=e},deep:!0}},methods:{openClearList:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogShow="form",t.dialogVisible=!0,t.table.loading=!0,e.next=5,Object(m["f"])(Object(l["a"])({},t.query)).then((function(e){t.table.datas=e.data}));case 5:t.table.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},openBar:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){var n,i,s,p,u,d;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e,i=null,s=[],p=[],u="",d={},"arrive"!=t){a.next=14;break}return a.next=9,Object(m["o"])(Object(l["a"])(Object(l["a"])({},e.query),{},{isArrivalRate:!0}));case 9:i=a.sent,d=Object(l["a"])(Object(l["a"])({},e.query),{},{isArrivalRate:!0}),u="到达率",a.next=20;break;case 14:if("setOut"!=t){a.next=20;break}return a.next=17,Object(m["o"])(Object(l["a"])(Object(l["a"])({},e.query),{},{isDepartureRate:!0}));case 17:i=a.sent,u="出发率",d=Object(l["a"])(Object(l["a"])({},e.query),{},{isDepartureRate:!0});case 20:i.data.map((function(t){s.push(t.name),p.push(t.data)})),e.dialogShow="bar",e.dialogVisible=!0,e.$nextTick((function(){var t=document.getElementById("rate_Bar"),e=c["init"](t),a={xAxis:{type:"category",data:s,axisLabel:{rotate:40},triggerEvent:!0},yAxis:{type:"value"},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{name:u,data:p,type:"bar",barWidth:20}]};e.setOption(a),e.off("click"),e.on("click",function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(i){var o,s,c,p,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("xAxis"!=i.componentType||null!==(o=n.query)&&void 0!==o&&o.companyId){t.next=11;break}return s=[],c=[],p=n.allCompanyList.filter((function(t){return t.deptName==i.value})),t.next=6,Object(m["o"])(Object(l["a"])(Object(l["a"])({},d),{},{companyId:p[0].deptId}));case 6:u=t.sent,u.data.map((function(t){s.push(t.name),c.push(t.data)})),a.xAxis.data=s,a.series[0].data=c,e.setOption(a);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 24:case"end":return a.stop()}}),a)})))()},openLine:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a,n,i,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,n=[],i=[],t.dialogShow="line",t.dialogVisible=!0,e.next=7,Object(m["o"])(Object(l["a"])(Object(l["a"])({},t.query),{},{isAvgOperationTime:!0}));case 7:s=e.sent,s.data.map((function(t){n.push(t.name),i.push(t.data)})),t.$nextTick((function(){var t=document.getElementById("average_Line"),e=c["init"](t),s={xAxis:{type:"category",data:n,axisLabel:{rotate:40},triggerEvent:!0},yAxis:{type:"value"},legend:{},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{name:"平均作业时间",data:i,type:"line"}]};e.setOption(s),e.off("click"),e.on("click",function(){var t=Object(o["a"])(Object(r["a"])().mark((function t(n){var i,o,c,p,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("xAxis"!=n.componentType||null!==(i=a.query)&&void 0!==i&&i.companyId){t.next=11;break}return o=[],c=[],p=a.allCompanyList.filter((function(t){return t.deptName==n.value})),t.next=6,Object(m["o"])(Object(l["a"])(Object(l["a"])({},a.query),{},{isAvgOperationTime:!0,companyId:p[0].deptId}));case 6:u=t.sent,u.data.map((function(t){o.push(t.name),c.push(t.data)})),s.xAxis.data=o,s.series[0].data=c,e.setOption(s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 10:case"end":return e.stop()}}),e)})))()},handleGoTo:function(t){this.$router.push({path:"/clearanceRescue/query",query:{startTime:this.formInline.startTime,endTime:this.formInline.endTime,timeType:this.formInline.timeType,type:t}})}},mounted:function(){var t=this;Object(p["j"])().then((function(e){t.allCompanyList=e.data}))}},d=u,f=(a("1828"),a("2877")),b=Object(f["a"])(d,n,i,!1,null,"6428d68c",null);e["default"]=b.exports},bb42:function(t,e,a){"use strict";a("f2c9")},cdaa:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"params"},[a("el-form",{attrs:{inline:!0,model:t.formInline}},[a("el-row",[a("el-col",{attrs:{span:5}},[t.isPower?a("el-form-item",{attrs:{"label-width":"100px",label:"公司类型",prop:"companyType"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择公司"},on:{change:t.selectOrgType},model:{value:t.formInline.companyType,callback:function(e){t.$set(t.formInline,"companyType",e)},expression:"formInline.companyType"}},t._l(t.companyTypeList,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1):t._e()],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择运营公司"},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:""}},[a("ParamsCard",{on:{parentQueryFn:t.getData}})],1)],1)],1)],1)],1),a("div",{staticClass:"topItem_list"},[a("TopItem",{attrs:{info:t.info,formInline:t.formInline,query:t.query}})],1),a("div",{staticClass:"content"},[a("CenterContent",{attrs:{info:t.info,query:t.query}})],1)])},i=[],r=a("c7eb"),l=a("1da1"),o=a("c1df"),s=a.n(o),c=a("2934"),m=a("e984"),p=a("f60e"),u=a("7636"),d=a("da844"),f={components:{ParamsCard:p["a"],TopItem:u["default"],CenterContent:d["default"]},data:function(){return{query:{},info:{},isPower:!1,formInline:{companyType:"",companyId:"",date:s()(new Date).format("YYYY"),month:s()(new Date).format("MM"),timeType:"MONTH"},depList:[],companyTypeList:null}},mounted:function(){var t=this;this.getDptData(),this.getData();var e=[100,101,102,103].indexOf(this.$store.getters.userInfo.dept.type);-1!=e?Object(c["j"])().then((function(e){t.depList=e.data})):this.isPower=!0},methods:{selectOrgType:function(t){var e=this;return Object(l["a"])(Object(r["a"])().mark((function a(){var n,i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.formInline.companyId=null,a.next=3,Object(c["h"])({ancestors:t,status:0,type:1});case 3:n=a.sent,i=n.data,e.depList=i;case 6:case"end":return a.stop()}}),a)})))()},getDptData:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["h"])({parentId:100,status:0});case 2:a=e.sent,t.companyTypeList=a.data;case 4:case"end":return e.stop()}}),e)})))()},onSubmit:function(){this.getData()},getData:function(t){var e=this;return Object(l["a"])(Object(r["a"])().mark((function a(){var n,i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={},n.companyId=e.formInline.companyId,n.companyType=102==e.formInline.companyType?2:101==e.formInline.companyType?1:"",n.timeType="MONTH",t&&"CUSTOM"==t.timeType?(n.timeType=t.timeType,n.startTime=t.startTime+" 00:00:00",n.endTime=t.endTime+" 23:59:59",e.formInline.startTime=t.startTime,e.formInline.endTime=t.endTime):t&&"CUSTOM"!=t.timeType&&(n.timeType=t.timeType),e.formInline.timeType=(null===t||void 0===t?void 0:t.timeType)||e.formInline.timeType,a.next=8,Object(m["B"])(n);case 8:i=a.sent,e.info=i.data,e.query=n;case 11:case"end":return a.stop()}}),a)})))()}}},b=f,y=(a("bb42"),a("2877")),h=Object(y["a"])(b,n,i,!1,null,"3dec345d",null);e["default"]=h.exports},f2c9:function(t,e,a){},f97e:function(t,e,a){}}]);