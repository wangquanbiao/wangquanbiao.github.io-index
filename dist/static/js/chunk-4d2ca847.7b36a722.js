(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2ca847"],{6396:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],staticClass:"app-container"},[n("div",{staticClass:"params"},[n("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:"公司类型",prop:"companyType"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.depTypeChange},model:{value:t.companyType,callback:function(e){t.companyType=e},expression:"companyType"}},t._l(t.depType,(function(t){return n("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),n("el-form-item",{attrs:{label:"公司名称",prop:"companyId"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return n("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("查询")])],1),n("el-form-item",[n("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1),n("el-row",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportReport()}}},[t._v("导出报表"),n("i",{staticClass:"el-icon-arrow-right"})])],1)],1),n("div",[n("vxe-grid",{staticClass:"mytable-scrollbar",attrs:{border:"",resizable:"","auto-resize":"","max-height":"800",columns:t.columns,data:t.table.datas},on:{"page-change":t.handlePageChange},scopedSlots:t._u([{key:"option",fn:function(e){var a=e.row;return[n("span",{staticStyle:{cursor:"pointer",color:"#189dfe"},on:{click:function(e){return t.detailsView(a)}}},[t._v("详情")])]}}])})],1)])},r=[],o=n("5530"),i=n("c7eb"),s=n("1da1"),c=(n("caad"),n("14d9"),n("a434"),n("7dec")),u=n("2934"),l={data:function(){return{isShow:!1,formInline:{companyType:"",companyId:""},companyType:null,depType:[],depList:[],table:{loading:!1,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{title:"公司名称",field:"companyDesc",align:"center"},{title:"部门/大队数量",field:"ddCnt",align:"center"},{title:"路网运行保障队数量",field:"xcCnt",align:"center"},{title:"清障服务站点数量",field:"qzCnt",align:"center"},{title:"操作",slots:{default:"option"},align:"center",width:"150"}]}},watch:{"formInline.resource":{handler:function(t){3!=t&&(this.formInline.date=[])}}},mounted:function(){this.getDptData(),this.getData()},methods:{detailsView:function(t){this.$router.push({path:"/organizationManagement/organizational/information",query:{companyDesc:t.companyDesc}})},depTypeChange:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var a;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=3;break}return e.formInline.companyType="",n.abrupt("return");case 3:return e.formInline.companyType=102==t?2:1,n.next=6,Object(u["h"])({parentId:t,status:0});case 6:a=n.sent,e.depList=a.data;case 8:case"end":return n.stop()}}),n)})))()},returnData:function(){this.table.loading=!0,this.companyType=null,this.formInline.companyType=null,this.formInline.companyId=null,this.formInline.deptId=null,this.isShow&&(this.columns.splice(1,1),this.isShow=!1),this.getData()},colspanMethod:function(t){var e=t.row,n=t.$rowIndex,a=t.column,r=t.data,o=["companyDesc","orgDesc"],i=e[a.property];if(i&&o.includes(a.property)){var s=r[n-1],c=r[n+1];if(s&&s[a.property]==i)return{rowspan:0,colspan:0};var u=1;while(c&&c[a.property]==i)c=r[++u+n];if(u>1)return{rowspan:u,colspan:1}}},tableCellStyle:function(t){var e=t.row,n=t.column,a=(t.rowIndex,t.columnIndex),r={};return 0!=a||"companyDesc"!=n.field||this.isShow||"总计"==e.companyDesc||(r.color="#1890ff",r.cursor="pointer"),r},exportReport:function(){this.table.loading=!0;var t=Object(o["a"])({},this.formInline);this.download("/roadProducts/businessReport/exportStatDept",Object(o["a"])({},t),"机构报表_".concat((new Date).getTime(),".xlsx")),this.table.loading=!1},changeTJSJ:function(t){3!=t&&(this.formInline.date=[])},getDptData:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["h"])({parentId:100,status:0});case 2:n=e.sent,t.depType=n.data;case 4:case"end":return e.stop()}}),e)})))()},resetForm:function(t){this.returnData()},handlePageChange:function(t){var e=t.currentPage,n=t.pageSize;this.table.page.currentPage=e,this.table.page.pageSize=n,this.getData()},getData:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var n,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.table.loading=!0,n=Object(o["a"])({},t.formInline),e.next=4,Object(c["d"])(n);case 4:a=e.sent,t.table.datas=a.data,t.table.loading=!1;case 7:case"end":return e.stop()}}),e)})))()}}},d=l,p=(n("acb1"),n("2877")),f=Object(p["a"])(d,a,r,!1,null,"37c14ed7",null);e["default"]=f.exports},"7dec":function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"m",(function(){return o})),n.d(e,"l",(function(){return i})),n.d(e,"h",(function(){return s})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"k",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return h}));var a=n("b775");function r(t){return Object(a["a"])({url:"/roadProducts/businessReport/listLWXCReport",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/roadProducts/businessReport/listSLSGReport",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/roadProducts/businessReport/listQZJYReport",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/roadProducts/businessReport/statRoadAssetCount",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/roadProducts/businessReport/statRoadMileage",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/roadProducts/businessReport/statVehicleCount",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/roadProducts/businessReport/statVehicleAgeAndMileage",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/roadProducts/businessReport/statPerson",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/roadProducts/businessReport/statDept",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/roadProducts/businessReport/listPBCXQReport",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/roadProducts/businessReport/listPBCSLReport",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/roadProducts/businessReport/statRoadAccessory",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/roadProducts/mainRoadInfo/list",method:"post",data:t})}},acb1:function(t,e,n){"use strict";n("f405")},f405:function(t,e,n){}}]);