(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d97c064"],{"6db9":function(t,e,n){},c1ec:function(t,e,n){"use strict";n("6db9")},c453:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"params"},[n("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:"清障车牌号",prop:"wreckerNumber"}},[n("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:t.formInline.wreckerNumber,callback:function(e){t.$set(t.formInline,"wreckerNumber",e)},expression:"formInline.wreckerNumber"}})],1),n("el-form-item",{attrs:{label:"所属公司",prop:"companyId"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择运营公司"},model:{value:t.formInline.companyId,callback:function(e){t.$set(t.formInline,"companyId",e)},expression:"formInline.companyId"}},t._l(t.depList,(function(t){return n("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("查询")])],1),n("el-form-item",[n("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1),n("div",[n("vxe-grid",{attrs:{"highlight-hover-row":"",stripe:"","auto-resize":"","max-height":"600","pager-config":t.table.page,loading:t.table.loading,columns:t.columns,data:t.table.datas},on:{"page-change":t.handlePageChange},scopedSlots:t._u([{key:"rescuedWreckerNumber",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.rescueVehicleList?n.rescueVehicleList.map((function(t){return t.rescuedWreckerNumber})).join(""):"")+" ")]}},{key:"statusName",fn:function(e){var r=e.row;return["已结束"==r.statusName?n("div",[t._v(" 作业结束 ")]):n("div",[t._v(" "+t._s(r.statusName)+" ")])]}},{key:"option",fn:function(e){var r=e.row;return[n("div",{staticClass:"btn-group"},[n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"primary"},on:{click:function(e){return t.toDel(r)}}},[t._v("取消")]),n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{type:"primary"},on:{click:function(e){return t.handleDetail(r)}}},[t._v("详情")]),n("el-button",{staticStyle:{width:"61px",padding:"7px"},attrs:{icon:"el-icon-edit",type:"success"},on:{click:function(e){return t.toEdit(r)}}},[t._v(" 修改")])],1)]}}])})],1)])},a=[],c=n("c7eb"),u=n("1da1"),o=n("5530"),i=(n("d81d"),n("14d9"),n("e984")),s=n("2934"),d=(n("7ded"),n("2f62")),l={name:"ClearanceList",data:function(){return{formInline:{companyId:"",wreckerNumber:""},depList:[],stateList:[],table:{loading:!1,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{title:"公司名称",field:"company",align:"center"},{title:"清障车号",field:"wreckerNumber",align:"center"},{title:"司机",field:"driver",align:"center"},{title:"清障人员",field:"personnel",align:"center"},{title:"清障路段",field:"section",align:"center"},{title:"被清理车辆",slots:{default:"rescuedWreckerNumber"},align:"center"},{title:"清障出车时间",field:"departureDate",align:"center"},{title:"清障服务费",field:"qzfwf",align:"center"},{title:"状态",slots:{default:"statusName"},align:"center"},{title:"操作",slots:{default:"option"},align:"center",width:"200px"}]}},computed:Object(o["a"])(Object(o["a"])({},Object(d["d"])({userInfo:function(t){return t.user.userInfo}})),{},{roleKey:function(){var t=!1;return this.userInfo.roles.map((function(e){("zdz"==e.roleKey||e.admin)&&(t=!0)})),t}}),mounted:function(){this.getDptData(),this.getData(),this.getstateList()},methods:{getDptData:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["j"])();case 2:n=e.sent,t.depList=n.data;case 4:case"end":return e.stop()}}),e)})))()},getstateList:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["k"])({dictType:"qzjy_status"});case 2:n=e.sent,t.stateList=n.rows;case 4:case"end":return e.stop()}}),e)})))()},handleDetail:function(t){this.$router.push({path:"/clearanceRescue/clearanceDetails",query:{id:t.id}})},toDel:function(t){var e=this;this.$confirm("此操作将取消".concat(t.workNumber,"该工单, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$prompt("请填写取消原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(t){if(!t)return"取消原因不能为空"}}).then((function(n){var r=n.value;e.setDel(t,r)})).catch((function(){}))})).catch((function(){}))},setDel:function(t,e){var n=this;return Object(u["a"])(Object(c["a"])().mark((function r(){var a;return Object(c["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(i["c"])({id:t.id,cancelReason:e});case 2:a=r.sent,200==a.code&&(n.$message({type:"success",message:"已取消!"}),n.getData());case 4:case"end":return r.stop()}}),r)})))()},toEdit:function(t){this.$router.push({path:"/clearanceRescue/clearanceReport",query:{id:t.id}})},resetForm:function(t){this.$refs[t].resetFields()},handlePageChange:function(t){var e=t.currentPage,n=t.pageSize;this.table.page.currentPage=e,this.table.page.pageSize=n,this.getData()},getData:function(){var t=this;return Object(u["a"])(Object(c["a"])().mark((function e(){var n,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.table.loading=!0,n=Object(o["a"])(Object(o["a"])({},t.formInline),{},{pageNum:t.table.page.currentPage,pageSize:t.table.page.pageSize}),e.next=4,Object(i["p"])(n);case 4:r=e.sent,t.table.datas=r.rows,t.table.page.total=r.total,t.table.loading=!1;case 8:case"end":return e.stop()}}),e)})))()}}},f=l,p=(n("c1ec"),n("2877")),m=Object(p["a"])(f,r,a,!1,null,"7bfe5bf6",null);e["default"]=m.exports},e984:function(t,e,n){"use strict";n.d(e,"s",(function(){return a})),n.d(e,"D",(function(){return c})),n.d(e,"n",(function(){return u})),n.d(e,"t",(function(){return o})),n.d(e,"g",(function(){return i})),n.d(e,"j",(function(){return s})),n.d(e,"c",(function(){return d})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return m})),n.d(e,"r",(function(){return b})),n.d(e,"u",(function(){return h})),n.d(e,"v",(function(){return g})),n.d(e,"e",(function(){return j})),n.d(e,"a",(function(){return O})),n.d(e,"A",(function(){return v})),n.d(e,"w",(function(){return P})),n.d(e,"E",(function(){return w})),n.d(e,"d",(function(){return y})),n.d(e,"b",(function(){return k})),n.d(e,"z",(function(){return R})),n.d(e,"l",(function(){return x})),n.d(e,"y",(function(){return D})),n.d(e,"k",(function(){return I})),n.d(e,"m",(function(){return N})),n.d(e,"B",(function(){return z})),n.d(e,"f",(function(){return L})),n.d(e,"o",(function(){return _})),n.d(e,"x",(function(){return S})),n.d(e,"C",(function(){return C}));var r=n("b775");function a(){return Object(r["a"])({url:"/system/dept/list?type=1&isFilter=false",method:"get"})}function c(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/updateData",method:"PUT",data:t})}function u(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/generateClearanceRecord/".concat(t),method:"get"})}function o(t){return Object(r["a"])({url:"/roadProducts/clearanceRescueCost/getCostCount",method:"POST",data:t})}function i(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue_v1/edit",method:"POST",data:t})}function s(t){return Object(r["a"])({url:"/roadProducts/standardization/edit",method:"PUT",data:t})}function d(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/cancel/".concat(t.id),method:"patch",data:{cancelReason:t.cancelReason}})}function l(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/remove?ids="+t,method:"DELETE"})}function f(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/remove",method:"DELETE",data:t})}function p(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/list",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/query",method:"post",data:t})}function b(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/shList ",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/infoByParentId/".concat(t),method:"get"})}function g(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/info/".concat(t),method:"get"})}function j(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/saveClearanceRecord",data:t,method:"post"})}function O(t,e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/".concat(e),method:"post",data:t})}function v(t){return Object(r["a"])({url:"/clearanceRescue/count/getCount",method:"post",data:t})}function P(t){return Object(r["a"])({url:"/roadProducts/invoice/list",method:"post",data:t})}function w(t){return Object(r["a"])({url:"roadProducts/clearanceRescue/updateStatus",method:"post",data:t})}function y(t,e){return Object(r["a"])({url:"/roadProducts/invoice/".concat(e),method:"post",data:t})}function k(t){return Object(r["a"])({url:"/roadProducts/invoice/add",method:"post",data:t})}function R(t){return Object(r["a"])({url:"/roadProducts/invoice/info/".concat(t),method:"get"})}function x(t){return Object(r["a"])({url:"/roadProducts/invoice/edit",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/gdList",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/edit",method:"post",data:t})}function N(t){return Object(r["a"])({url:"/roadProducts/workOrderReturn/list",method:"post",data:t})}function z(t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/statAnalysis",method:"post",data:t})}function L(t){return Object(r["a"])({url:"/statistics/qz/statTotalList",method:"post",data:t})}function _(t){return Object(r["a"])({url:"/statistics/qz/statRateList",method:"post",data:t})}function S(t){return Object(r["a"])({url:"/statistics/qz/companyStat",method:"post",data:t})}function C(t){return Object(r["a"])({url:"/statistics/qz/trendAnalysis",method:"post",data:t})}}}]);