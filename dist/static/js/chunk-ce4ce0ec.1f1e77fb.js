(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce4ce0ec"],{"1e22":function(e,t,a){},"25d9":function(e,t,a){"use strict";a("1e22")},"4fadc":function(e,t,a){"use strict";var r=a("23e7"),n=a("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return n(e)}})},"6f53":function(e,t,a){"use strict";var r=a("83ab"),n=a("d039"),i=a("e330"),s=a("e163"),o=a("df75"),l=a("fc6a"),c=a("d1e7").f,u=i(c),d=i([].push),m=r&&n((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),p=function(e){return function(t){var a,n=l(t),i=o(n),c=m&&null===s(n),p=i.length,f=0,h=[];while(p>f)a=i[f++],r&&!(c?a in n:u(n,a))||d(h,e?[a,n[a]]:n[a]);return h}};e.exports={entries:p(!0),values:p(!1)}},7672:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"单位名称",prop:"companyDesc"}},[a("el-select",{attrs:{placeholder:"请选择单位名称",clearable:""},model:{value:e.formInline.companyId,callback:function(t){e.$set(e.formInline,"companyId",t)},expression:"formInline.companyId"}},e._l(e.deplist,(function(e){return a("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),a("el-form-item",{attrs:{label:"年份",prop:"companyDesc"}},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"请选择","picker-options":e.yearPickerOptions},on:{change:e.yearChange},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),a("el-form-item",{attrs:{label:"月份",prop:"companyDesc"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"请选择","picker-options":e.pickerOptions},on:{change:e.monthChange},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[e._v("查询")])],1)],1),a("div",{staticStyle:{width:"100%"}},[a("vxe-grid",{attrs:{"highlight-hover-row":"",border:"",stripe:"","auto-resize":!0,"max-height":"700",loading:e.table.loading,columns:e.columns,data:e.table.datas},scopedSlots:e._u([{key:"option",fn:function(t){var r=t.row;return[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"click-sapn",on:{click:function(t){return e.handleDetail(r)}}},[e._v("查看")])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"click-sapn",on:{click:function(t){return e.toPages(r)}}},[e._v("打印")])]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"click-sapn",on:{click:function(t){return e.downloadDoc(r)}}},[e._v("导出")])])],1)]}},{key:"statistical",fn:function(t){var r=t.row;return[a("span",{staticClass:"click-sapn",on:{click:function(t){return e.lookUp(r)}}},[e._v("查看")])]}}])})],1)],1)},n=[],i=a("c7eb"),s=a("5530"),o=a("1da1"),l=(a("99af"),a("d81d"),a("14d9"),a("fb6a"),a("d3b7"),a("159b"),a("2934")),c=a("c1df"),u=a.n(c),d={data:function(){var e=this;return{yearPickerOptions:{disabledDate:function(e){var t=new Date;return e.getTime()>t.getTime()}},formInline:{companyId:null,timeType:null,statDateStr:null,isReport:!0},deplist:[],table:{loading:!1,page:{total:0,align:"left",layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{type:"seq",width:100,title:"序号",align:"center"},{field:"deptName",title:"单位名称",align:"center",width:250},{field:"date",title:"日期",align:"center",width:250},{field:"title",title:"标题",align:"center"},{title:"月统计表",slots:{default:"statistical"},align:"center",width:250},{title:"操作",slots:{default:"option"},align:"center",width:250}],year:u()((new Date).getTime()-2592e6).format("yyyy"),month:u()((new Date).getTime()-2592e6).format("yyyy-MM"),pickerOptions:{disabledDate:function(t){if(e.year){var a=new Date(e.year).getFullYear(),r=t.getFullYear();return r!==a}}}}},mounted:function(){var e=this;Object(l["j"])().then((function(t){e.deplist=t.data})),this.getData(),this.formInline.timeType="MONTH"},methods:{getData:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.table.loading=!0,t.next=3,Object(l["j"])({deptId:e.formInline.companyId}).then((function(t){var a=[];if(e.year&&(e.timeType="year",e.formInline.statDateStr=e.year,a=[e.year,1,2,3,4,5,6,7,8,9,10,11,12]),e.month&&(e.timeType="month",e.formInline.statDateStr=e.month,a=e.month.split("-")),0==e.$store.getters.userInfo.dept.type||99==e.$store.getters.userInfo.dept.deptId){var r=Object(s["a"])(Object(s["a"])({},t.data[0]),{},{deptName:"集团",deptId:0});t.data.unshift(r)}var n=[],i=[{month:"一月",id:"01"},{month:"二月",id:"02"},{month:"三月",id:"03"},{month:"四月",id:"04"},{month:"五月",id:"05"},{month:"六月",id:"06"},{month:"七月",id:"07"},{month:"八月",id:"08"},{month:"九月",id:"09"},{month:"十月",id:"10"},{month:"十一月",id:"11"},{month:"十二月",id:"12"}];t.data.forEach((function(r,o){if(r.date=e.formInline.statDateStr,e.year&&!e.month){var l=t.data.slice(o,o+1);i.map((function(e,t){n.push(Object(s["a"])(Object(s["a"])({},l[0]),{},{title:a[0]+"年"+e.id+"月清障救援情况月报表"}))}))}else r.title=a[0]+"年"+a[1]+"月清障救援情况月报表"})),e.year&&!e.month?e.table.datas=n:e.table.datas=t.data,e.table.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()},handleQuery:function(){this.getData()},handleDetail:function(e){var t=null;if(this.year&&!this.month){var a=e.title.slice(0,4),r=e.title.slice(5,7);t=a+"-"+r}else t=e.date;this.$router.push({path:"/clearanceRescue/MonthReport/print?companyId=".concat(e.deptId,"&date=").concat(t,"&status=0&companyName=").concat(e.deptName)})},toPages:function(e){var t=null;if(this.year&&!this.month){var a=e.title.slice(0,4),r=e.title.slice(5,7);t=a+"-"+r}else t=e.date;this.$router.push({path:"/clearanceRescue/MonthReport/print?companyId=".concat(e.deptId,"&date=").concat(t,"&status=1&companyName=").concat(e.deptName)})},downloadDoc:function(e){var t=Object(s["a"])(Object(s["a"])({},this.formInline),{},{companyId:e.deptId});if(this.year&&!this.month){var a=e.title.slice(0,4),r=e.title.slice(5,7);t.timeType="MONTH",t.statDateStr=a+"-"+r}this.download("roadProducts/clearanceRescue/export",Object(s["a"])({},t),"清障救援信息.xlsx")},lookUp:function(e){var t=null;if(this.year&&!this.month){var a=e.title.slice(0,4),r=e.title.slice(5,7);t=a+"-"+r}else t=e.date;this.$router.push({path:"/clearanceRescue/MonthReport/monthStatist?companyId=".concat(e.deptId,"&date=").concat(t,"&companyName=").concat(e.deptName)})},yearChange:function(e){this.month=null,this.formInline.timeType="YEAR",this.formInline.statDateStr=e},monthChange:function(e){this.formInline.timeType="MONTH",this.formInline.statDateStr=e}}},m=d,p=(a("25d9"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,"1764568f",null);t["default"]=f.exports},"7fda":function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-tabs",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:monthReport"],expression:"['clearanceRescue:query:monthReport']"}],on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"清障信息",name:"qzlb"}}),r("el-tab-pane",{attrs:{label:"清障月报",name:"qzyb"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"qzlb"==e.activeName,expression:"activeName == 'qzlb'"}]},[r("div",{staticClass:"params"},[r("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",{attrs:{label:"",prop:"companyId"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择运营公司"},on:{change:e.companyChange},model:{value:e.formInline.companyId,callback:function(t){e.$set(e.formInline,"companyId",t)},expression:"formInline.companyId"}},e._l(e.depList,(function(e){return r("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"orgId"}},[r("el-cascader",{key:e.cascaderKey,ref:"cascader",attrs:{placeholder:"请选择部门名称","popper-class":"cascader",options:e.DWList,props:{value:"id",checkStrictly:!0,emitPath:!1},"expand-trigger":"hover"},on:{change:e.deptChange},model:{value:e.formInline.orgId,callback:function(t){e.$set(e.formInline,"orgId",t)},expression:"formInline.orgId"}})],1),r("el-form-item",{attrs:{label:"",prop:"qzlxType"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择清障类型"},model:{value:e.formInline.qzlxType,callback:function(t){e.$set(e.formInline,"qzlxType",t)},expression:"formInline.qzlxType"}},e._l(e.qzlxTypeList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"roadId"}},[r("el-select",{attrs:{placeholder:"请选择路线名称"},model:{value:e.formInline.roadId,callback:function(t){e.$set(e.formInline,"roadId",t)},expression:"formInline.roadId"}},e._l(e.roadList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roadDesc,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"status"}},[r("el-select",{attrs:{clearable:"",placeholder:"请选择工单状态"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.statusList,(function(e){return r("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"isEmptyDriving"}},[r("el-select",{attrs:{clearable:"",placeholder:"是否空驶"},model:{value:e.formInline.isEmptyDriving,callback:function(t){e.$set(e.formInline,"isEmptyDriving",t)},expression:"formInline.isEmptyDriving"}},e._l(e.isEmptyList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.val}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"isChargeFees"}},[r("el-select",{attrs:{clearable:"",placeholder:"是否收取费用"},model:{value:e.formInline.isChargeFees,callback:function(t){e.$set(e.formInline,"isChargeFees",t)},expression:"formInline.isChargeFees"}},e._l(e.isChargeFeesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.val}})})),1)],1),r("el-form-item",{attrs:{label:"",prop:"wreckerNumber"}},[r("el-input",{attrs:{placeholder:"请输入清障车牌号",clearable:""},model:{value:e.formInline.wreckerNumber,callback:function(t){e.$set(e.formInline,"wreckerNumber",t)},expression:"formInline.wreckerNumber"}})],1),r("el-form-item",{attrs:{label:"",prop:"clearingVehicle"}},[r("el-input",{attrs:{placeholder:"请输入被清车号",clearable:""},model:{value:e.formInline.clearingVehicle,callback:function(t){e.$set(e.formInline,"clearingVehicle",t)},expression:"formInline.clearingVehicle"}})],1),r("el-form-item",{attrs:{label:"桩号区间",prop:"startLocationK"}},[r("el-row",{staticStyle:{width:"300px"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"公里"},model:{value:e.formInline.startLocationK,callback:function(t){e.$set(e.formInline,"startLocationK",t)},expression:"formInline.startLocationK"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"",prop:"startLocationM"}},[r("el-input",{attrs:{placeholder:"米"},model:{value:e.formInline.startLocationM,callback:function(t){e.$set(e.formInline,"startLocationM",t)},expression:"formInline.startLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1)],1),r("el-form-item",{attrs:{label:"至",prop:"endLocationK"}},[r("el-row",{staticStyle:{width:"275px"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{placeholder:"公里"},model:{value:e.formInline.endLocationK,callback:function(t){e.$set(e.formInline,"endLocationK",t)},expression:"formInline.endLocationK"}},[r("template",{slot:"prepend"},[e._v("k")])],2)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"",prop:"endLocationM"}},[r("el-input",{attrs:{placeholder:"米"},model:{value:e.formInline.endLocationM,callback:function(t){e.$set(e.formInline,"endLocationM",t)},expression:"formInline.endLocationM"}},[r("template",{slot:"prepend"},[e._v("+")])],2)],1)],1)],1)],1),r("el-form-item",{attrs:{label:"清障出车时间",prop:""}},[r("el-radio",{attrs:{label:"MONTH"},model:{value:e.formInline.timeType,callback:function(t){e.$set(e.formInline,"timeType",t)},expression:"formInline.timeType"}},[e._v("本月")]),r("el-radio",{attrs:{label:"YEAR"},model:{value:e.formInline.timeType,callback:function(t){e.$set(e.formInline,"timeType",t)},expression:"formInline.timeType"}},[e._v("本年")]),r("el-radio",{attrs:{label:"CUSTOM"},model:{value:e.formInline.timeType,callback:function(t){e.$set(e.formInline,"timeType",t)},expression:"formInline.timeType"}},[e._v("自定义")]),r("el-date-picker",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{disabled:"CUSTOM"!=e.formInline.timeType,"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"开始日期"},model:{value:e.formInline.departureBeginTime,callback:function(t){e.$set(e.formInline,"departureBeginTime",t)},expression:"formInline.departureBeginTime"}}),r("el-date-picker",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{disabled:"CUSTOM"!=e.formInline.timeType,"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"结束日期"},model:{value:e.formInline.departureEndTime,callback:function(t){e.$set(e.formInline,"departureEndTime",t)},expression:"formInline.departureEndTime"}})],1),r("el-form-item",{attrs:{label:"创建时间",prop:""}},[r("el-date-picker",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"开始日期"},model:{value:e.formInline.createBeginTime,callback:function(t){e.$set(e.formInline,"createBeginTime",t)},expression:"formInline.createBeginTime"}}),r("el-date-picker",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"结束日期"},model:{value:e.formInline.createEndTime,callback:function(t){e.$set(e.formInline,"createEndTime",t)},expression:"formInline.createEndTime"}})],1),r("el-form-item",{attrs:{label:"",prop:"isMendData"}},[r("el-select",{attrs:{clearable:"",placeholder:"是否补录"},model:{value:e.formInline.isMendData,callback:function(t){e.$set(e.formInline,"isMendData",t)},expression:"formInline.isMendData"}},e._l(e.mendList,(function(e){return r("el-option",{key:e.val,attrs:{label:e.label,value:e.val}})})),1)],1),r("el-row",{staticStyle:{width:"50%","margin-bottom":"10px"}},[r("el-col",{attrs:{span:3}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:add"],expression:"['clearanceRescue:query:add']"}],attrs:{type:"primary"},on:{click:e.addNew}},[e._v("添加")])],1),r("el-col",{attrs:{span:3}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:remove"],expression:"['clearanceRescue:query:remove']"}],attrs:{type:"primary"},on:{click:function(t){return e.handleDelete(e.deleteList)}}},[e._v("删除")])],1),r("el-col",{attrs:{span:3}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:export"],expression:"['clearanceRescue:query:export']"}],attrs:{type:"primary"},on:{click:e.exportDoc}},[e._v("导出")])],1),r("el-col",{attrs:{span:3}},[e.analsis?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")]):e._e()],1)],1)],1),r("el-form",{staticStyle:{width:"160px","text-align":"center","flex-shrink":"0"},attrs:{inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getData}},[e._v("查询")])],1),r("el-form-item",[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),r("div",[r("vxe-grid",{ref:"table",staticClass:"mytable-scrollbar",attrs:{"highlight-hover-row":"",stripe:"",border:"","max-height":"700","pager-config":e.table.page,loading:e.table.loading,columns:e.columns,data:e.table.datas,showFooter:"",footerMethod:e.footerMethod},on:{"checkbox-change":e.checkboxChange,"checkbox-all":e.selectAllCheckboxChange,"page-change":e.handlePageChange},scopedSlots:e._u([{key:"clearanceTypeDesc",fn:function(t){var a=t.row;return[r("div",{staticClass:"qzlx_type",class:"qzlx_type"+a.clearanceType},[e._v(e._s(a.clearanceTypeDesc))])]}},{key:"rescueTypeDesc",fn:function(t){var a=t.row;return[r("div",[e._v(e._s(a.rescueTypeDesc?a.rescueTypeDesc:"自主救援"))])]}},{key:"rescuedWreckerNumber",fn:function(t){var a=t.row;return e._l(a.rescueVehicleList,(function(t,a){return r("div",{key:a},[e._v(" "+e._s(t.rescuedWreckerNumber)+" ")])}))}},{key:"sumConsumeTime",fn:function(t){var a=t.row;return[r("span",[e._v(" "+e._s(e.timeToMinutes(a.yjsTime,a.incomingCallDate))+" ")])]}},{key:"option",fn:function(t){var a=t.row;return[r("el-row",["4"==a.status&&0==a.isMendData?r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.toSupplementary(a.id)}}},[e._v("补录")])],1):e._e(),r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a)}}},[e._v("查看")])],1),"6"==a.status?r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handlePrint(a)}}},[e._v("打印")])],1):e._e(),"6"==a.status?r("el-col",{attrs:{span:8}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:return"],expression:"['clearanceRescue:query:return']"}],attrs:{type:"text"},on:{click:function(t){return e.handleFallback(a)}}},[e._v("回退")])],1):e._e(),[0,1,2,3,4,7].includes(Number(a.status))?r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("修改")])],1):e._e(),[0,1,2,3,4,7].includes(Number(a.status))?r("el-col",{attrs:{span:8}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:cancel"],expression:"['clearanceRescue:query:cancel']"}],attrs:{type:"text"},on:{click:function(t){return e.toDel(a)}}},[e._v("取消")])],1):e._e(),"5"==a.status?r("el-col",{attrs:{span:8}},[r("el-button",{directives:[{name:"hasrole",rawName:"v-hasrole",value:["qz_zz","qz_fzz"],expression:"['qz_zz', 'qz_fzz']"},{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:approval"],expression:"['clearanceRescue:query:approval']"}],attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a,"edit")}}},[e._v("审核")])],1):e._e(),"13"==a.status?r("el-col",{attrs:{span:8}},[r("el-button",{directives:[{name:"hasrole",rawName:"v-hasrole",value:["ddz_qz"],expression:"['ddz_qz']"},{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:approval"],expression:"['clearanceRescue:query:approval']"}],attrs:{type:"text"},on:{click:function(t){return e.handleDetail(a,"edit")}}},[e._v("审核")])],1):e._e(),"6"==a.status&&0==a.clearanceRescueInvoice.status&&Number(a.qzfwfTotal)>0?r("el-col",{attrs:{span:8}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["clearanceRescue:query:payment"],expression:"['clearanceRescue:query:payment']"}],attrs:{type:"text"},on:{click:function(t){return e.handleInvoicing(a)}}},[e._v("开票")])],1):e._e(),("6"==a.status||"5"==a.status)&&2==a.isChargeFees&&Number(a.qzfwfTotal)>0?r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleUpdateFree(a)}}},[e._v("更新费用")])],1):e._e(),1!=a.hfStatus&&"6"==a.status?r("el-col",{attrs:{span:8}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){return e.toEdit(a)}}},[e._v("回访")])],1):e._e()],1)]}},{key:"status",fn:function(t){var a=t.row;return[r("el-tag",{staticStyle:{border:"none"},attrs:{color:e.statusColorArr[a.status],effect:"dark"}},[e._v(e._s(a.statusName))])]}},{key:"wreckerNumber",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.driver)+"-"+e._s(a.wreckerNumber)+" ")]}},{key:"free",fn:function(t){var a=t.row;return[e._v(" "+e._s(1==a.isChargeFees?"是":2==a.isChargeFees?"否":"-")+" ")]}},{key:"isMendData",fn:function(t){var a=t.row;return[e._v(" "+e._s(0==a.isMendData?"是":1==a.isMendData?"否":"-")+" ")]}}])}),r("el-dialog",{attrs:{title:"新增发票",width:"550px",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)",padding:"20px 15px","margin-top":"15px"},attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"被清障车牌号",prop:"bRescueLicensePlate",rules:e.rules.bRescueLicensePlate}},[r("el-select",{attrs:{placeholder:"请选择车牌号"},model:{value:e.form.bRescueLicensePlate,callback:function(t){e.$set(e.form,"bRescueLicensePlate",t)},expression:"form.bRescueLicensePlate"}},e._l(e.bRescueLicensePlateList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"发票号",prop:"invoiceNum",rules:e.rules.invoiceNum}},[r("el-input",{attrs:{placeholder:"请输入发票号"},model:{value:e.form.invoiceNum,callback:function(t){e.$set(e.form,"invoiceNum",t)},expression:"form.invoiceNum"}})],1),r("el-form-item",{attrs:{label:"开票时间",prop:"invoiceTime",rules:e.rules.invoiceTime}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择开票时间","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.form.invoiceTime,callback:function(t){e.$set(e.form,"invoiceTime",t)},expression:"form.invoiceTime"}})],1),r("el-form-item",{attrs:{label:"发票金额",prop:"invoiceAmount",rules:e.rules.invoiceAmount}},[r("el-input",{attrs:{placeholder:"请输入金额"},model:{value:e.form.invoiceAmount,callback:function(t){e.$set(e.form,"invoiceAmount",t)},expression:"form.invoiceAmount"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-radio",{attrs:{disabled:e.form.disabledRadio,label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("未开票")]),r("el-radio",{attrs:{disabled:e.form.disabledRadio,label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("已开票")])],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.status,expression:"form.status == 1"}],attrs:{label:"发票照片",prop:"invoicePic",rules:e.rules.invoicePic}},[r("upload",{attrs:{filesList:e.filesList},on:{returnRes:function(t){return e._returnRes(t)},returnResDel:function(t){return e._returnResDel(t)}},model:{value:e.form.invoicePic,callback:function(t){e.$set(e.form,"invoicePic",t)},expression:"form.invoicePic"}})],1),r("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改清障救援费用",width:"750px",visible:e.dialogFreeVisible},on:{"update:visible":function(t){e.dialogFreeVisible=t}}},[r("el-form",{ref:"FreeArr",attrs:{model:e.FreeArr,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"是否收取费用"}},[r("el-radio",{attrs:{label:Number(1)},model:{value:e.FreeArr.isChargeFees,callback:function(t){e.$set(e.FreeArr,"isChargeFees",t)},expression:"FreeArr.isChargeFees"}},[e._v("是")]),r("el-radio",{attrs:{label:Number(2)},model:{value:e.FreeArr.isChargeFees,callback:function(t){e.$set(e.FreeArr,"isChargeFees",t)},expression:"FreeArr.isChargeFees"}},[e._v("否")])],1),2==e.FreeArr.isChargeFees?r("el-form-item",{key:"notChargeFeesReason",attrs:{label:"未收取费用原因：",prop:"notChargeFeesReason",rules:{required:!0,message:"请输入未收取费用原因",trigger:"blur"}}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.FreeArr.notChargeFeesReason,callback:function(t){e.$set(e.FreeArr,"notChargeFeesReason",t)},expression:"FreeArr.notChargeFeesReason"}})],1):e._e(),e._l(e.FreeArr.rescueCostList,(function(t,a){return r("div",{key:a},[r("div",{staticClass:"B_R_title"},[e._v("被救援车辆 | "+e._s(t.carOwnerPlate))]),r("el-form-item",{attrs:{label:"清障救援费用",prop:"rescueCostList["+a+"].baseCost",rules:{required:!0,message:"请输入清障救援费用",trigger:"blur"}}},[r("el-input",{staticStyle:{width:"450px"},on:{input:function(t){return e.clearFreeChange(a)}},model:{value:t.baseCost,callback:function(a){e.$set(t,"baseCost",a)},expression:"item.baseCost"}},[r("i",{staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])])],1),t.changeFreeReason?r("el-form-item",{key:"rescueCostList["+a+"].remark",attrs:{label:"修改金额原因",prop:"rescueCostList["+a+"].remark",rules:{required:!0,message:"请输入修改金额原因",trigger:"blur"}}},[r("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"请输入修改金额原因"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1):e._e(),r("el-form-item",{attrs:{label:"其他救援费用"}},[r("el-input",{staticStyle:{width:"450px"},on:{input:function(t){return e.otherCostChange(a)}},model:{value:t.otherCost,callback:function(a){e.$set(t,"otherCost",a)},expression:"item.otherCost"}},[r("i",{staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])])],1),r("el-form-item",{attrs:{label:"当前车辆总计"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"自动计算无需填写",disabled:""},model:{value:t.totalCost,callback:function(a){e.$set(t,"totalCost",a)},expression:"item.totalCost"}},[r("i",{staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])]),e._v(" (实收金额) ")],1)],1)})),r("div",[r("div",{staticClass:"B_R_title",staticStyle:{width:"44px"}},[e._v("合计")]),r("el-form-item",{attrs:{label:"总计(实收金额)"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"自动计算无需填写",disabled:""},model:{value:e.FreeArr.qzfwf,callback:function(t){e.$set(e.FreeArr,"qzfwf",t)},expression:"FreeArr.qzfwf"}},[r("i",{staticStyle:{"font-style":"normal","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])]),e._v(" (实收金额) ")],1)],1)],2),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelChangeFree}},[e._v("返回")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cofirmChangeFree("FreeArr")}}},[e._v("确 定")])],1)],1)],1),e.isVideoPreview?[r("video-preview",{attrs:{show:e.isVideoPreview,videoMap:e.videoMap},on:{"update:show":function(t){e.isVideoPreview=t}}})]:e._e(),r("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isDel,expression:"isDel"}],staticStyle:{"padding-top":"15px"}},[r("div",{staticClass:"btn-group",staticStyle:{display:"flex","justify-content":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.delTabData}},[e._v("删除")]),r("el-button",{on:{click:e.changeTabDelState}},[e._v("取消")])],1)]),r("el-dialog",{staticClass:"process_orders_dialog",attrs:{visible:e.detailsDialog,size:"full",width:"40%",title:"工单详情页",top:"20vh"},on:{"update:visible":function(t){e.detailsDialog=t}}},[r("el-form",{ref:"detailsDialog",attrs:{model:e.detailsDialogData,"label-width":"auto"}},[r("div",{staticClass:"details_dialog_head"},[r("img",{attrs:{src:a("a3aa"),alt:""}}),r("div",{staticClass:"work_order_num"},[e._v(" 工单编号："+e._s(e.detailsDialogData.workNumber)+" ")]),r("div",{staticClass:"status_text",class:"status_text"+e.detailsDialogData.status},[e._v(" "+e._s(e.detailsDialogData.statusName)+" ")])]),r("div",{staticClass:"info"},[r("div",{staticClass:"work_info"},[r("div",{staticClass:"item"},[e._v(" 信息来源："+e._s(e.detailsDialogData.sourceValue)+" ")]),r("div",{staticClass:"item"},[e._v(" 单位名称："+e._s(e.detailsDialogData.company)+" ")]),r("div",{staticClass:"item"},[e._v(" 创建时间："+e._s(e.detailsDialogData.createTime)+" ")])]),r("div",{staticClass:"details_info"},[r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障位置：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.section)+" k"+e._s(e.detailsDialogData.locationKm)+"+"+e._s(e.detailsDialogData.locationM)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障类型： ")]),r("span",{staticStyle:{"font-size":"12px",display:"inline-block","text-align":"center",color:"#eee",transform:"skew(-20deg)","background-color":"#222",padding:"0px 8px"}},[e._v(" "+e._s(e.detailsDialogData.clearanceTypeDesc)+" ")])])],1),r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 报警人信息：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.callPolice)+"-"+e._s(e.detailsDialogData.policePhone)+" ")])]),0!=e.detailsDialogData.status?r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 预计等待时间：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.expectWaitTime)+" ")])]):r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障形式：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.rescueTypeDesc)+" ")])])],1),0==e.detailsDialogData.status&&1==e.detailsDialogData.rescueType?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障机构：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.thirdPartyOrgName)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 联系方式：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.thirdPartyOrgPhone)+" ")])])],1):e._e(),0==e.detailsDialogData.status?r("el-row",e._l(e.detailsDialogData.clearanceVehicleList,(function(t){return r("el-row",{key:t.id,staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障人员：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(t.clearancePersonList.length>0?t.clearancePersonList.map((function(e){return e.name})).join(","):"")+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障车号：")]),r("span",{staticStyle:{background:"#F2F2FD","border-radius":"2px 2px 2px 2px",color:"#2F7EF5",padding:"3px 6px"}},[e._v(" "+e._s(t.licensePlate)+" ")])]),1==e.detailsDialogData.rescueType?r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:4}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 清障司机：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(t.driverName)+" ")])]):e._e()],1)})),1):e._e(),11==e.detailsDialogData.status?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 情况说明：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.waitReason)+" ")])])],1):e._e(),r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 事件描述：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.note)+" ")])])],1),8==e.detailsDialogData.status?r("el-row",{staticStyle:{"margin-bottom":"15px"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 取消原因：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(e.detailsDialogData.cancelReason)+" ")])])],1):e._e()],1),r("div",{staticClass:"rescue_Vehicle_info"},[r("div",{staticClass:"title"},[e._v(" 被救援车辆信息 ")]),e._l(e.detailsDialogData.rescueVehicleList,(function(t){return r("el-row",{key:t.id,staticStyle:{margin:"15px 0"}},[r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援人员姓名：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(t.rescuedName)+" ")])]),r("el-col",{attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援人员电话：")]),r("span",{staticStyle:{color:"#111"}},[e._v(" "+e._s(t.rescuedPhone)+" ")])]),r("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:10}},[r("span",{staticStyle:{color:"#999"}},[e._v(" 被救援车牌号：")]),r("span",{staticStyle:{background:"#F2F2FD","border-radius":"2px 2px 2px 2px",color:"#2F7EF5",padding:"3px 6px"}},[e._v(" "+e._s(t.rescuedWreckerNumber)+" ")])])],1)}))],2)])]),r("div",{staticClass:"dialog_footer",staticStyle:{display:"flex","justify-content":"center","align-items":"center","margin-top":"35px"}},[r("el-button",{on:{click:function(t){e.detailsDialog=!1}}},[e._v("关闭")])],1)],1)],2),"qzyb"==e.activeName?r("div",[r("MonthReport")],1):e._e(),"qzrb"==e.activeName?r("div",[r("Daily")],1):e._e()],1)},i=[],s=a("ade3"),o=a("c7eb"),l=a("1da1"),c=a("5530"),u=a("3835"),d=(a("99af"),a("4de4"),a("caad"),a("a15b"),a("d81d"),a("14d9"),a("13d5"),a("b0c0"),a("e9c4"),a("a9e3"),a("4fadc"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("e984")),m=a("2f62"),p=a("2934"),f=a("aa3a"),h=a("36fa"),b=a("f60e"),v=a("c1df"),g=a.n(v),y=a("7672"),x=a("7001"),w=function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-d46756da")]).then(a.bind(null,"fccf"))},k={components:{VideoPreview:w,upload:h["a"],ParamsCard:b["a"],MonthReport:y["default"],Daily:x["default"]},name:"Query",watch:{"formInline.timeType":{handler:function(e,t){"CUSTOM"!=e&&(this.formInline.departureBeginTime=void 0,this.formInline.departureEndTime=void 0)},deep:!0},"$route.query":{handler:function(e,t){e.anaysis?this.analsis=e.anaysis:this.analsis=null},immediate:!0}},data:function(){return{footerData:[["","合计","","","","","","","","","",""]],mendList:[{label:"是",val:!0},{label:"否",val:!1}],activeName:"qzlb",detailsDialog:!1,detailsDialogData:{},qzlxTypeList:[],fromRouterName:"",tableHeight:500,analsis:0,flag:!1,statusColorArr:["#FFC656","#2F7EF5","#2F7EF5","#2F7EF5","#2F7EF5","#E78911","#33B388","#EE2626","#D0D0D0","#FF0A1D"],FreeArr:{workNumber:null,isChargeFees:null,notChargeFeesReason:null,rescueCostList:null,qzfwf:null,id:null},ComfirmfreeArr:[],dialogFreeVisible:!1,isMyView:!1,qzdate:null,roadList:[],DWList:[],deleteList:[],cascaderKey:0,bRescueLicensePlateList:[],dialogFormVisible:!1,form:{status:"1",bRescueLicensePlate:"",invoiceNum:"",invoiceTime:"",invoiceAmount:"",remark:"",disabledRadio:!1},imgsList:[],filesList:[],param:{},rules:{bRescueLicensePlate:[{required:!0,message:"请输入车牌号",trigger:"blur"}],invoiceNum:[{required:!0,message:"请输入发票号",trigger:"blur"}],invoiceTime:[{required:!0,message:"请选择开票时间",trigger:"blur"}],invoiceAmount:[{required:!0,message:"请输入金额",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},isDel:!1,isVideoPreview:!1,videoDate:[],videoMap:{},formInline:{timeType:"MONTH"},isEmptyList:[{id:0,label:"否",val:!1},{id:1,label:"是",val:!0}],isChargeFeesList:[{id:0,label:"否",val:!1},{id:1,label:"是",val:!0}],status:"",statusList:[],depList:[],stateList:[],table:{loading:!0,page:{total:0,currentPage:1,pageSize:10,align:"left",pageSizes:[10,20,50],layouts:["Sizes","PrevJump","PrevPage","Number","NextPage","NextJump","FullJump","Total"],perfect:!0},datas:[]},columns:[{type:"checkbox",width:50,align:"center",fixed:"left"},{type:"seq",width:50,title:"序号",align:"center",fixed:"left"},{title:"单位名称",field:"company",align:"center",fixed:"left",width:150},{title:"部门名称",field:"orgDesc",align:"center",fixed:"left",width:120},{title:"清障类型",slots:{default:"clearanceTypeDesc"},align:"center",width:120},{title:"清障形式",slots:{default:"rescueTypeDesc"},align:"center",width:120},{title:"清障路段",field:"section",align:"center",width:200},{title:"清障人员",field:"personnel",align:"center",width:180},{title:"清障车信息",slots:{default:"wreckerNumber"},align:"center",width:160},{title:"被清理车辆",slots:{default:"rescuedWreckerNumber"},align:"center",width:120},{title:"工单创建时间",field:"createTime",align:"center",width:150},{title:"清障出车时间",field:"yksTime",align:"center",width:150},{title:"清障用时(分钟)",slots:{default:"sumConsumeTime"},align:"center",width:80},{title:"清障服务费(元)",field:"qzfwfTotal",align:"center",width:90},{title:"是否空驶",field:"optNotDriveName",align:"center",width:100},{title:"是否收取费用",slots:{default:"free"},align:"center",width:110},{title:"是否补录",slots:{default:"isMendData"},align:"center",width:110},{title:"状态",field:"statusName",slots:{default:"status"},align:"center",fixed:"right",width:120},{title:"操作",slots:{default:"option"},align:"center",fixed:"right",width:200}],checkedRows:""}},mounted:function(){var e=this;this.getParams(),this.tableHeight=window.innerHeight-290,this.flag=!0,this.getDptData(),this.getData(),this.getstateList(),Object(f["d"])("qzjy_status",{status:0}).then((function(t){e.statusList=t.data})),Object(f["d"])("qzjy_qzlx").then((function(t){e.qzlxTypeList=t.data}))},beforeRouteEnter:function(e,t,a){a((function(e){e.fromRouterName=t.name}))},activated:function(){this.getParams(),this.flag||this.getData()},methods:(r={footerMethod:function(){return this.footerData},toSupplementary:function(e){this.$router.push({path:"/clearanceRescue/supplementary",query:{id:e}})},handleClick:function(e,t){this.activeName=e.name},getParams:function(){if(Object.keys(this.$route.query).length>0){var e,t=Object.entries(this.formInline).reduce((function(e,t){var a=Object(u["a"])(t,2),r=a[0],n=a[1];return void 0!==n&&null!==n&&(e[r]=n),e}),{});this.$route.query.qzlxType||(t.qzlxType=void 0),this.$route.query.companyId&&(t.companyId=Number(this.$route.query.companyId),this.companyChange(this.$route.query.companyId)),this.$route.query.tabName&&(this.activeName=this.$route.query.tabName),this.formInline=Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.$route.query),t),{},{statusList:null===(e=this.$route.query)||void 0===e||null===(e=e.statusList)||void 0===e?void 0:e.split(",")})}else["ClearanceDetails"].includes(this.fromRouterName)||(this.formInline={timeType:"MONTH",companyId:"",orgId:"",roadId:"",wreckerNumber:"",clearingVehicle:"",qzdate:"",status:"",isEmptyDriving:"",isChargeFees:"",departureBeginTime:null,departureEndTime:null,createBy:void 0,optReturn:void 0,createBeginTime:void 0,createEndTime:void 0,statusList:[],qzlxType:void 0,isMendData:void 0})},cancelChangeFree:function(){this.dialogFreeVisible=!1,this.FreeArr={workNumber:null,isChargeFees:null,notChargeFeesReason:null,rescueCostList:null,qzfwf:null,id:null},this.ComfirmfreeArr=[]},cofirmChangeFree:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(Object(o["a"])().mark((function e(a){var r,n,i,s,l;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}if(1!=t.FreeArr.isChargeFees){e.next=12;break}return e.next=4,Object(d["v"])(t.FreeArr.id);case 4:return r=e.sent,n=r.data.clearanceRecordList,i=g()(new Date).format("YYYY-MM-DD HH:mm:ss"),s={businessId:t.FreeArr.workNumber,businessType:"QZ_JS",hasNext:"0",id:null,processId:7,processStatus:null,processTime:null,processType:"其他",rId:t.FreeArr.id,status:null,systemMsg:null,userId:null,userName:null},1==t.FreeArr.rescueCostList.length?s.systemMsg="".concat(i,"由").concat(t.userInfo.nickName,"收回被救援车辆").concat(t.FreeArr.rescueCostList[0].carOwnerPlate,"剩余应收").concat(t.FreeArr.qzfwf,"元"):t.FreeArr.rescueCostList.length>1&&(l="",t.FreeArr.rescueCostList.map((function(e){l=l+"被救援车辆"+e.carOwnerPlate+"剩余应收"+e.totalCost+"元,"})),s.systemMsg="".concat(i,"由").concat(t.userInfo.nickName,"收回").concat(l,"应收总计").concat(t.FreeArr.qzfwf,"元")),n.push(s),e.next=12,Object(d["e"])(n);case 12:return e.next=14,Object(d["k"])(t.FreeArr).then((function(e){200==e.code&&(t.$message.success("操作成功！"),t.cancelChangeFree(),t.getData())}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},clearFreeChange:function(e){Number(this.FreeArr.rescueCostList[e].baseCost)!=this.ComfirmfreeArr[e]?this.FreeArr.rescueCostList[e].changeFreeReason=!0:this.FreeArr.rescueCostList[e].changeFreeReason=!1,this.FreeArr.rescueCostList[e].totalCost=Number(this.FreeArr.rescueCostList[e].baseCost)+Number(this.FreeArr.rescueCostList[e].otherCost),this.getTotalFwf()},otherCostChange:function(e){this.FreeArr.rescueCostList[e].totalCost=Number(this.FreeArr.rescueCostList[e].baseCost)+Number(this.FreeArr.rescueCostList[e].otherCost),this.getTotalFwf()},getTotalFwf:function(){var e=0;this.FreeArr.rescueCostList.map((function(t){e+=Number(t.totalCost)})),this.FreeArr.qzfwf=e},handleUpdateFree:function(e){var t=this;this.FreeArr.workNumber=e.workNumber,this.FreeArr.id=e.id,this.FreeArr.isChargeFees=e.isChargeFees,this.FreeArr.notChargeFeesReason=e.notChargeFeesReason,this.FreeArr.rescueCostList=JSON.parse(JSON.stringify(e.rescueCostList)),this.FreeArr.rescueCostList.map((function(e){t.ComfirmfreeArr.push(Number(e.baseCost))})),this.FreeArr.qzfwf=e.qzfwfTotal||e.qzfwf,this.dialogFreeVisible=!0},dateChange:function(e){this.formInline.departureBeginTime=g()(e[0]).format("yyyy-MM-DD HH:mm:ss"),this.formInline.departureEndTime=g()(e[1]).format("yyyy-MM-DD HH:mm:ss")},addNew:function(){this.$router.push("/clearanceRescue/clearanceReport")},companyChange:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=5;break}return t.formInline.companyId=void 0,t.formInline.orgId=void 0,t.DWList=[],a.abrupt("return");case 5:return a.next=7,Object(p["g"])({ancestors:e,isFilter:!0});case 7:r=a.sent,t.cascaderKey++,t.DWList=r.data;case 10:case"end":return a.stop()}}),a)})))()},deptChange:function(e){var t=this;Object(p["l"])({orgId:e}).then((function(e){t.roadList=e.rows}))},_returnRes:function(e){var t={name:e.fileName,attachId:e.id,fileUrl:e.fileUrl};this.imgsList.push(t)},_returnResDel:function(e){this.imgsList=this.imgsList.filter((function(t){return t.attachId!=e.id}))},toDel:function(e){var t=this;this.$confirm("此操作将取消".concat(e.workNumber,"该工单, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$prompt("请填写取消原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){if(!e)return"取消原因不能为空"}}).then((function(a){var r=a.value;t.setDel(e,r)})).catch((function(){}))})).catch((function(){}))},setDel:function(e,t){var a=this;return Object(l["a"])(Object(o["a"])().mark((function r(){var n;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(d["c"])({id:e.id,cancelReason:t});case 2:n=r.sent,200==n.code&&(a.$message({type:"success",message:"已取消!"}),a.getData());case 4:case"end":return r.stop()}}),r)})))()},handleSave:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(c["a"])({},e.form),e.imgsList.length>0&&(a.invoicePic=e.imgsList.map((function(e){return e.attachId})).join(","),a.picList=e.imgsList.map((function(e){return e.fileName=e.name,e.id=e.attachId,e.fileUrl=e.fileUrl,e}))),e.param.childList=e.param.childList||[],e.param.childList.push(a),t.next=6,Object(d["b"])(e.param);case 6:r=t.sent,200==r.code&&(e.$message.success("操作成功！"),e.dialogFormVisible=!1,e.resetForm("form"),e.imgsList=[],e.filesList=[],setTimeout((function(){e.getData()}),1e3));case 8:case"end":return t.stop()}}),t)})))()},toEdit:function(e){this.$router.push({path:"/clearanceRescue/clearanceDetails",query:{id:e.id,type:"hf"}})},handleInvoicing:function(e){var t;this.param=e.clearanceRescueInvoice,this.dialogFormVisible=!0,this.bRescueLicensePlateList=null===e||void 0===e||null===(t=e.rescueVehicleList)||void 0===t?void 0:t.map((function(e){return e.rescuedWreckerNumber}))},exportDoc:function(){var e=Object(c["a"])(Object(c["a"])({},this.formInline),{},{pageNum:this.table.page.currentPage,pageSize:this.table.page.pageSize});this.download("/roadProducts/clearanceRescue/export",Object(c["a"])({},e),"清障救援信息.xlsx")},checkboxChange:function(){this.checkedRows=this.$refs.table.getCheckboxRecords()},changeTabDelState:function(){this.isDel=!this.isDel,this.$refs.table.clearCheckboxRow(),this.$set(this.columns,0,{type:"checkbox",width:50,visible:this.isDel})}},Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(r,"checkboxChange",(function(e){e.checked?this.deleteList.push(e.row.id):this.deleteList=this.deleteList.filter((function(t){return t!=e.row.id}))})),"selectAllCheckboxChange",(function(e){var t=this;e.checked?(this.deleteList=[],e.records.map((function(e){t.deleteList.push(e.id)}))):this.deleteList=[]})),"delTabData",(function(){var e=this;this.$confirm("是否确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){var a=e.checkedRows.map((function(e){return e.id})).join(",");Object(d["h"])(a).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getData(),e.changeTabDelState()}))}))})),"toLaneVideoMap",(function(e){2==this.videoDate.length?(this.videoMap={vehcli:e.wreckerNumber,startTimeStamp:this.videoDate[0]/1e3,endTimeStamp:this.videoDate[1]/1e3,playTimeStamp:this.videoDate[0]/1e3},this.isVideoPreview=!0):this.$notify({title:"警告",message:"请选择回放日期！",type:"warning"})})),"toLaneRouteMap",(function(e){this.$router.push({path:"/interface/laneRouteMap",query:{type:2,id:e.id}})})),"handlePrint",(function(e,t){this.$router.push({path:"print",query:{id:e.id,type:t}})})),"getDptData",(function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["j"])();case 2:a=t.sent,e.depList=a.data;case 4:case"end":return t.stop()}}),t)})))()})),"getstateList",(function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["k"])({dictType:"qzjy_status"});case 2:a=t.sent,e.stateList=a.rows;case 4:case"end":return t.stop()}}),t)})))()})),"handleDetail",(function(e,t){this.$router.push({path:"/clearanceRescue/clearanceDetails",query:{id:e.id,type:t}})})),"handleDelete",(function(e){var t=this;0!=e.length?this.$confirm("此操作将删除工单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$prompt("请填写删除原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){if(!e)return"回退原因不能为空"}}).then((function(a){var r=a.value;Object(d["i"])({ids:e,reason:r}).then((function(e){t.getData(),t.$message({message:"已删除",type:"success"}),t.deleteList=[]}))}))})):this.$message({message:"未选中要删除的数据",type:"warning"})})),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(r,"handleFallback",(function(e){var t=this;this.$confirm("此操作将回退".concat(e.workNumber,"该工单, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$prompt("请填写回退原因?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){if(!e)return"回退原因不能为空"}}).then((function(a){var r=a.value;Object(p["E"])({businessId:e.workNumber,returnReason:r,businessType:"QZ",rId:e.id}).then((function(e){t.getData(),t.$message({message:"已回退",type:"success"})}))})).catch((function(){}))})).catch((function(){}))})),"handleEdit",(function(e){this.$router.push({path:2==e.rescueType?"/clearanceRescue/socialAssistanceEdit":"/clearanceRescue/clearanceReport",query:{id:e.id}})})),"resetForm",(function(e){this.qzdate=null,this.$refs[e].resetFields(),this.formInline={timeType:"MONTH",companyId:"",orgId:"",roadId:"",wreckerNumber:"",clearingVehicle:"",qzdate:"",status:"",isEmptyDriving:"",isChargeFees:"",departureBeginTime:"",departureEndTime:"",createBy:void 0,optReturn:void 0,createBeginTime:void 0,createEndTime:void 0,isMendData:void 0},this.getData()})),"handlePageChange",(function(e){var t=e.currentPage,a=e.pageSize;this.table.page.currentPage=t,this.table.page.pageSize=a,this.getData()})),"getData",(function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.formInline.departureEndTime||t.formInline.departureBeginTime){e.next=3;break}return t.$message.warning("请选择开始时间"),e.abrupt("return");case 3:if(!t.formInline.departureBeginTime||t.formInline.departureEndTime){e.next=6;break}return t.$message.warning("请选择结束时间"),e.abrupt("return");case 6:return t.table.loading=!0,a=Object(c["a"])(Object(c["a"])({},t.formInline),{},{pageNum:t.table.page.currentPage,pageSize:t.table.page.pageSize}),8==t.status&&(a.status=t.status),e.next=11,Object(d["q"])(a);case 11:r=e.sent,r.rows.forEach((function(e){e.qzfwfTotal=0,e.rescueCostList.map((function(t){e.qzfwfTotal+=t.totalCost?Number(t.totalCost):0})),e.nodeList&&e.nodeList.length>0?e.nodeList.map((function(t){1==t.rStatus&&t.optNotDrive?e.optNotDriveName="是(出发空驶)":2==t.rStatus&&t.optNotDrive?e.optNotDriveName="是(到达空驶)":e.optNotDriveName||(e.optNotDriveName="否")})):e.optNotDriveName="-"})),t.table.datas=[],t.table.datas=r.rows,t.table.datas.map((function(e){var t;null===e||void 0===e||null===(t=e.nodeList)||void 0===t||t.map((function(t){1==t.optNotDrive&1==t.rStatus&&(e.qzfwf=0)}))})),t.table.page.total=r.total,t.table.loading=!1,t.isMyView=!1,t.flag=!1;case 20:case"end":return e.stop()}}),e)})))()}))),computed:Object(c["a"])(Object(c["a"])({},Object(m["b"])(["userInfo"])),{},{timeToMinutes:function(){return function(e,t){if(!e||!t)return"-";var a=new Date(t).getTime(),r=new Date(e).getTime();return Math.floor((r-a)/60/1e3)>0?Math.floor((r-a)/60/1e3)+"分钟":"-"}}})},D=k,_=(a("b3b3"),a("d88e"),a("2877")),C=Object(_["a"])(D,n,i,!1,null,"efc213d6",null);t["default"]=C.exports},"865b":function(e,t,a){},a3aa:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD//gAXR2VuZXJhdGVkIGJ5IFNuaXBhc3Rl/9sAhAAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47AQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAqAC4DAREAAhEBAxEB/8QBogAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLEAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+foBAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKCxEAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD2VmCqWYgAdzUykoq7eg0m9ERi5hOcSKTjOAaxWJovaVyvZz6or/2ta+r/APfNcX9rYbz+42+q1CSG+gmDFWIC4yWGK6KOOo1U3F6LuROjONkyVJ4pDhJFY+gNbwr05u0ZXM3CS1aJK2JKmp/8eEn4fzFedmf+6y+X5o6MN/FRjW0qwzh2BIwQce4xXzGGqxpVVKW2v4qx6NSLlGyJM2X92X862vg+zJtV8hWmt1t5I4lfL45Y+hpyrUI0ZQpp3lbfyYlCbmpS6C6Z/wAf8f4/yNPLP96j8/yYsT/CZvV9geUVNT/48JPw/mK87M/91l8vzR0Yb+KjFgjEsyozBQe57V8rQpqpUUG7XPSnJxjdFz+zYf8An6WvV/s2j/z9RzfWJ/yjJ7GKKFnW4ViOw71jXwNOnTc1UTaLhWlKVnEbpn/H/H+P8jWeWf71H5/kx4n+Ezer7A8oqan/AMeEn4fzFedmf+6y+X5o6MN/FRiQoskqoz7Ae57V8rRpxqVFGTsj05ycY3SLn2C3/wCfta9P6hQ/5+o5vbz/AJRk1nDHEzrcK5HYd6xrYOlTpuUal2XCrKUrOImmf8f8f4/yNTln+9R+f5MMT/CZvV9geUQXsLT2rxpjccYz9a5MbRlWoShHd/5mtGahNSZlf2Tdeif99V89/ZOJ8vvO/wCtUw/sm69E/wC+qP7JxPl94fWqYf2Tdeif99Uf2TifL7w+tUyey0+eC6WSTbtXPQ+1dmBy+tRrqc7WV/yMa1eE4OKNWvoDhCgAoAKACgAoAKAP/9k="},b3b3:function(e,t,a){"use strict";a("f6db")},d88e:function(e,t,a){"use strict";a("865b")},e984:function(e,t,a){"use strict";a.d(t,"s",(function(){return n})),a.d(t,"D",(function(){return i})),a.d(t,"n",(function(){return s})),a.d(t,"t",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"j",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"p",(function(){return p})),a.d(t,"q",(function(){return f})),a.d(t,"r",(function(){return h})),a.d(t,"u",(function(){return b})),a.d(t,"v",(function(){return v})),a.d(t,"e",(function(){return g})),a.d(t,"a",(function(){return y})),a.d(t,"A",(function(){return x})),a.d(t,"w",(function(){return w})),a.d(t,"E",(function(){return k})),a.d(t,"d",(function(){return D})),a.d(t,"b",(function(){return _})),a.d(t,"z",(function(){return C})),a.d(t,"l",(function(){return I})),a.d(t,"y",(function(){return O})),a.d(t,"k",(function(){return T})),a.d(t,"m",(function(){return A})),a.d(t,"B",(function(){return F})),a.d(t,"f",(function(){return N})),a.d(t,"o",(function(){return R})),a.d(t,"x",(function(){return j})),a.d(t,"C",(function(){return L}));var r=a("b775");function n(){return Object(r["a"])({url:"/system/dept/list?type=1&isFilter=false",method:"get"})}function i(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/updateData",method:"PUT",data:e})}function s(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/generateClearanceRecord/".concat(e),method:"get"})}function o(e){return Object(r["a"])({url:"/roadProducts/clearanceRescueCost/getCostCount",method:"POST",data:e})}function l(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue_v1/edit",method:"POST",data:e})}function c(e){return Object(r["a"])({url:"/roadProducts/standardization/edit",method:"PUT",data:e})}function u(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/cancel/".concat(e.id),method:"patch",data:{cancelReason:e.cancelReason}})}function d(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/remove?ids="+e,method:"DELETE"})}function m(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/remove",method:"DELETE",data:e})}function p(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/list",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/query",method:"post",data:e})}function h(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/shList ",method:"post",data:e})}function b(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/infoByParentId/".concat(e),method:"get"})}function v(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/info/".concat(e),method:"get"})}function g(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/saveClearanceRecord",data:e,method:"post"})}function y(e,t){return Object(r["a"])({url:"/roadProducts/clearanceRescue/".concat(t),method:"post",data:e})}function x(e){return Object(r["a"])({url:"/clearanceRescue/count/getCount",method:"post",data:e})}function w(e){return Object(r["a"])({url:"/roadProducts/invoice/list",method:"post",data:e})}function k(e){return Object(r["a"])({url:"roadProducts/clearanceRescue/updateStatus",method:"post",data:e})}function D(e,t){return Object(r["a"])({url:"/roadProducts/invoice/".concat(t),method:"post",data:e})}function _(e){return Object(r["a"])({url:"/roadProducts/invoice/add",method:"post",data:e})}function C(e){return Object(r["a"])({url:"/roadProducts/invoice/info/".concat(e),method:"get"})}function I(e){return Object(r["a"])({url:"/roadProducts/invoice/edit",method:"post",data:e})}function O(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/gdList",method:"post",data:e})}function T(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/edit",method:"post",data:e})}function A(e){return Object(r["a"])({url:"/roadProducts/workOrderReturn/list",method:"post",data:e})}function F(e){return Object(r["a"])({url:"/roadProducts/clearanceRescue/statAnalysis",method:"post",data:e})}function N(e){return Object(r["a"])({url:"/statistics/qz/statTotalList",method:"post",data:e})}function R(e){return Object(r["a"])({url:"/statistics/qz/statRateList",method:"post",data:e})}function j(e){return Object(r["a"])({url:"/statistics/qz/companyStat",method:"post",data:e})}function L(e){return Object(r["a"])({url:"/statistics/qz/trendAnalysis",method:"post",data:e})}},f6db:function(e,t,a){}}]);