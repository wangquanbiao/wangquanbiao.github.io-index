(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e573d208","chunk-e573d208"],{"31e9":function(e,t,n){"use strict";n("32d0")},"32d0":function(e,t,n){},"43e4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pjfyj_comp"},[n("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("section",{staticClass:"section_card"},[n("div",{staticClass:"title"},[n("span",[e._v("当事人证件信息")]),n("div",{staticClass:"add_table",on:{click:e.innersAdd}},[e._v("添加")])]),n("el-table",{attrs:{data:e.ruleForm.inners,border:"",stripe:""}},[n("el-table-column",{attrs:{label:"当事人",align:"center",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-form-item",{attrs:{"label-width":"0px",prop:"inners."+t.$index+".dsr.name"}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.dsr.name,callback:function(n){e.$set(t.row.dsr,"name",n)},expression:"scope.row.dsr.name"}})],1)]}}])}),n("el-table-column",{attrs:{label:"身份证照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("upload",{staticStyle:{float:"none","margin-right":"15px"},attrs:{filesList:t.row.sfz1,different:"sfz1",Index:t.$index,isChange:!0,objParams:{newStyle:!0,beforeContent:"上传身份证人像面",atmLimit:1}},on:{returnRes:e.uploadImg,returnResDel:e.removeImg}}),n("upload",{staticStyle:{float:"none"},attrs:{filesList:t.row.sfz2,different:"sfz2",Index:t.$index,isChange:!0,objParams:{newStyle:!0,beforeContent:"上传身份证国徽面",atmLimit:1}},on:{returnRes:e.uploadImg,returnResDel:e.removeImg}})]}}])}),n("el-table-column",{attrs:{label:"行驶证",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("upload",{staticStyle:{float:"none","margin-right":"15px"},attrs:{filesList:t.row.xsz1,different:"xsz1",Index:t.$index,isChange:!0,objParams:{newStyle:!0,beforeContent:"上传行驶证主页",atmLimit:1}},on:{returnRes:e.uploadImg,returnResDel:e.removeImg}}),n("upload",{staticStyle:{float:"none"},attrs:{filesList:t.row.xsz2,different:"xsz2",Index:t.$index,isChange:!0,objParams:{newStyle:!0,beforeContent:"上传行驶证副业",atmLimit:1}},on:{returnRes:e.uploadImg,returnResDel:e.removeImg}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.innersDel(t.$index)}}},[e._v("删除")])]}}])})],1)],1),n("section",{staticStyle:{display:"flex","justify-content":"center",padding:"25px 0"}},[n("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("关闭")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)])],1)},s=[],i=n("c7eb"),o=n("5530"),a=n("1da1"),l=(n("4de4"),n("d81d"),n("14d9"),n("b0c0"),n("e9c4"),n("b64b"),n("d3b7"),n("36fa")),d=n("e95a7"),u={components:{upload:l["a"]},props:{close:{type:Function,require:!0},show:{type:Boolean}},watch:{show:{handler:function(e,t){e?!this.loading&&this.getData():this.ruleForm={}},deep:!0}},data:function(){return{fileList:[],ruleForm:{},rules:{},loading:!0,imgUrl:"/prod-api",innersObj:{dsr:{name:void 0},sfz1:[],sfz2:[],xsz1:[],xsz2:[]}}},mounted:function(){this.getData()},methods:{submitForm:function(){var e=this;this.loading=!0;var t=JSON.parse(JSON.stringify(this.ruleForm));t.inners.map((function(e){var t,n,r,s,i,o,a,l,d,u,c,f;delete e.sfzList,delete e.xszList,e.sfz1={path:null===(t=e.sfz1[0])||void 0===t?void 0:t.path,id:null===(n=e.sfz1[0])||void 0===n?void 0:n.id,url:null===(r=e.sfz1[0])||void 0===r?void 0:r.url},e.sfz2={path:null===(s=e.sfz2[0])||void 0===s?void 0:s.path,id:null===(i=e.sfz2[0])||void 0===i?void 0:i.id,url:null===(o=e.sfz2[0])||void 0===o?void 0:o.url},e.xsz1={path:null===(a=e.xsz1[0])||void 0===a?void 0:a.path,id:null===(l=e.xsz1[0])||void 0===l?void 0:l.id,url:null===(d=e.xsz1[0])||void 0===d?void 0:d.url},e.xsz2={path:null===(u=e.xsz2[0])||void 0===u?void 0:u.path,id:null===(c=e.xsz2[0])||void 0===c?void 0:c.id,url:null===(f=e.xsz2[0])||void 0===f?void 0:f.url}}));var n={inners:t.inners};Object(d["b"])({zfyj:n},{businessId:this.$route.query.id,docCode:"new_zfyj"}).then((function(t){200==t.code&&(e.loading=!1,e.$message.success("保存成功"),e.$emit("close"))}))},innersDel:function(e){this.ruleForm.inners=this.ruleForm.inners.filter((function(t,n){return n!=e}))},innersAdd:function(){var e={dsr:{name:void 0},sfz1:[],sfz2:[],xsz1:[],xsz2:[]};this.ruleForm.inners.push(e)},processingImg:function(e){var t=this,n=JSON.parse(JSON.stringify(e));return n.map((function(e){e.url=t.imgUrl+e.path})),n},uploadImg:function(e){var t={path:e.fileUrl,id:e.id,url:this.imgUrl+e.fileUrl,status:1};this.ruleForm.inners[e.Index][e.different].push(t)},removeImg:function(e){e.id=e.id||e.response&&e.response.data.id,this.ruleForm.inners[e.Index][e.different]=this.ruleForm.inners[e.Index][e.different].filter((function(t){return t.id!=e.id}))},getData:function(){var e=this;return Object(a["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(d["a"])({businessId:e.$route.query.id,docCode:"new_zfyj"}).then((function(t){var n,r={inners:[]};if(e.ruleForm=t.data.zfyj||r,e.ruleForm.inners&&e.ruleForm.inners.length>0)e.ruleForm.inners.map((function(t){t.dsr=t.dsr||{},t.sfz1=t.sfz1&&t.sfz1.path?e.processingImg([Object(o["a"])({},t.sfz1)]):[],t.sfz2=t.sfz2&&t.sfz2.path?e.processingImg([Object(o["a"])({},t.sfz2)]):[],t.xsz1=t.xsz1&&t.xsz1.path?e.processingImg([Object(o["a"])({},t.xsz1)]):[],t.xsz2=t.xsz2&&t.xsz2.path?e.processingImg([Object(o["a"])({},t.xsz2)]):[]}));else{var s={dsr:{},sfz1:[],sfz2:[],xsz1:[],xsz2:[]};e.ruleForm.inners.push(s)}e.ruleForm.inners[0].dsr&&e.ruleForm.inners[0].dsr.name||(e.ruleForm.inners[0].dsr=t.data.baseData,null===(n=t.data.baseData)||void 0===n||null===(n=n.dsrList)||void 0===n||n.map((function(t,n){e.ruleForm.inners[n]={dsr:JSON.parse(JSON.stringify(t)),sfz1:[],sfz2:[],xsz1:[],xsz2:[]}})));e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()}}},c=u,f=(n("31e9"),n("2877")),m=Object(f["a"])(c,r,s,!1,null,"1d3b9feb",null);t["default"]=m.exports},e95a7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));n("99af");var r=n("b775");function s(e){var t=e.businessId,n=e.docCode;return Object(r["a"])({url:"/roadProducts/roadDoc/docDetails/".concat(t,"/").concat(n),method:"get"})}function i(e,t){var n=t.businessId,s=t.docCode;return Object(r["a"])({url:"/roadProducts/roadDoc/saveDoc/".concat(n,"/").concat(s),method:"post",data:e})}}}]);