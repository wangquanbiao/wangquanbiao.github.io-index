(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-019aae4a"],{"346f":function(e,t,r){},5167:function(e,t,r){"use strict";r("346f")},9136:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"kyjl_comp"},[e.loading?e._e():r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("section",{staticClass:"section_card"},[r("div",{staticClass:"title"},[e._v("事件信息")]),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"事件类别",prop:"category"}},[r("el-select",{staticClass:"w_250",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}},e._l(e.categoryList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"事件来源",prop:"source"}},[r("el-radio",{attrs:{label:"信息监控中心"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},[e._v("信息监控中心")]),r("el-radio",{attrs:{label:"巡查"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},[e._v("巡查")]),r("el-radio",{attrs:{label:"其他"},model:{value:e.ruleForm.source,callback:function(t){e.$set(e.ruleForm,"source",t)},expression:"ruleForm.source"}},[e._v("其他")])],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{staticClass:"w_250",attrs:{label:"初次或补充勘查",prop:"count"}},[r("el-select",{staticClass:"w_250",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.count,callback:function(t){e.$set(e.ruleForm,"count",t)},expression:"ruleForm.count"}},e._l(e.countList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.label}})})),1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{staticClass:"w_250",attrs:{label:"事件时间",prop:"fsTime"}},[r("el-date-picker",{attrs:{disabled:"",clearable:"",type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},on:{input:function(t){return e.$forceUpdate()}},model:{value:e.ruleForm.fsTime,callback:function(t){e.$set(e.ruleForm,"fsTime",t)},expression:"ruleForm.fsTime"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{staticClass:"w_1",attrs:{label:"事件地点",prop:"address"}},[r("el-input",{attrs:{disabled:"",placeholder:"请输入内容"},on:{input:function(t){return e.$forceUpdate()}},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1)],1),r("el-row",[e.loading?e._e():r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"承办人",prop:"cbrPerson"}},[r("el-select",{ref:"cbrPerson",staticClass:"w_250",attrs:{multiple:"",placeholder:"请选择"},on:{change:e.cbrPersonChange},model:{value:e.ruleForm.cbrPerson,callback:function(t){e.$set(e.ruleForm,"cbrPerson",t)},expression:"ruleForm.cbrPerson"}},e._l(e.userInfoList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.nickName,value:e.nickName}})})),1)],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{staticClass:"w_1",attrs:{label:"事件描述",prop:"eventDesc"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.eventDesc,callback:function(t){e.$set(e.ruleForm,"eventDesc",t)},expression:"ruleForm.eventDesc"}})],1)],1)],1)],1),r("section",{staticClass:"section_card"},[r("div",{staticClass:"title"},[e._v("现场信息")]),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{staticClass:"w_250",attrs:{label:"到达现场时间",prop:"ddTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.ddTime,callback:function(t){e.$set(e.ruleForm,"ddTime",t)},expression:"ruleForm.ddTime"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-row",[r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"w_250",attrs:{label:"现场勘察时间",prop:"kcStartTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.kcStartTime,callback:function(t){e.$set(e.ruleForm,"kcStartTime",t)},expression:"ruleForm.kcStartTime"}})],1)],1),r("el-col",{attrs:{span:1}},[r("span",{staticStyle:{"line-height":"36px"}},[e._v("至")])]),r("el-col",{attrs:{span:11}},[r("el-form-item",{staticClass:"w_250",attrs:{"label-width":"0px",label:"",prop:"kcEndTime"}},[r("el-date-picker",{attrs:{clearable:"",type:"datetime","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:e.ruleForm.kcEndTime,callback:function(t){e.$set(e.ruleForm,"kcEndTime",t)},expression:"ruleForm.kcEndTime"}})],1)],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"现场有无变动",prop:""}},[r("el-radio",{attrs:{label:"1"},model:{value:e.isChange,callback:function(t){e.isChange=t},expression:"isChange"}},[e._v("有")]),r("el-radio",{attrs:{label:"0"},model:{value:e.isChange,callback:function(t){e.isChange=t},expression:"isChange"}},[e._v("无")])],1)],1),1==e.isChange?r("el-col",{attrs:{span:16}},[r("el-form-item",{staticClass:"w_1",attrs:{label:"变动记录",prop:"changeRecord"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.changeRecord,callback:function(t){e.$set(e.ruleForm,"changeRecord",t)},expression:"ruleForm.changeRecord"}})],1)],1):e._e()],1)],1),e._l(e.ruleForm.ywrPersonList,(function(t,s){return r("section",{key:t.lossesInfoId,staticClass:"section_card"},[r("div",{staticClass:"title table_title"},[r("span",[e._v("赔偿义务人"+e._s(s+1))]),0==s?r("div",{staticClass:"add_table ",staticStyle:{width:"80px"},on:{click:e.ywrPersonListAdd}},[e._v("新增义务人")]):r("div",{staticClass:"add_table ",on:{click:function(r){return e.ywrPersonListDel(t.lossesInfoId)}}},[e._v("删除")])]),r("el-table",{attrs:{data:[t],border:"",stripe:""}},[r("el-table-column",{attrs:{label:"姓名",align:"center",width:"130"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".name",rules:[{required:!0,message:"姓名不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"性别",align:"center",width:"130"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".gender",rules:[{required:!0,message:"性别不能为空",trigger:"change"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.gender,callback:function(r){e.$set(t.row,"gender",r)},expression:"scope.row.gender"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"年龄",align:"center",width:"130"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".age",rules:[{required:!0,message:"年龄不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.age,callback:function(r){e.$set(t.row,"age",r)},expression:"scope.row.age"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{width:"180",label:"车牌号码",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".carPlate",rules:[{required:!0,message:"车牌号码不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.carPlate,callback:function(r){e.$set(t.row,"carPlate",r)},expression:"scope.row.carPlate"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{width:"180",label:"车型",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".carModel",rules:[{required:!0,message:"车型不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.carModel,callback:function(r){e.$set(t.row,"carModel",r)},expression:"scope.row.carModel"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"所在单位及职业",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".occupation"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.occupation,callback:function(r){e.$set(t.row,"occupation",r)},expression:"scope.row.occupation"}})],1)]}}],null,!0)})],1),r("div",{staticClass:"title second_title",staticStyle:{"margin-top":"25px"}},[r("div",[e._v("路产损失清单")]),r("div",{staticClass:"add_table ",on:{click:function(t){return e.lossesInfoListAdd(s)}}},[e._v("添加")])]),r("el-table",{attrs:{data:t.lossesInfoList,border:"",stripe:""},scopedSlots:e._u([{key:"append",fn:function(){return[r("el-row",{staticStyle:{display:"flex","background-color":"#ededed"}},[r("div",{staticStyle:{width:"77.2%",height:"100%",display:"flex","justify-content":"center","align-items":"center",padding:"15px 0","border-right":"2px solid #dfe6ec"}},[e._v(" 合计 ")]),r("div",{staticStyle:{flex:"1",height:"100%",display:"flex","justify-content":"center","align-items":"center",padding:"5px 0",margin:"10px","box-sizing":"border-box","background-color":"#f7f7f7"}},[e._v(" "+e._s(t.totalAmount||"自动计算")+" ")])])]},proxy:!0}],null,!0)},[r("el-table-column",{attrs:{label:"路产名称",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"w_1",attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".name",rules:[{required:!0,message:"路产名称不能为空",trigger:"change"}]}},[r("el-select",{staticClass:"mingcheng",attrs:{clearable:"",placeholder:"请选择"},on:{change:function(r){return e.lossesNameChange(r,s,t.$index)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}},e._l(e.keywordList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"单价",align:"center",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".unitPrice",rules:[{required:!0,message:"单价不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},on:{change:function(r){return e.changMoney(r,s,t.$index)}},model:{value:t.row.unitPrice,callback:function(r){e.$set(t.row,"unitPrice",r)},expression:"scope.row.unitPrice"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"数量",align:"center",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".count",rules:[{required:!0,message:"单价不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},on:{change:function(r){return e.changMoney(r,s,t.$index)}},model:{value:t.row.count,callback:function(r){e.$set(t.row,"count",r)},expression:"scope.row.count"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"单位",align:"center",width:"120"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",{staticClass:"star_required"},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".unit",rules:[{required:!0,message:"单位不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"金额小计",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".subtotal"}},[r("el-input",{attrs:{disabled:"",placeholder:"自动计算"},model:{value:t.row.subtotal,callback:function(r){e.$set(t.row,"subtotal",r)},expression:"scope.row.subtotal"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"备注",align:"center",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"ywrPersonList."+s+".lossesInfoList."+t.$index+".remark"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.remark,callback:function(r){e.$set(t.row,"remark",r)},expression:"scope.row.remark"}})],1)]}}],null,!0)}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.lossesInfoListDel(s,t.row.lossesInfoId)}}},[e._v("删除")])]}}],null,!0)})],1)],1)})),r("section",{staticClass:"section_card",staticStyle:{"margin-top":"15px"}},[r("div",{staticClass:"title table_title"},[r("div",[e._v("见证人")]),r("div",{staticClass:"add_table",on:{click:e.jzrPersonListAdd}},[e._v("添加")])]),r("el-table",{attrs:{data:e.ruleForm.jzrPersonList,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"姓名",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"jzrPersonList."+t.$index+".name",rules:[{required:!1,message:"姓名不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})],1)]}}],null,!1,1092203817)}),r("el-table-column",{attrs:{label:"性别",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"jzrPersonList."+t.$index+".gender",rules:[{required:!1,message:"性别不能为空",trigger:"change"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.gender,callback:function(r){e.$set(t.row,"gender",r)},expression:"scope.row.gender"}})],1)]}}],null,!1,4087004788)}),r("el-table-column",{attrs:{label:"年龄",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"jzrPersonList."+t.$index+".age",rules:[{required:!1,message:"年龄不能为空",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.age,callback:function(r){e.$set(t.row,"age",r)},expression:"scope.row.age"}})],1)]}}],null,!1,1198248839)}),r("el-table-column",{attrs:{label:"单位名称",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"jzrPersonList."+t.$index+".deptName"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.deptName,callback:function(r){e.$set(t.row,"deptName",r)},expression:"scope.row.deptName"}})],1)]}}],null,!1,1210687705)}),r("el-table-column",{attrs:{label:"职业",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("span",[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(t){return[r("el-form-item",{attrs:{"label-width":"0px",prop:"jzrPersonList."+t.$index+".occupation"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:t.row.occupation,callback:function(r){e.$set(t.row,"occupation",r)},expression:"scope.row.occupation"}})],1)]}}],null,!1,3530431737)}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.jzrPersonListDel(t.row.jzrId)}}},[e._v("删除")])]}}],null,!1,527703136)})],1)],1),r("section",{staticStyle:{display:"flex","justify-content":"center",padding:"25px 0"}},[r("el-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("关闭")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")])],1)],2)],1)},a=[],o=r("c7eb"),l=r("1da1"),n=(r("4de4"),r("7db0"),r("d81d"),r("14d9"),r("b0c0"),r("e9c4"),r("a9e3"),r("b64b"),r("d3b7"),r("e95a7")),i=r("2934"),c=r("fa7d"),u=r("06d0"),d=(r("c1df"),{props:{deptId:{type:[String,Number]},close:{type:Function,require:!0},show:{type:Boolean}},watch:{show:{handler:function(e,t){e?!this.loading&&this.getData():this.ruleForm={}},deep:!0}},data:function(){return{countList:[{label:"初次"},{label:"补充"}],loading:!0,isChange:"1",ruleForm:{address:void 0},rules:{address:[{required:!0,message:"请填写",trigger:"blur"}],category:[{required:!0,message:"请选择",trigger:"change"}],source:[{required:!0,message:"请选择",trigger:"change"}],fsTime:[{required:!0,message:"请选择",trigger:"change"}],ddTime:[{required:!0,message:"请选择",trigger:"change"}],cbrPerson:[{required:!0,message:"请选择",trigger:"change"}],kcStartTime:[{required:!0,message:"请选择",trigger:"change"}],kcEndTime:[{required:!0,message:"请选择",trigger:"change"}]},categoryList:[{label:"损坏公路路产",value:"损坏公路路产"}],userInfoList:[],keywordList:[]}},created:function(){this.userList()},mounted:function(){var e=this;this.$nextTick((function(){e.getData()}))},methods:{lossesNameChange:function(e,t,r){var s=this.keywordList.find((function(t){return t.name==e}));s&&(this.ruleForm.ywrPersonList[t].lossesInfoList[r].unitPrice=s.unitPrice,this.ruleForm.ywrPersonList[t].lossesInfoList[r].count=1,this.ruleForm.ywrPersonList[t].lossesInfoList[r].unit=s.unit,this.ruleForm.ywrPersonList[t].lossesInfoList[r].subtotal=s.subtotal,this.changMoney(e,t,r))},changMoney:function(e,t,r){var s=this.ruleForm.ywrPersonList[t].lossesInfoList[r];s.subtotal=Number(s.count)*Number(s.unitPrice);var a=0;this.ruleForm.ywrPersonList[t].lossesInfoList.map((function(e){a+=Number(e.subtotal||0)})),this.$set(this.ruleForm.ywrPersonList[t],"totalAmount",a)},lossesInfoListAdd:function(e){var t={name:void 0,unitPrice:void 0,count:void 0,unit:void 0,subtotal:void 0,remark:void 0,lossesInfoId:Date.now()*(100*Math.random())};this.ruleForm.ywrPersonList[e].lossesInfoList.push(t)},lossesInfoListDel:function(e,t){var r=this;this.ruleForm.ywrPersonList[e].lossesInfoList=this.ruleForm.ywrPersonList[e].lossesInfoList.filter((function(e){return e.lossesInfoId!=t})),this.ruleForm.ywrPersonList[e].totalAmount=0,this.ruleForm.ywrPersonList[e].lossesInfoList.map((function(t){r.ruleForm.ywrPersonList[e].totalAmount+=Number(t.subtotal||0)}))},remotekeywordItemList:function(e){Object(c["c"])(this.getkeywordItemList(e),500)},getkeywordItemList:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function r(){var s;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["g"])(e);case 2:s=r.sent,t.keywordList=s.data;case 4:case"end":return r.stop()}}),r)})))()},jzrPersonListAdd:function(){this.ruleForm.jzrPersonList=this.ruleForm.jzrPersonList||new Array;var e={name:void 0,gender:void 0,age:void 0,deptName:void 0,occupation:void 0,jzrId:Date.now()*(10*Math.random())*(this.ruleForm.ywrPersonList.length+1)};this.ruleForm.jzrPersonList.push(e)},jzrPersonListDel:function(e){this.ruleForm.jzrPersonList=this.ruleForm.jzrPersonList.filter((function(t){return t.jzrId!=e}))},ywrPersonListAdd:function(){this.ruleForm.ywrPersonList=this.ruleForm.ywrPersonList||new Array;var e={name:void 0,gender:void 0,age:void 0,deptName:void 0,occupation:void 0,carPlate:void 0,carModel:void 0,lossesInfoId:Date.now()*(10*Math.random())*(this.ruleForm.ywrPersonList.length+1),lossesInfoList:[{name:void 0,unitPrice:void 0,count:void 0,unit:void 0,subtotal:void 0,remark:void 0,lossesInfoId:Date.now()*(100*Math.random())}]};this.ruleForm.ywrPersonList.push(e)},ywrPersonListDel:function(e){this.ruleForm.ywrPersonList=this.ruleForm.ywrPersonList.filter((function(t){return t.lossesInfoId!=e}))},cbrPersonChange:function(e){var t=this,r=[];e.map((function(e){var s=t.userInfoList.find((function(t){return e==t.nickName}));if(s){var a={id:s.userId,name:s.nickName,gender:0==s.sex?"男":1==s.sex?"女":"",phone:s.phonenumber,deptName:s.dept.deptName};r.push(a)}})),this.ruleForm.cbrPersonList=r},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(l["a"])(Object(o["a"])().mark((function e(r){var s,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r&&(s=JSON.parse(JSON.stringify(t.ruleForm)),a=JSON.parse(JSON.stringify(s.baseData)),a.accidentLocation=s.address,a.accidentTime=s.fsTime,delete s.cbrPerson,delete s.baseData,Object(n["b"])({kyjl:s,baseData:a},{businessId:t.$route.query.id,docCode:"new_kyjl"}).then((function(e){200==e.code&&(t.loading=!1,t.$message.success("保存成功"),t.$emit("close"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},userList:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["q"])({deptId:e.deptId});case 2:r=t.sent,e.userInfoList=r.rows;case 4:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(n["a"])({businessId:e.$route.query.id,docCode:"new_kyjl"}).then((function(t){var r;(t.data.kyjl.cbrPerson=[],e.ruleForm=t.data.kyjl?JSON.parse(JSON.stringify(t.data.kyjl)):e.ruleForm,e.ruleForm.baseData=t.data.baseData,e.ruleForm.category="损坏公路路产",t.data.baseData&&t.data.baseData.lossesInfoList&&(e.keywordList=t.data.baseData.lossesInfoList),e.isChange=e.ruleForm.changeRecord?"1":"0",e.ruleForm.fsTime=t.data.baseData&&t.data.baseData.accidentTime||"",e.ruleForm.address=t.data.baseData&&t.data.baseData.accidentLocation||"",e.ruleForm.eventDesc=e.ruleForm.eventDesc||t.data.baseData&&t.data.baseData.eventDesc,e.ruleForm.cbrPersonList&&e.ruleForm.cbrPersonList.length>0)?(e.ruleForm.cbrPerson=e.ruleForm.cbrPersonList.map((function(e){return e.name})),e.cbrPersonChange(e.ruleForm.cbrPerson)):(e.ruleForm.cbrPerson=null===(r=t.data.baseData)||void 0===r||null===(r=r.clrList)||void 0===r?void 0:r.map((function(e){return e.name})),e.cbrPersonChange(e.ruleForm.cbrPerson));if(!e.ruleForm.ywrPersonList){var s={name:void 0,gender:void 0,age:void 0,deptName:void 0,carPlate:void 0,carModel:void 0,occupation:void 0,lossesInfoList:[{name:void 0,unitPrice:void 0,count:void 0,unit:void 0,subtotal:void 0,remark:void 0,lossesInfoId:Date.now()}]};e.ruleForm.ywrPersonList=t.data.baseData&&t.data.baseData.dsrList&&t.data.baseData.dsrList.length>0?t.data.baseData.dsrList:[s]}e.ruleForm.ywrPersonList.map((function(e,t){e.lossesInfoId=(e.name||"")+Date.now()+t,e.lossesInfoList.map((function(t,r){t.lossesInfoId=e.lossesInfoId+(t.name||"")+r}))})),e.ruleForm.jzrPersonList&&e.ruleForm.jzrPersonList.length>0&&e.ruleForm.jzrPersonList.map((function(t){t.jzrId=Date.now()*(10*Math.random())*(e.ruleForm.ywrPersonList.length+1)})),e.loading=!1}));case 3:case"end":return t.stop()}}),t)})))()}}}),m=d,p=(r("5167"),r("2877")),f=Object(p["a"])(m,s,a,!1,null,"b57aa480",null);t["default"]=f.exports},e95a7:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));r("99af");var s=r("b775");function a(e){var t=e.businessId,r=e.docCode;return Object(s["a"])({url:"/roadProducts/roadDoc/docDetails/".concat(t,"/").concat(r),method:"get"})}function o(e,t){var r=t.businessId,a=t.docCode;return Object(s["a"])({url:"/roadProducts/roadDoc/saveDoc/".concat(r,"/").concat(a),method:"post",data:e})}}}]);